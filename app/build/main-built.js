/**
 * @license
 * pixi.js - v1.6.0
 * Copyright (c) 2012-2014, Mat Groves
 * http://goodboydigital.com/
 *
 * Compiled: 2014-07-18
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */

// MIT license

/*
    PolyK library
    url: http://polyk.ivank.net
    Released under MIT licence.

    Copyright (c) 2012 Ivan Kuckir

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.

    This is an amazing lib!

    slightly modified by Mat Groves (matgroves.com);
*/

/*!
 * VERSION: 1.13.2
 * DATE: 2014-08-23
 * UPDATES AND DOCS AT: http://www.greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2014, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/

/*!
 * VERSION: 1.13.2
 * DATE: 2014-08-23
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * @license Copyright (c) 2008-2014, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */

/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */

/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./dist/lodash.js`
 */

(function(){var e=this,t=t||{};t.WEBGL_RENDERER=0,t.CANVAS_RENDERER=1,t.VERSION="v1.6.1",t.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},t.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},t._UID=0,typeof Float32Array!="undefined"?(t.Float32Array=Float32Array,t.Uint16Array=Uint16Array):(t.Float32Array=Array,t.Uint16Array=Array),t.INTERACTION_FREQUENCY=30,t.AUTO_PREVENT_DEFAULT=!0,t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,t.dontSayHello=!1,t.sayHello=function(e){if(t.dontSayHello)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["%c %c %c Pixi.js "+t.VERSION+" - "+e+"  %c "+" %c "+" http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,n)}else window.console&&console.log("Pixi.js "+t.VERSION+" - http://www.pixijs.com/");t.dontSayHello=!0},t.Point=function(e,t){this.x=e||0,this.y=t||0},t.Point.prototype.clone=function(){return new t.Point(this.x,this.y)},t.Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(t!==0?this.x:0)},t.Point.prototype.constructor=t.Point,t.Rectangle=function(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0},t.Rectangle.prototype.clone=function(){return new t.Rectangle(this.x,this.y,this.width,this.height)},t.Rectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(e>=n&&e<=n+this.width){var r=this.y;if(t>=r&&t<=r+this.height)return!0}return!1},t.Rectangle.prototype.constructor=t.Rectangle,t.EmptyRectangle=new t.Rectangle(0,0,0,0),t.Polygon=function(e){e instanceof Array||(e=Array.prototype.slice.call(arguments));if(typeof e[0]=="number"){var n=[];for(var r=0,i=e.length;r<i;r+=2)n.push(new t.Point(e[r],e[r+1]));e=n}this.points=e},t.Polygon.prototype.clone=function(){var e=[];for(var n=0;n<this.points.length;n++)e.push(this.points[n].clone());return new t.Polygon(e)},t.Polygon.prototype.contains=function(e,t){var n=!1;for(var r=0,i=this.points.length-1;r<this.points.length;i=r++){var s=this.points[r].x,o=this.points[r].y,u=this.points[i].x,a=this.points[i].y,f=o>t!=a>t&&e<(u-s)*(t-o)/(a-o)+s;f&&(n=!n)}return n},t.Polygon.prototype.constructor=t.Polygon,t.Circle=function(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0},t.Circle.prototype.clone=function(){return new t.Circle(this.x,this.y,this.radius)},t.Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.x-e,r=this.y-t,i=this.radius*this.radius;return n*=n,r*=r,n+r<=i},t.Circle.prototype.getBounds=function(){return new t.Rectangle(this.x-this.radius,this.y-this.radius,this.width,this.height)},t.Circle.prototype.constructor=t.Circle,t.Ellipse=function(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0},t.Ellipse.prototype.clone=function(){return new t.Ellipse(this.x,this.y,this.width,this.height)},t.Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return n*=n,r*=r,n+r<=1},t.Ellipse.prototype.getBounds=function(){return new t.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},t.Ellipse.prototype.constructor=t.Ellipse,t.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},t.Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.Matrix.prototype.toArray=function(e){this.array||(this.array=new Float32Array(9));var t=this.array;return e?(t[0]=this.a,t[1]=this.c,t[2]=0,t[3]=this.b,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.b,t[2]=this.tx,t[3]=this.c,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t},t.identityMatrix=new t.Matrix,t.determineMatrixArrayType=function(){return typeof Float32Array!="undefined"?Float32Array:Array},t.Matrix2=t.determineMatrixArrayType(),t.DisplayObject=function(){this.position=new t.Point,this.scale=new t.Point(1,1),this.pivot=new t.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new t.Matrix,this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new t.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},t.DisplayObject.prototype.constructor=t.DisplayObject,t.DisplayObject.prototype.setInteractive=function(e){this.interactive=e},Object.defineProperty(t.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(e){this._interactive=e,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(t.DisplayObject.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}}),Object.defineProperty(t.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(t.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(e){if(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n].passes;for(var i=0;i<r.length;i++)t.push(r[i])}this._filterBlock={target:this,filterPasses:t}}this._filters=e}}),Object.defineProperty(t.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap===e)return;e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e}}),t.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var e=this.parent.worldTransform,t=this.worldTransform,n=this.pivot.x,r=this.pivot.y,i=this._cr*this.scale.x,s=-this._sr*this.scale.y,o=this._sr*this.scale.x,u=this._cr*this.scale.y,a=this.position.x-i*n-r*s,f=this.position.y-u*r-n*o,l=e.a,c=e.b,h=e.c,p=e.d;t.a=l*i+c*o,t.b=l*s+c*u,t.tx=l*a+c*f+e.tx,t.c=h*i+p*o,t.d=h*s+p*u,t.ty=h*a+p*f+e.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha},t.DisplayObject.prototype.getBounds=function(e){return e=e,t.EmptyRectangle},t.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(t.identityMatrix)},t.DisplayObject.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0)},t.DisplayObject.prototype.generateTexture=function(e){var n=this.getLocalBounds(),r=new t.RenderTexture(n.width|0,n.height|0,e);return r.render(this,new t.Point(-n.x,-n.y)),r},t.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},t.DisplayObject.prototype._renderCachedSprite=function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?t.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):t.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},t.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(!this._cachedSprite){var n=new t.RenderTexture(e.width|0,e.height|0);this._cachedSprite=new t.Sprite(n),this._cachedSprite.worldTransform=this.worldTransform}else this._cachedSprite.texture.resize(e.width|0,e.height|0);var r=this._filters;this._filters=null,this._cachedSprite.filters=r,this._cachedSprite.texture.render(this,new t.Point(-e.x,-e.y)),this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._filters=r,this._cacheAsBitmap=!0},t.DisplayObject.prototype._destroyCachedSprite=function(){if(!this._cachedSprite)return;this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},t.DisplayObject.prototype._renderWebGL=function(e){e=e},t.DisplayObject.prototype._renderCanvas=function(e){e=e},Object.defineProperty(t.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(t.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),t.DisplayObjectContainer=function(){t.DisplayObject.call(this),this.children=[]},t.DisplayObjectContainer.prototype=Object.create(t.DisplayObject.prototype),t.DisplayObjectContainer.prototype.constructor=t.DisplayObjectContainer,Object.defineProperty(t.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;t!==0?this.scale.x=e/(t/this.scale.x):this.scale.x=1,this._width=e}}),Object.defineProperty(t.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;t!==0?this.scale.y=e/(t/this.scale.y):this.scale.y=1,this._height=e}}),t.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},t.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.stage&&e.setStageReference(this.stage),e;throw new Error(e+" The index "+t+" supplied is out of bounds "+this.children.length)},t.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e===t)return;var n=this.children.indexOf(e),r=this.children.indexOf(t);if(n<0||r<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[n]=t,this.children[r]=e},t.DisplayObjectContainer.prototype.getChildAt=function(e){if(e>=0&&e<this.children.length)return this.children[e];throw new Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller")},t.DisplayObjectContainer.prototype.removeChild=function(e){return this.removeChildAt(this.children.indexOf(e))},t.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return this.stage&&t.removeStageReference(),t.parent=undefined,this.children.splice(e,1),t},t.DisplayObjectContainer.prototype.removeChildren=function(e,t){var n=e||0,r=typeof t=="number"?t:this.children.length,i=r-n;if(i>0&&i<=r){var s=this.children.splice(n,i);for(var o=0;o<s.length;o++){var u=s[o];this.stage&&u.removeStageReference(),u.parent=undefined}return s}throw new Error("Range Error, numeric values are outside the acceptable range")},t.DisplayObjectContainer.prototype.updateTransform=function(){if(!this.visible)return;t.DisplayObject.prototype.updateTransform.call(this);if(this._cacheAsBitmap)return;for(var e=0,n=this.children.length;e<n;e++)this.children[e].updateTransform()},t.DisplayObjectContainer.prototype.getBounds=function(e){if(this.children.length===0)return t.EmptyRectangle;if(e){var n=this.worldTransform;this.worldTransform=e,this.updateTransform(),this.worldTransform=n}var r=Infinity,i=Infinity,s=-Infinity,o=-Infinity,u,a,f,l=!1;for(var c=0,h=this.children.length;c<h;c++){var p=this.children[c];if(!p.visible)continue;l=!0,u=this.children[c].getBounds(e),r=r<u.x?r:u.x,i=i<u.y?i:u.y,a=u.width+u.x,f=u.height+u.y,s=s>a?s:a,o=o>f?o:f}if(!l)return t.EmptyRectangle;var d=this._bounds;return d.x=r,d.y=i,d.width=s-r,d.height=o-i,d},t.DisplayObjectContainer.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=t.identityMatrix;for(var n=0,r=this.children.length;n<r;n++)this.children[n].updateTransform();var i=this.getBounds();return this.worldTransform=e,i},t.DisplayObjectContainer.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0);for(var t=0,n=this.children.length;t<n;t++){var r=this.children[t];r.setStageReference(e)}},t.DisplayObjectContainer.prototype.removeStageReference=function(){for(var e=0,t=this.children.length;e<t;e++){var n=this.children[e];n.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},t.DisplayObjectContainer.prototype._renderWebGL=function(e){if(!this.visible||this.alpha<=0)return;if(this._cacheAsBitmap){this._renderCachedSprite(e);return}var t,n;if(this._mask||this._filters){this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start());for(t=0,n=this.children.length;t<n;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0,n=this.children.length;t<n;t++)this.children[t]._renderWebGL(e)},t.DisplayObjectContainer.prototype._renderCanvas=function(e){if(this.visible===!1||this.alpha===0)return;if(this._cacheAsBitmap){this._renderCachedSprite(e);return}this._mask&&e.maskManager.pushMask(this._mask,e.context);for(var t=0,n=this.children.length;t<n;t++){var r=this.children[t];r._renderCanvas(e)}this._mask&&e.maskManager.popMask(e.context)},t.Sprite=function(e){t.DisplayObjectContainer.call(this),this.anchor=new t.Point,this.texture=e,this._width=0,this._height=0,this.tint=16777215,this.blendMode=t.blendModes.NORMAL,e.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},t.Sprite.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Sprite.prototype.constructor=t.Sprite,Object.defineProperty(t.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(t.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),t.Sprite.prototype.setTexture=function(e){this.texture=e,this.cachedTint=16777215},t.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},t.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,n=this.texture.frame.height,r=t*(1-this.anchor.x),i=t*-this.anchor.x,s=n*(1-this.anchor.y),o=n*-this.anchor.y,u=e||this.worldTransform,a=u.a,f=u.c,l=u.b,c=u.d,h=u.tx,p=u.ty,d=a*i+l*o+h,v=c*o+f*i+p,m=a*r+l*o+h,g=c*o+f*r+p,y=a*r+l*s+h,b=c*s+f*r+p,w=a*i+l*s+h,E=c*s+f*i+p,S=-Infinity,x=-Infinity,T=Infinity,N=Infinity;T=d<T?d:T,T=m<T?m:T,T=y<T?y:T,T=w<T?w:T,N=v<N?v:N,N=g<N?g:N,N=b<N?b:N,N=E<N?E:N,S=d>S?d:S,S=m>S?m:S,S=y>S?y:S,S=w>S?w:S,x=v>x?v:x,x=g>x?g:x,x=b>x?b:x,x=E>x?E:x;var C=this._bounds;return C.x=T,C.width=S-T,C.y=N,C.height=x-N,this._currentBounds=C,C},t.Sprite.prototype._renderWebGL=function(e){if(!this.visible||this.alpha<=0)return;var t,n;if(this._mask||this._filters){var r=e.spriteBatch;this._filters&&(r.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(r.stop(),e.maskManager.pushMask(this.mask,e),r.start()),r.render(this);for(t=0,n=this.children.length;t<n;t++)this.children[t]._renderWebGL(e);r.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),r.start()}else{e.spriteBatch.render(this);for(t=0,n=this.children.length;t<n;t++)this.children[t]._renderWebGL(e)}},t.Sprite.prototype._renderCanvas=function(e){if(this.visible===!1||this.alpha===0)return;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=t.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e.context);if(this.texture.valid){e.context.globalAlpha=this.worldAlpha,e.roundPixels?e.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,this.worldTransform.tx|0,this.worldTransform.ty|0):e.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,this.worldTransform.tx,this.worldTransform.ty),e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===t.scaleModes.LINEAR);var n=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,r=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;this.tint!==16777215?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=t.CanvasTinter.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,n,r,this.texture.crop.width,this.texture.crop.height)):e.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,n,r,this.texture.crop.width,this.texture.crop.height)}for(var i=0,s=this.children.length;i<s;i++)this.children[i]._renderCanvas(e);this._mask&&e.maskManager.popMask(e.context)},t.Sprite.fromFrame=function(e){var n=t.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache'+this);return new t.Sprite(n)},t.Sprite.fromImage=function(e,n,r){var i=t.Texture.fromImage(e,n,r);return new t.Sprite(i)},t.SpriteBatch=function(e){t.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},t.SpriteBatch.prototype=Object.create(t.DisplayObjectContainer.prototype),t.SpriteBatch.constructor=t.SpriteBatch,t.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new t.WebGLFastSpriteBatch(e),this.ready=!0},t.SpriteBatch.prototype.updateTransform=function(){t.DisplayObject.prototype.updateTransform.call(this)},t.SpriteBatch.prototype._renderWebGL=function(e){if(!this.visible||this.alpha<=0||!this.children.length)return;this.ready||this.initWebGL(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start()},t.SpriteBatch.prototype._renderCanvas=function(e){var n=e.context;n.globalAlpha=this.worldAlpha,t.DisplayObject.prototype.updateTransform.call(this);var r=this.worldTransform,i=!0;for(var s=0;s<this.children.length;s++){var o=this.children[s];if(!o.visible)continue;var u=o.texture,a=u.frame;n.globalAlpha=this.worldAlpha*o.alpha;if(o.rotation%(Math.PI*2)===0)i&&(n.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty),i=!1),n.drawImage(u.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-a.height*o.scale.y+o.position.y+.5|0,a.width*o.scale.x,a.height*o.scale.y);else{i||(i=!0),t.DisplayObject.prototype.updateTransform.call(o);var f=o.worldTransform;e.roundPixels?n.setTransform(f.a,f.c,f.b,f.d,f.tx|0,f.ty|0):n.setTransform(f.a,f.c,f.b,f.d,f.tx,f.ty),n.drawImage(u.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width+.5|0,o.anchor.y*-a.height+.5|0,a.width,a.height)}}},t.MovieClip=function(e){t.Sprite.call(this,e[0]),this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},t.MovieClip.prototype=Object.create(t.Sprite.prototype),t.MovieClip.prototype.constructor=t.MovieClip,Object.defineProperty(t.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),t.MovieClip.prototype.stop=function(){this.playing=!1},t.MovieClip.prototype.play=function(){this.playing=!0},t.MovieClip.prototype.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=this.currentFrame+.5|0;this.setTexture(this.textures[t%this.textures.length])},t.MovieClip.prototype.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},t.MovieClip.prototype.updateTransform=function(){t.Sprite.prototype.updateTransform.call(this);if(!this.playing)return;this.currentFrame+=this.animationSpeed;var e=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||e<this.textures.length?this.setTexture(this.textures[e%this.textures.length]):e>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())},t.MovieClip.fromFrames=function(e){var n=[];for(var r=0;r<e.length;r++)n.push(new t.Texture.fromFrame(e[r]));return new t.MovieClip(n)},t.MovieClip.fromImages=function(e){var n=[];for(var r=0;r<e.length;r++)n.push(new t.Texture.fromImage(e[r]));return new t.MovieClip(n)},t.FilterBlock=function(){this.visible=!0,this.renderable=!0},t.Text=function(e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),t.Sprite.call(this,t.Texture.fromCanvas(this.canvas)),this.setText(e),this.setStyle(n)},t.Text.prototype=Object.create(t.Sprite.prototype),t.Text.prototype.constructor=t.Text,Object.defineProperty(t.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(t.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),t.Text.prototype.setStyle=function(e){e=e||{},e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.wordWrapWidth=e.wordWrapWidth||100,e.dropShadow=e.dropShadow||!1,e.dropShadowAngle=e.dropShadowAngle||Math.PI/6,e.dropShadowDistance=e.dropShadowDistance||4,e.dropShadowColor=e.dropShadowColor||"black",this.style=e,this.dirty=!0},t.Text.prototype.setText=function(e){this.text=e.toString()||" ",this.dirty=!0},t.Text.prototype.updateText=function(){this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.wordWrap(this.text));var t=e.split(/(?:\r\n|\r|\n)/),n=[],r=0;for(var i=0;i<t.length;i++){var s=this.context.measureText(t[i]).width;n[i]=s,r=Math.max(r,s)}var o=r+this.style.strokeThickness;this.style.dropShadow&&(o+=this.style.dropShadowDistance),this.canvas.width=o+this.context.lineWidth;var u=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness,a=u*t.length;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.height=a,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top";var f,l;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var c=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,h=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(i=0;i<t.length;i++)f=this.style.strokeThickness/2,l=this.style.strokeThickness/2+i*u,this.style.align==="right"?f+=r-n[i]:this.style.align==="center"&&(f+=(r-n[i])/2),this.style.fill&&this.context.fillText(t[i],f+c,l+h)}this.context.fillStyle=this.style.fill;for(i=0;i<t.length;i++)f=this.style.strokeThickness/2,l=this.style.strokeThickness/2+i*u,this.style.align==="right"?f+=r-n[i]:this.style.align==="center"&&(f+=(r-n[i])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(t[i],f,l),this.style.fill&&this.context.fillText(t[i],f,l);this.updateTexture()},t.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.requiresUpdate=!0},t.Text.prototype._renderWebGL=function(e){this.requiresUpdate&&(this.requiresUpdate=!1,t.updateWebGLTexture(this.texture.baseTexture,e.gl)),t.Sprite.prototype._renderWebGL.call(this,e)},t.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),t.Sprite.prototype.updateTransform.call(this)},t.Text.prototype.determineFontHeight=function(e){var n=t.Text.heightCache[e];if(!n){var r=document.getElementsByTagName("body")[0],i=document.createElement("div"),s=document.createTextNode("M");i.appendChild(s),i.setAttribute("style",e+";position:absolute;top:0;left:0"),r.appendChild(i),n=i.offsetHeight,t.Text.heightCache[e]=n,r.removeChild(i)}return n},t.Text.prototype.wordWrap=function(e){var t="",n=e.split("\n");for(var r=0;r<n.length;r++){var i=this.style.wordWrapWidth,s=n[r].split(" ");for(var o=0;o<s.length;o++){var u=this.context.measureText(s[o]).width,a=u+this.context.measureText(" ").width;o===0||a>i?(o>0&&(t+="\n"),t+=s[o],i=this.style.wordWrapWidth-u):(i-=a,t+=" "+s[o])}r<n.length-1&&(t+="\n")}return t},t.Text.prototype.destroy=function(e){this.context=null,this.canvas=null,this.texture.destroy(e===undefined?!0:e)},t.Text.heightCache={},t.BitmapText=function(e,n){t.DisplayObjectContainer.call(this),this._pool=[],this.setText(e),this.setStyle(n),this.updateText(),this.dirty=!1},t.BitmapText.prototype=Object.create(t.DisplayObjectContainer.prototype),t.BitmapText.prototype.constructor=t.BitmapText,t.BitmapText.prototype.setText=function(e){this.text=e||" ",this.dirty=!0},t.BitmapText.prototype.setStyle=function(e){e=e||{},e.align=e.align||"left",this.style=e;var n=e.font.split(" ");this.fontName=n[n.length-1],this.fontSize=n.length>=2?parseInt(n[n.length-2],10):t.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=e.tint},t.BitmapText.prototype.updateText=function(){var e=t.BitmapText.fonts[this.fontName],n=new t.Point,r=null,i=[],s=0,o=[],u=0,a=this.fontSize/e.size;for(var f=0;f<this.text.length;f++){var l=this.text.charCodeAt(f);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(f))){o.push(n.x),s=Math.max(s,n.x),u++,n.x=0,n.y+=e.lineHeight,r=null;continue}var c=e.chars[l];if(!c)continue;r&&c[r]&&(n.x+=c.kerning[r]),i.push({texture:c.texture,line:u,charCode:l,position:new t.Point(n.x+c.xOffset,n.y+c.yOffset)}),n.x+=c.xAdvance,r=l}o.push(n.x),s=Math.max(s,n.x);var h=[];for(f=0;f<=u;f++){var p=0;this.style.align==="right"?p=s-o[f]:this.style.align==="center"&&(p=(s-o[f])/2),h.push(p)}var d=this.children.length,v=i.length,m=this.tint||16777215;for(f=0;f<v;f++){var g=f<d?this.children[f]:this._pool.pop();g?g.setTexture(i[f].texture):g=new t.Sprite(i[f].texture),g.position.x=(i[f].position.x+h[i[f].line])*a,g.position.y=i[f].position.y*a,g.scale.x=g.scale.y=a,g.tint=m,g.parent||this.addChild(g)}while(this.children.length>v){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=s*a,this.textHeight=(n.y+e.lineHeight)*a},t.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),t.DisplayObjectContainer.prototype.updateTransform.call(this)},t.BitmapText.fonts={},t.InteractionData=function(){this.global=new t.Point,this.target=null,this.originalEvent=null},t.InteractionData.prototype.getLocalPosition=function(e){var n=e.worldTransform,r=this.global,i=n.a,s=n.b,o=n.tx,u=n.c,a=n.d,f=n.ty,l=1/(i*a+s*-u);return new t.Point(a*l*r.x+ -s*l*r.y+(f*s-o*a)*l,i*l*r.y+ -u*l*r.x+(-f*i+o*u)*l)},t.InteractionData.prototype.constructor=t.InteractionData,t.InteractionManager=function(e){this.stage=e,this.mouse=new t.InteractionData,this.touchs={},this.tempPoint=new t.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1},t.InteractionManager.prototype.constructor=t.InteractionManager,t.InteractionManager.prototype.collectInteractiveSprite=function(e,t){var n=e.children,r=n.length;for(var i=r-1;i>=0;i--){var s=n[i];s._interactive?(t.interactiveChildren=!0,this.interactiveItems.push(s),s.children.length>0&&this.collectInteractiveSprite(s,s)):(s.__iParent=null,s.children.length>0&&this.collectInteractiveSprite(s,t))}},t.InteractionManager.prototype.setTarget=function(e){this.target=e,this.interactionDOMElement===null&&this.setTargetDomElement(e.view)},t.InteractionManager.prototype.setTargetDomElement=function(e){this.removeEvents(),window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none"),this.interactionDOMElement=e,e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mousedown",this.onMouseDown,!0),e.addEventListener("mouseout",this.onMouseOut,!0),e.addEventListener("touchstart",this.onTouchStart,!0),e.addEventListener("touchend",this.onTouchEnd,!0),e.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},t.InteractionManager.prototype.removeEvents=function(){if(!this.interactionDOMElement)return;this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0)},t.InteractionManager.prototype.update=function(){if(!this.target)return;var e=Date.now(),n=e-this.last;n=n*t.INTERACTION_FREQUENCY/1e3;if(n<1)return;this.last=e;var r=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,s="inherit",o=!1;for(r=0;r<i;r++){var u=this.interactiveItems[r];u.__hit=this.hitTest(u,this.mouse),this.mouse.target=u,u.__hit&&!o?(u.buttonMode&&(s=u.defaultCursor),u.interactiveChildren||(o=!0),u.__isOver||(u.mouseover&&u.mouseover(this.mouse),u.__isOver=!0)):u.__isOver&&(u.mouseout&&u.mouseout(this.mouse),u.__isOver=!1)}this.currentCursorStyle!==s&&(this.currentCursorStyle=s,this.interactionDOMElement.style.cursor=s)},t.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;var e=this.interactiveItems.length;for(var t=0;t<e;t++)this.interactiveItems[t].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},t.InteractionManager.prototype.onMouseMove=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e||window.event;var t=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width),this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height);var n=this.interactiveItems.length;for(var r=0;r<n;r++){var i=this.interactiveItems[r];i.mousemove&&i.mousemove(this.mouse)}},t.InteractionManager.prototype.onMouseDown=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e||window.event,t.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();var n=this.interactiveItems.length;for(var r=0;r<n;r++){var i=this.interactiveItems[r];if(i.mousedown||i.click){i.__mouseIsDown=!0,i.__hit=this.hitTest(i,this.mouse);if(i.__hit){i.mousedown&&i.mousedown(this.mouse),i.__isDown=!0;if(!i.interactiveChildren)break}}}},t.InteractionManager.prototype.onMouseOut=function(){this.dirty&&this.rebuildInteractiveGraph();var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var t=0;t<e;t++){var n=this.interactiveItems[t];n.__isOver&&(this.mouse.target=n,n.mouseout&&n.mouseout(this.mouse),n.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},t.InteractionManager.prototype.onMouseUp=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e||window.event;var t=this.interactiveItems.length,n=!1;for(var r=0;r<t;r++){var i=this.interactiveItems[r];i.__hit=this.hitTest(i,this.mouse),i.__hit&&!n?(i.mouseup&&i.mouseup(this.mouse),i.__isDown&&i.click&&i.click(this.mouse),i.interactiveChildren||(n=!0)):i.__isDown&&i.mouseupoutside&&i.mouseupoutside(this.mouse),i.__isDown=!1}},t.InteractionManager.prototype.hitTest=function(e,n){var r=n.global;if(!e.worldVisible)return!1;var i=e instanceof t.Sprite,s=e.worldTransform,o=s.a,u=s.b,a=s.tx,f=s.c,l=s.d,c=s.ty,h=1/(o*l+u*-f),p=l*h*r.x+ -u*h*r.y+(c*u-a*l)*h,d=o*h*r.y+ -f*h*r.x+(-c*o+a*f)*h;n.target=e;if(e.hitArea&&e.hitArea.contains)return e.hitArea.contains(p,d)?(n.target=e,!0):!1;if(i){var v=e.texture.frame.width,m=e.texture.frame.height,g=-v*e.anchor.x,y;if(p>g&&p<g+v){y=-m*e.anchor.y;if(d>y&&d<y+m)return n.target=e,!0}}var b=e.children.length;for(var w=0;w<b;w++){var E=e.children[w],S=this.hitTest(E,n);if(S)return n.target=e,!0}return!1},t.InteractionManager.prototype.onTouchMove=function(e){this.dirty&&this.rebuildInteractiveGraph();var t=this.interactionDOMElement.getBoundingClientRect(),n=e.changedTouches,r,i=0;for(i=0;i<n.length;i++){var s=n[i];r=this.touchs[s.identifier],r.originalEvent=e||window.event,r.global.x=(s.clientX-t.left)*(this.target.width/t.width),r.global.y=(s.clientY-t.top)*(this.target.height/t.height),navigator.isCocoonJS&&(r.global.x=s.clientX,r.global.y=s.clientY);for(var o=0;o<this.interactiveItems.length;o++){var u=this.interactiveItems[o];u.touchmove&&u.__touchData&&u.__touchData[s.identifier]&&u.touchmove(r)}}},t.InteractionManager.prototype.onTouchStart=function(e){this.dirty&&this.rebuildInteractiveGraph();var n=this.interactionDOMElement.getBoundingClientRect();t.AUTO_PREVENT_DEFAULT&&e.preventDefault();var r=e.changedTouches;for(var i=0;i<r.length;i++){var s=r[i],o=this.pool.pop();o||(o=new t.InteractionData),o.originalEvent=e||window.event,this.touchs[s.identifier]=o,o.global.x=(s.clientX-n.left)*(this.target.width/n.width),o.global.y=(s.clientY-n.top)*(this.target.height/n.height),navigator.isCocoonJS&&(o.global.x=s.clientX,o.global.y=s.clientY);var u=this.interactiveItems.length;for(var a=0;a<u;a++){var f=this.interactiveItems[a];if(f.touchstart||f.tap){f.__hit=this.hitTest(f,o);if(f.__hit){f.touchstart&&f.touchstart(o),f.__isDown=!0,f.__touchData=f.__touchData||{},f.__touchData[s.identifier]=o;if(!f.interactiveChildren)break}}}}},t.InteractionManager.prototype.onTouchEnd=function(e){this.dirty&&this.rebuildInteractiveGraph();var t=this.interactionDOMElement.getBoundingClientRect(),n=e.changedTouches;for(var r=0;r<n.length;r++){var i=n[r],s=this.touchs[i.identifier],o=!1;s.global.x=(i.clientX-t.left)*(this.target.width/t.width),s.global.y=(i.clientY-t.top)*(this.target.height/t.height),navigator.isCocoonJS&&(s.global.x=i.clientX,s.global.y=i.clientY);var u=this.interactiveItems.length;for(var a=0;a<u;a++){var f=this.interactiveItems[a];if(f.__touchData&&f.__touchData[i.identifier]){f.__hit=this.hitTest(f,f.__touchData[i.identifier]),s.originalEvent=e||window.event;if(f.touchend||f.tap)f.__hit&&!o?(f.touchend&&f.touchend(s),f.__isDown&&f.tap&&f.tap(s),f.interactiveChildren||(o=!0)):f.__isDown&&f.touchendoutside&&f.touchendoutside(s),f.__isDown=!1;f.__touchData[i.identifier]=null}}this.pool.push(s),this.touchs[i.identifier]=null}},t.Stage=function(e){t.DisplayObjectContainer.call(this),this.worldTransform=new t.Matrix,this.interactive=!0,this.interactionManager=new t.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new t.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(e)},t.Stage.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Stage.prototype.constructor=t.Stage,t.Stage.prototype.setInteractionDelegate=function(e){this.interactionManager.setTargetDomElement(e)},t.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0,t=this.children.length;e<t;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},t.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=t.hex2rgb(this.backgroundColor);var n=this.backgroundColor.toString(16);n="000000".substr(0,6-n.length)+n,this.backgroundColorString="#"+n},t.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};var n=0,r=["ms","moz","webkit","o"];for(var i=0;i<r.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[r[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[i]+"CancelAnimationFrame"]||window[r[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-n)),i=window.setTimeout(function(){e(t+r)},r);return n=t+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),window.requestAnimFrame=window.requestAnimationFrame,t.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255]},t.rgb2hex=function(e){return(e[0]*255<<16)+(e[1]*255<<8)+e[2]*255},typeof Function.prototype.bind!="function"&&(Function.prototype.bind=function(){var e=Array.prototype.slice;return function(t){function i(){var s=r.concat(e.call(arguments));n.apply(this instanceof i?this:t,s)}var n=this,r=e.call(arguments,1);if(typeof n!="function")throw new TypeError;return i.prototype=function s(e){e&&(s.prototype=e);if(!(this instanceof s))return new s}(n.prototype),i}}()),t.AjaxRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var t=0;t<e.length;t++)try{return new window.ActiveXObject(e[t])}catch(n){}},t.canUseNewCanvasBlendModes=function(){var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="#000",t.fillRect(0,0,1,1),t.globalCompositeOperation="multiply",t.fillStyle="#fff",t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data[0]===0},t.getNextPowerOfTwo=function(e){if(e>0&&(e&e-1)===0)return e;var t=1;while(t<e)t<<=1;return t},t.EventTarget=function(){var e={};this.addEventListener=this.on=function(t,n){e[t]===undefined&&(e[t]=[]),e[t].indexOf(n)===-1&&e[t].unshift(n)},this.dispatchEvent=this.emit=function(t){if(!e[t.type]||!e[t.type].length)return;for(var n=e[t.type].length-1;n>=0;n--)e[t.type][n](t)},this.removeEventListener=this.off=function(t,n){if(e[t]===undefined)return;var r=e[t].indexOf(n);r!==-1&&e[t].splice(r,1)},this.removeAllEventListeners=function(t){var n=e[t];n&&(n.length=0)}},t.autoDetectRenderer=function(e,n,r,i,s){e||(e=800),n||(n=600);var o=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}();return o?new t.WebGLRenderer(e,n,r,i,s):new t.CanvasRenderer(e,n,r,i)},t.autoDetectRecommendedRenderer=function(e,n,r,i,s){e||(e=800),n||(n=600);var o=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}(),u=/Android/i.test(navigator.userAgent);return o&&!u?new t.WebGLRenderer(e,n,r,i,s):new t.CanvasRenderer(e,n,r,i)},t.PolyK={},t.PolyK.Triangulate=function(e){var n=!0,r=e.length>>1;if(r<3)return[];var i=[],s=[];for(var o=0;o<r;o++)s.push(o);o=0;var u=r;while(u>3){var a=s[(o+0)%u],f=s[(o+1)%u],l=s[(o+2)%u],c=e[2*a],h=e[2*a+1],p=e[2*f],d=e[2*f+1],v=e[2*l],m=e[2*l+1],g=!1;if(t.PolyK._convex(c,h,p,d,v,m,n)){g=!0;for(var y=0;y<u;y++){var b=s[y];if(b===a||b===f||b===l)continue;if(t.PolyK._PointInTriangle(e[2*b],e[2*b+1],c,h,p,d,v,m)){g=!1;break}}}if(g)i.push(a,f,l),s.splice((o+1)%u,1),u--,o=0;else if(o++>3*u){if(!n)return window.console.log("PIXI Warning: shape too complex to fill"),[];i=[],s=[];for(o=0;o<r;o++)s.push(o);o=0,u=r,n=!1}}return i.push(s[0],s[1],s[2]),i},t.PolyK._PointInTriangle=function(e,t,n,r,i,s,o,u){var a=o-n,f=u-r,l=i-n,c=s-r,h=e-n,p=t-r,d=a*a+f*f,v=a*l+f*c,m=a*h+f*p,g=l*l+c*c,y=l*h+c*p,b=1/(d*g-v*v),w=(g*m-v*y)*b,E=(d*y-v*m)*b;return w>=0&&E>=0&&w+E<1},t.PolyK._convex=function(e,t,n,r,i,s,o){return(t-r)*(i-n)+(n-e)*(s-r)>=0===o},t.initDefaultShaders=function(){},t.CompileVertexShader=function(e,n){return t._CompileShader(e,n,e.VERTEX_SHADER)},t.CompileFragmentShader=function(e,n){return t._CompileShader(e,n,e.FRAGMENT_SHADER)},t._CompileShader=function(e,t,n){var r=t.join("\n"),i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(window.console.log(e.getShaderInfoLog(i)),null)},t.compileProgram=function(e,n,r){var i=t.CompileFragmentShader(e,r),s=t.CompileVertexShader(e,n),o=e.createProgram();return e.attachShader(o,s),e.attachShader(o,i),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||window.console.log("Could not initialise shaders"),o},t.PixiShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.attributes=[],this.init()},t.PixiShader.prototype.init=function(){var e=this.gl,n=t.compileProgram(e,this.vertexSrc||t.PixiShader.defaultVertexSrc,this.fragmentSrc);e.useProgram(n),this.uSampler=e.getUniformLocation(n,"uSampler"),this.projectionVector=e.getUniformLocation(n,"projectionVector"),this.offsetVector=e.getUniformLocation(n,"offsetVector"),this.dimensions=e.getUniformLocation(n,"dimensions"),this.aVertexPosition=e.getAttribLocation(n,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(n,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(n,"aColor"),this.colorAttribute===-1&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=e.getUniformLocation(n,r);this.initUniforms(),this.program=n},t.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e=this.gl,t;for(var n in this.uniforms){t=this.uniforms[n];var r=t.type;r==="sampler2D"?(t._init=!1,t.value!==null&&this.initSampler2D(t)):r==="mat2"||r==="mat3"||r==="mat4"?(t.glMatrix=!0,t.glValueLength=1,r==="mat2"?t.glFunc=e.uniformMatrix2fv:r==="mat3"?t.glFunc=e.uniformMatrix3fv:r==="mat4"&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+r],r==="2f"||r==="2i"?t.glValueLength=2:r==="3f"||r==="3i"?t.glValueLength=3:r==="4f"||r==="4i"?t.glValueLength=4:t.glValueLength=1)}},t.PixiShader.prototype.initSampler2D=function(e){if(!e.value||!e.value.baseTexture||!e.value.baseTexture.hasLoaded)return;var t=this.gl;t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]);if(e.textureData){var n=e.textureData,r=n.magFilter?n.magFilter:t.LINEAR,i=n.minFilter?n.minFilter:t.LINEAR,s=n.wrapS?n.wrapS:t.CLAMP_TO_EDGE,o=n.wrapT?n.wrapT:t.CLAMP_TO_EDGE,u=n.luminance?t.LUMINANCE:t.RGBA;n.repeat&&(s=t.REPEAT,o=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!n.flipY);if(n.width){var a=n.width?n.width:512,f=n.height?n.height:2,l=n.border?n.border:0;t.texImage2D(t.TEXTURE_2D,0,u,a,f,l,u,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,u,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,o)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++},t.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,n=this.gl;for(var r in this.uniforms)e=this.uniforms[r],e.glValueLength===1?e.glMatrix===!0?e.glFunc.call(n,e.uniformLocation,e.transpose,e.value):e.glFunc.call(n,e.uniformLocation,e.value):e.glValueLength===2?e.glFunc.call(n,e.uniformLocation,e.value.x,e.value.y):e.glValueLength===3?e.glFunc.call(n,e.uniformLocation,e.value.x,e.value.y,e.value.z):e.glValueLength===4?e.glFunc.call(n,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):e.type==="sampler2D"&&(e._init?(n.activeTexture(n["TEXTURE"+this.textureCount]),n.bindTexture(n.TEXTURE_2D,e.value.baseTexture._glTextures[n.id]||t.createWebGLTexture(e.value.baseTexture,n)),n.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},t.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},t.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],t.PixiFastShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},t.PixiFastShader.prototype.init=function(){var e=this.gl,n=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(n),this.uSampler=e.getUniformLocation(n,"uSampler"),this.projectionVector=e.getUniformLocation(n,"projectionVector"),this.offsetVector=e.getUniformLocation(n,"offsetVector"),this.dimensions=e.getUniformLocation(n,"dimensions"),this.uMatrix=e.getUniformLocation(n,"uMatrix"),this.aVertexPosition=e.getAttribLocation(n,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(n,"aPositionCoord"),this.aScale=e.getAttribLocation(n,"aScale"),this.aRotation=e.getAttribLocation(n,"aRotation"),this.aTextureCoord=e.getAttribLocation(n,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(n,"aColor"),this.colorAttribute===-1&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=n},t.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},t.StripShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},t.StripShader.prototype.init=function(){var e=this.gl,n=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(n),this.uSampler=e.getUniformLocation(n,"uSampler"),this.projectionVector=e.getUniformLocation(n,"projectionVector"),this.offsetVector=e.getUniformLocation(n,"offsetVector"),this.colorAttribute=e.getAttribLocation(n,"aColor"),this.aVertexPosition=e.getAttribLocation(n,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(n,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(n,"translationMatrix"),this.alpha=e.getUniformLocation(n,"alpha"),this.program=n},t.PrimitiveShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},t.PrimitiveShader.prototype.init=function(){var e=this.gl,n=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(n),this.projectionVector=e.getUniformLocation(n,"projectionVector"),this.offsetVector=e.getUniformLocation(n,"offsetVector"),this.tintColor=e.getUniformLocation(n,"tint"),this.aVertexPosition=e.getAttribLocation(n,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(n,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(n,"translationMatrix"),this.alpha=e.getUniformLocation(n,"alpha"),this.program=n},t.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},t.ComplexPrimitiveShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},t.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,n=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(n),this.projectionVector=e.getUniformLocation(n,"projectionVector"),this.offsetVector=e.getUniformLocation(n,"offsetVector"),this.tintColor=e.getUniformLocation(n,"tint"),this.color=e.getUniformLocation(n,"color"),this.aVertexPosition=e.getAttribLocation(n,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(n,"translationMatrix"),this.alpha=e.getUniformLocation(n,"alpha"),this.program=n},t.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},t.WebGLGraphics=function(){},t.WebGLGraphics.renderGraphics=function(e,n){var r=n.gl,i=n.projection,s=n.offset,o=n.shaderManager.primitiveShader,u;e.dirty&&t.WebGLGraphics.updateGraphics(e,r);var a=e._webGL[r.id];for(var f=0;f<a.data.length;f++)a.data[f].mode===1?(u=a.data[f],n.stencilManager.pushStencil(e,u,n),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,(u.indices.length-4)*2),n.stencilManager.popStencil(e,u,n),this.last=u.mode):(u=a.data[f],n.shaderManager.setShader(o),o=n.shaderManager.primitiveShader,r.uniformMatrix3fv(o.translationMatrix,!1,e.worldTransform.toArray(!0)),r.uniform2f(o.projectionVector,i.x,-i.y),r.uniform2f(o.offsetVector,-s.x,-s.y),r.uniform3fv(o.tintColor,t.hex2rgb(e.tint)),r.uniform1f(o.alpha,e.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,u.buffer),r.vertexAttribPointer(o.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(o.colorAttribute,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,u.indexBuffer),r.drawElements(r.TRIANGLE_STRIP,u.indices.length,r.UNSIGNED_SHORT,0))},t.WebGLGraphics.updateGraphics=function(e,n){var r=e._webGL[n.id];r||(r=e._webGL[n.id]={lastIndex:0,data:[],gl:n}),e.dirty=!1;var i;if(e.clearDirty){e.clearDirty=!1;for(i=0;i<r.data.length;i++){var s=r.data[i];s.reset(),t.WebGLGraphics.graphicsDataPool.push(s)}r.data=[],r.lastIndex=0}var o;for(i=r.lastIndex;i<e.graphicsData.length;i++){var u=e.graphicsData[i];u.type===t.Graphics.POLY?(u.fill&&u.points.length>6&&(u.points.length>10?(o=t.WebGLGraphics.switchMode(r,1),t.WebGLGraphics.buildComplexPoly(u,o)):(o=t.WebGLGraphics.switchMode(r,0),t.WebGLGraphics.buildPoly(u,o))),u.lineWidth>0&&(o=t.WebGLGraphics.switchMode(r,0),t.WebGLGraphics.buildLine(u,o))):(o=t.WebGLGraphics.switchMode(r,0),u.type===t.Graphics.RECT?t.WebGLGraphics.buildRectangle(u,o):u.type===t.Graphics.CIRC||u.type===t.Graphics.ELIP?t.WebGLGraphics.buildCircle(u,o):u.type===t.Graphics.RREC&&t.WebGLGraphics.buildRoundedRectangle(u,o)),r.lastIndex++}for(i=0;i<r.data.length;i++)o=r.data[i],o.dirty&&o.upload()},t.WebGLGraphics.switchMode=function(e,n){var r;if(!e.data.length)r=t.WebGLGraphics.graphicsDataPool.pop()||new t.WebGLGraphicsData(e.gl),r.mode=n,e.data.push(r);else{r=e.data[e.data.length-1];if(r.mode!==n||n===1)r=t.WebGLGraphics.graphicsDataPool.pop()||new t.WebGLGraphicsData(e.gl),r.mode=n,e.data.push(r)}return r.dirty=!0,r},t.WebGLGraphics.buildRectangle=function(e,n){var r=e.points,i=r[0],s=r[1],o=r[2],u=r[3];if(e.fill){var a=t.hex2rgb(e.fillColor),f=e.fillAlpha,l=a[0]*f,c=a[1]*f,h=a[2]*f,p=n.points,d=n.indices,v=p.length/6;p.push(i,s),p.push(l,c,h,f),p.push(i+o,s),p.push(l,c,h,f),p.push(i,s+u),p.push(l,c,h,f),p.push(i+o,s+u),p.push(l,c,h,f),d.push(v,v,v+1,v+2,v+3,v+3)}if(e.lineWidth){var m=e.points;e.points=[i,s,i+o,s,i+o,s+u,i,s+u,i,s],t.WebGLGraphics.buildLine(e,n),e.points=m}},t.WebGLGraphics.buildRoundedRectangle=function(e,n){var r=e.points,i=r[0],s=r[1],o=r[2],u=r[3],a=r[4],f=[];f.push(i,s+a),f=f.concat(t.WebGLGraphics.quadraticBezierCurve(i,s+u-a,i,s+u,i+a,s+u)),f=f.concat(t.WebGLGraphics.quadraticBezierCurve(i+o-a,s+u,i+o,s+u,i+o,s+u-a)),f=f.concat(t.WebGLGraphics.quadraticBezierCurve(i+o,s+a,i+o,s,i+o-a,s)),f=f.concat(t.WebGLGraphics.quadraticBezierCurve(i+a,s,i,s,i,s+a));if(e.fill){var l=t.hex2rgb(e.fillColor),c=e.fillAlpha,h=l[0]*c,p=l[1]*c,d=l[2]*c,v=n.points,m=n.indices,g=v.length/6,y=t.PolyK.Triangulate(f),b=0;for(b=0;b<y.length;b+=3)m.push(y[b]+g),m.push(y[b]+g),m.push(y[b+1]+g),m.push(y[b+2]+g),m.push(y[b+2]+g);for(b=0;b<f.length;b++)v.push(f[b],f[++b],h,p,d,c)}if(e.lineWidth){var w=e.points;e.points=f,t.WebGLGraphics.buildLine(e,n),e.points=w}},t.WebGLGraphics.quadraticBezierCurve=function(e,t,n,r,i,s){function d(e,t,n){var r=t-e;return e+r*n}var o,u,a,f,l,c,h=20,p=[],v=0;for(var m=0;m<=h;m++)v=m/h,o=d(e,n,v),u=d(t,r,v),a=d(n,i,v),f=d(r,s,v),l=d(o,a,v),c=d(u,f,v),p.push(l,c);return p},t.WebGLGraphics.buildCircle=function(e,n){var r=e.points,i=r[0],s=r[1],o=r[2],u=r[3],a=40,f=Math.PI*2/a,l=0;if(e.fill){var c=t.hex2rgb(e.fillColor),h=e.fillAlpha,p=c[0]*h,d=c[1]*h,v=c[2]*h,m=n.points,g=n.indices,y=m.length/6;g.push(y);for(l=0;l<a+1;l++)m.push(i,s,p,d,v,h),m.push(i+Math.sin(f*l)*o,s+Math.cos(f*l)*u,p,d,v,h),g.push(y++,y++);g.push(y-1)}if(e.lineWidth){var b=e.points;e.points=[];for(l=0;l<a+1;l++)e.points.push(i+Math.sin(f*l)*o,s+Math.cos(f*l)*u);t.WebGLGraphics.buildLine(e,n),e.points=b}},t.WebGLGraphics.buildLine=function(e,n){var r=0,i=e.points;if(i.length===0)return;if(e.lineWidth%2)for(r=0;r<i.length;r++)i[r]+=.5;var s=new t.Point(i[0],i[1]),o=new t.Point(i[i.length-2],i[i.length-1]);if(s.x===o.x&&s.y===o.y){i=i.slice(),i.pop(),i.pop(),o=new t.Point(i[i.length-2],i[i.length-1]);var u=o.x+(s.x-o.x)*.5,a=o.y+(s.y-o.y)*.5;i.unshift(u,a),i.push(u,a)}var f=n.points,l=n.indices,c=i.length/2,h=i.length,p=f.length/6,d=e.lineWidth/2,v=t.hex2rgb(e.lineColor),m=e.lineAlpha,g=v[0]*m,y=v[1]*m,b=v[2]*m,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U;S=i[0],x=i[1],T=i[2],N=i[3],L=-(x-N),A=S-T,U=Math.sqrt(L*L+A*A),L/=U,A/=U,L*=d,A*=d,f.push(S-L,x-A,g,y,b,m),f.push(S+L,x+A,g,y,b,m);for(r=1;r<c-1;r++){S=i[(r-1)*2],x=i[(r-1)*2+1],T=i[r*2],N=i[r*2+1],C=i[(r+1)*2],k=i[(r+1)*2+1],L=-(x-N),A=S-T,U=Math.sqrt(L*L+A*A),L/=U,A/=U,L*=d,A*=d,O=-(N-k),M=T-C,U=Math.sqrt(O*O+M*M),O/=U,M/=U,O*=d,M*=d,P=-A+x-(-A+N),H=-L+T-(-L+S),B=(-L+S)*(-A+N)-(-L+T)*(-A+x),j=-M+k-(-M+N),F=-O+T-(-O+C),I=(-O+C)*(-M+N)-(-O+T)*(-M+k),q=P*F-j*H;if(Math.abs(q)<.1){q+=10.1,f.push(T-L,N-A,g,y,b,m),f.push(T+L,N+A,g,y,b,m);continue}w=(H*I-F*B)/q,E=(j*B-P*I)/q,R=(w-T)*(w-T)+(E-N)+(E-N),R>19600?(_=L-O,D=A-M,U=Math.sqrt(_*_+D*D),_/=U,D/=U,_*=d,D*=d,f.push(T-_,N-D),f.push(g,y,b,m),f.push(T+_,N+D),f.push(g,y,b,m),f.push(T-_,N-D),f.push(g,y,b,m),h++):(f.push(w,E),f.push(g,y,b,m),f.push(T-(w-T),N-(E-N)),f.push(g,y,b,m))}S=i[(c-2)*2],x=i[(c-2)*2+1],T=i[(c-1)*2],N=i[(c-1)*2+1],L=-(x-N),A=S-T,U=Math.sqrt(L*L+A*A),L/=U,A/=U,L*=d,A*=d,f.push(T-L,N-A),f.push(g,y,b,m),f.push(T+L,N+A),f.push(g,y,b,m),l.push(p);for(r=0;r<h;r++)l.push(p++);l.push(p-1)},t.WebGLGraphics.buildComplexPoly=function(e,n){var r=e.points.slice();if(r.length<6)return;var i=n.indices;n.points=r,n.alpha=e.fillAlpha,n.color=t.hex2rgb(e.fillColor);var s=Infinity,o=-Infinity,u=Infinity,a=-Infinity,f,l;for(var c=0;c<r.length;c+=2)f=r[c],l=r[c+1],s=f<s?f:s,o=f>o?f:o,u=l<u?l:u,a=l>a?l:a;r.push(s,u,o,u,o,a,s,a);var h=r.length/2;for(c=0;c<h;c++)i.push(c)},t.WebGLGraphics.buildPoly=function(e,n){var r=e.points;if(r.length<6)return;var i=n.points,s=n.indices,o=r.length/2,u=t.hex2rgb(e.fillColor),a=e.fillAlpha,f=u[0]*a,l=u[1]*a,c=u[2]*a,h=t.PolyK.Triangulate(r),p=i.length/6,d=0;for(d=0;d<h.length;d+=3)s.push(h[d]+p),s.push(h[d]+p),s.push(h[d+1]+p),s.push(h[d+2]+p),s.push(h[d+2]+p);for(d=0;d<o;d++)i.push(r[d*2],r[d*2+1],f,l,c,a)},t.WebGLGraphics.graphicsDataPool=[],t.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.lastIndex=0,this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},t.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[],this.lastIndex=0},t.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},t.glContexts=[],t.WebGLRenderer=function(e,n,r,i,s,o){t.defaultRenderer||(t.sayHello("webGL"),t.defaultRenderer=this),this.type=t.WEBGL_RENDERER,this.transparent=!!i,this.preserveDrawingBuffer=o,this.width=e||800,this.height=n||600,this.view=r||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.contextLost=this.handleContextLost.bind(this),this.contextRestoredLost=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLost,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1),this.options={alpha:this.transparent,antialias:!!s,premultipliedAlpha:!!i,stencil:!0,preserveDrawingBuffer:o};var u=null;["experimental-webgl","webgl"].forEach(function(e){try{u=u||this.view.getContext(e,this.options)}catch(t){}},this);if(!u)throw new Error("This browser does not support webGL. Try using the canvas renderer"+this);this.gl=u,this.glContextId=u.id=t.WebGLRenderer.glContextId++,t.glContexts[this.glContextId]=u,t.blendModesWebGL||(t.blendModesWebGL=[],t.blendModesWebGL[t.blendModes.NORMAL]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.ADD]=[u.SRC_ALPHA,u.DST_ALPHA],t.blendModesWebGL[t.blendModes.MULTIPLY]=[u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.SCREEN]=[u.SRC_ALPHA,u.ONE],t.blendModesWebGL[t.blendModes.OVERLAY]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.DARKEN]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.LIGHTEN]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.COLOR_DODGE]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.COLOR_BURN]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.HARD_LIGHT]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.SOFT_LIGHT]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.DIFFERENCE]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.EXCLUSION]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.HUE]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.SATURATION]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.COLOR]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.LUMINOSITY]=[u.ONE,u.ONE_MINUS_SRC_ALPHA]),this.projection=new t.Point,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.offset=new t.Point(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.shaderManager=new t.WebGLShaderManager(u),this.spriteBatch=new t.WebGLSpriteBatch(u),this.maskManager=new t.WebGLMaskManager(u),this.filterManager=new t.WebGLFilterManager(u,this.transparent),this.stencilManager=new t.WebGLStencilManager(u),this.blendModeManager=new t.WebGLBlendModeManager(u),this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,u.useProgram(this.shaderManager.defaultShader.program),u.disable(u.DEPTH_TEST),u.disable(u.CULL_FACE),u.enable(u.BLEND),u.colorMask(!0,!0,!0,this.transparent)},t.WebGLRenderer.prototype.constructor=t.WebGLRenderer,t.WebGLRenderer.prototype.render=function(e){if(this.contextLost)return;this.__stage!==e&&(e.interactive&&e.interactionManager.removeEvents(),this.__stage=e),t.WebGLRenderer.updateTextures(),e.updateTransform(),e._interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)));var n=this.gl;n.viewport(0,0,this.width,this.height),n.bindFramebuffer(n.FRAMEBUFFER,null),this.transparent?n.clearColor(0,0,0,0):n.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],1),n.clear(n.COLOR_BUFFER_BIT),this.renderDisplayObject(e,this.projection),e.interactive?e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)):e._interactiveEventsAdded&&(e._interactiveEventsAdded=!1,e.interactionManager.setTarget(this))},t.WebGLRenderer.prototype.renderDisplayObject=function(e,n,r){this.renderSession.blendModeManager.setBlendMode(t.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.currentBlendMode=9999,this.renderSession.projection=n,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),e._renderWebGL(this.renderSession),this.spriteBatch.end()},t.WebGLRenderer.updateTextures=function(){var e=0;for(e=0;e<t.Texture.frameUpdates.length;e++)t.WebGLRenderer.updateTextureFrame(t.Texture.frameUpdates[e]);for(e=0;e<t.texturesToDestroy.length;e++)t.WebGLRenderer.destroyTexture(t.texturesToDestroy[e]);t.texturesToUpdate.length=0,t.texturesToDestroy.length=0,t.Texture.frameUpdates.length=0},t.WebGLRenderer.destroyTexture=function(e){for(var n=e._glTextures.length-1;n>=0;n--){var r=e._glTextures[n],i=t.glContexts[n];i&&r&&i.deleteTexture(r)}e._glTextures.length=0},t.WebGLRenderer.updateTextureFrame=function(e){e._updateWebGLuvs()},t.WebGLRenderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},t.createWebGLTexture=function(e,n){return e.hasLoaded&&(e._glTextures[n.id]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e.source),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e.scaleMode===t.scaleModes.LINEAR?n.LINEAR:n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e.scaleMode===t.scaleModes.LINEAR?n.LINEAR:n.NEAREST),e._powerOf2?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),n.bindTexture(n.TEXTURE_2D,null),e._dirty[n.id]=!1),e._glTextures[n.id]},t.updateWebGLTexture=function(e,n){e._glTextures[n.id]&&(n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e.source),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e.scaleMode===t.scaleModes.LINEAR?n.LINEAR:n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e.scaleMode===t.scaleModes.LINEAR?n.LINEAR:n.NEAREST),e._powerOf2?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),e._dirty[n.id]=!1)},t.WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},t.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(e){try{this.gl=this.view.getContext("webgl",this.options)}catch(n){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var r=this.gl;r.id=t.WebGLRenderer.glContextId++,this.shaderManager.setContext(r),this.spriteBatch.setContext(r),this.primitiveBatch.setContext(r),this.maskManager.setContext(r),this.filterManager.setContext(r),this.renderSession.gl=this.gl,r.disable(r.DEPTH_TEST),r.disable(r.CULL_FACE),r.enable(r.BLEND),r.colorMask(!0,!0,!0,this.transparent),this.gl.viewport(0,0,this.width,this.height);for(var i in t.TextureCache){var s=t.TextureCache[i].baseTexture;s._glTextures=[]}this.contextLost=!1},t.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost),this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost),t.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.primitiveBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},t.WebGLRenderer.glContextId=0,t.WebGLBlendModeManager=function(e){this.gl=e,this.currentBlendMode=99999},t.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var n=t.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(n[0],n[1]),!0},t.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},t.WebGLMaskManager=function(e){this.maskStack=[],this.maskPosition=0,this.setContext(e),this.reverse=!1,this.count=0},t.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},t.WebGLMaskManager.prototype.pushMask=function(e,n){var r=n.gl;e.dirty&&t.WebGLGraphics.updateGraphics(e,r);if(!e._webGL[r.id].data.length)return;n.stencilManager.pushStencil(e,e._webGL[r.id].data[0],n)},t.WebGLMaskManager.prototype.popMask=function(e,t){var n=this.gl;t.stencilManager.popStencil(e,e._webGL[n.id].data[0],t)},t.WebGLMaskManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},t.WebGLStencilManager=function(e){this.stencilStack=[],this.setContext(e),this.reverse=!0,this.count=0},t.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},t.WebGLStencilManager.prototype.pushStencil=function(e,t,n){var r=this.gl;this.bindGraphics(e,t,n),this.stencilStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);var i=this.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),t.mode===1?(r.drawElements(r.TRIANGLE_FAN,t.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,(t.indices.length-4)*2),this.reverse?r.stencilFunc(r.EQUAL,255-(i+1),255):r.stencilFunc(r.EQUAL,i+1,255),this.reverse=!this.reverse):(this.reverse?(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,t.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i+1,255):r.stencilFunc(r.EQUAL,255-(i+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.count++},t.WebGLStencilManager.prototype.bindGraphics=function(e,n,r){this._currentGraphics=e;var i=this.gl,s=r.projection,o=r.offset,u;n.mode===1?(u=r.shaderManager.complexPrimativeShader,r.shaderManager.setShader(u),i.uniformMatrix3fv(u.translationMatrix,!1,e.worldTransform.toArray(!0)),i.uniform2f(u.projectionVector,s.x,-s.y),i.uniform2f(u.offsetVector,-o.x,-o.y),i.uniform3fv(u.tintColor,t.hex2rgb(e.tint)),i.uniform3fv(u.color,n.color),i.uniform1f(u.alpha,e.worldAlpha*n.alpha),i.bindBuffer(i.ARRAY_BUFFER,n.buffer),i.vertexAttribPointer(u.aVertexPosition,2,i.FLOAT,!1,8,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.indexBuffer)):(u=r.shaderManager.primitiveShader,r.shaderManager.setShader(u),i.uniformMatrix3fv(u.translationMatrix,!1,e.worldTransform.toArray(!0)),i.uniform2f(u.projectionVector,s.x,-s.y),i.uniform2f(u.offsetVector,-o.x,-o.y),i.uniform3fv(u.tintColor,t.hex2rgb(e.tint)),i.uniform1f(u.alpha,e.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,n.buffer),i.vertexAttribPointer(u.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(u.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.indexBuffer))},t.WebGLStencilManager.prototype.popStencil=function(e,t,n){var r=this.gl;this.stencilStack.pop(),this.count--;if(this.stencilStack.length===0)r.disable(r.STENCIL_TEST);else{var i=this.count;this.bindGraphics(e,t,n),r.colorMask(!1,!1,!1,!1),t.mode===1?(this.reverse=!this.reverse,this.reverse?(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,(t.indices.length-4)*2),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,t.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)):(this.reverse?(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,t.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},t.WebGLStencilManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},t.WebGLShaderManager=function(e){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.shaderMap=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.setContext(e)},t.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new t.PrimitiveShader(e),this.complexPrimativeShader=new t.ComplexPrimitiveShader(e),this.defaultShader=new t.PixiShader(e),this.fastShader=new t.PixiFastShader(e),this.stripShader=new t.StripShader(e),this.setShader(this.defaultShader)},t.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var n=e[t];this.tempAttribState[n]=!0}var r=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?r.enableVertexAttribArray(t):r.disableVertexAttribArray(t))},t.WebGLShaderManager.prototype.setShader=function(e){return this._currentId===e._UID?!1:(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},t.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},t.WebGLSpriteBatch=function(e){this.vertSize=6,this.size=2e3;var t=this.size*4*this.vertSize,n=this.size*6;this.vertices=new Float32Array(t),this.indices=new Uint16Array(n),this.lastIndexCount=0;for(var r=0,i=0;r<n;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.setContext(e),this.dirty=!0,this.textures=[],this.blendModes=[]},t.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999},t.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},t.WebGLSpriteBatch.prototype.end=function(){this.flush()},t.WebGLSpriteBatch.prototype.render=function(e){var t=e.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture);var n=t._uvs;if(!n)return;var r=e.worldAlpha,i=e.tint,s=this.vertices,o=e.anchor.x,u=e.anchor.y,a,f,l,c;if(t.trim){var h=t.trim;f=h.x-o*h.width,a=f+t.crop.width,c=h.y-u*h.height,l=c+t.crop.height}else a=t.frame.width*(1-o),f=t.frame.width*-o,l=t.frame.height*(1-u),c=t.frame.height*-u;var p=this.currentBatchSize*4*this.vertSize,d=e.worldTransform,v=d.a,m=d.c,g=d.b,y=d.d,b=d.tx,w=d.ty;s[p++]=v*f+g*c+b,s[p++]=y*c+m*f+w,s[p++]=n.x0,s[p++]=n.y0,s[p++]=r,s[p++]=i,s[p++]=v*a+g*c+b,s[p++]=y*c+m*a+w,s[p++]=n.x1,s[p++]=n.y1,s[p++]=r,s[p++]=i,s[p++]=v*a+g*l+b,s[p++]=y*l+m*a+w,s[p++]=n.x2,s[p++]=n.y2,s[p++]=r,s[p++]=i,s[p++]=v*f+g*l+b,s[p++]=y*l+m*f+w,s[p++]=n.x3,s[p++]=n.y3,s[p++]=r,s[p++]=i,this.textures[this.currentBatchSize]=e.texture.baseTexture,this.blendModes[this.currentBatchSize]=e.blendMode,this.currentBatchSize++},t.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var n=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=n.baseTexture),e._uvs||(e._uvs=new t.TextureUvs);var r=e._uvs;e.tilePosition.x%=n.baseTexture.width*e.tileScaleOffset.x,e.tilePosition.y%=n.baseTexture.height*e.tileScaleOffset.y;var i=e.tilePosition.x/(n.baseTexture.width*e.tileScaleOffset.x),s=e.tilePosition.y/(n.baseTexture.height*e.tileScaleOffset.y),o=e.width/n.baseTexture.width/(e.tileScale.x*e.tileScaleOffset.x),u=e.height/n.baseTexture.height/(e.tileScale.y*e.tileScaleOffset.y);r.x0=0-i,r.y0=0-s,r.x1=1*o-i,r.y1=0-s,r.x2=1*o-i,r.y2=1*u-s,r.x3=0-i,r.y3=1*u-s;var a=e.worldAlpha,f=e.tint,l=this.vertices,c=e.width,h=e.height,p=e.anchor.x,d=e.anchor.y,v=c*(1-p),m=c*-p,g=h*(1-d),y=h*-d,b=this.currentBatchSize*4*this.vertSize,w=e.worldTransform,E=w.a,S=w.c,x=w.b,T=w.d,N=w.tx,C=w.ty;l[b++]=E*m+x*y+N,l[b++]=T*y+S*m+C,l[b++]=r.x0,l[b++]=r.y0,l[b++]=a,l[b++]=f,l[b++]=E*v+x*y+N,l[b++]=T*y+S*v+C,l[b++]=r.x1,l[b++]=r.y1,l[b++]=a,l[b++]=f,l[b++]=E*v+x*g+N,l[b++]=T*g+S*v+C,l[b++]=r.x2,l[b++]=r.y2,l[b++]=a,l[b++]=f,l[b++]=E*m+x*g+N,l[b++]=T*g+S*m+C,l[b++]=r.x3,l[b++]=r.y3,l[b++]=a,l[b++]=f,this.textures[this.currentBatchSize]=n.baseTexture,this.blendModes[this.currentBatchSize]=e.blendMode,this.currentBatchSize++},t.WebGLSpriteBatch.prototype.flush=function(){if(this.currentBatchSize===0)return;var e=this.gl;this.renderSession.shaderManager.setShader(this.renderSession.shaderManager.defaultShader);if(this.dirty){this.dirty=!1,e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y);var n=this.vertSize*4;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,n,0),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,n,8),e.vertexAttribPointer(this.shader.colorAttribute,2,e.FLOAT,!1,n,16)}if(this.currentBatchSize>this.size*.5)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var r=this.vertices.subarray(0,this.currentBatchSize*4*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,r)}var i,s,o=0,u=0,a=null,f=this.renderSession.blendModeManager.currentBlendMode;for(var l=0,c=this.currentBatchSize;l<c;l++){i=this.textures[l],s=this.blendModes[l];if(a!==i||f!==s)this.renderBatch(a,o,u),u=l,o=0,a=i,f=s,this.renderSession.blendModeManager.setBlendMode(f);o++}this.renderBatch(a,o,u),this.currentBatchSize=0},t.WebGLSpriteBatch.prototype.renderBatch=function(e,n,r){if(n===0)return;var i=this.gl;i.bindTexture(i.TEXTURE_2D,e._glTextures[i.id]||t.createWebGLTexture(e,i)),e._dirty[i.id]&&t.updateWebGLTexture(this.currentBaseTexture,i),i.drawElements(i.TRIANGLES,n*6,i.UNSIGNED_SHORT,r*6*2),this.renderSession.drawCount++},t.WebGLSpriteBatch.prototype.stop=function(){this.flush()},t.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},t.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},t.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=this.size*4*this.vertSize,n=this.maxSize*6;this.vertices=new Float32Array(t),this.indices=new Uint16Array(n),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var r=0,i=0;r<n;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},t.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},t.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},t.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},t.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,n=t[0];if(!n.texture._uvs)return;this.currentBaseTexture=n.texture.baseTexture,n.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(n.blendMode));for(var r=0,i=t.length;r<i;r++)this.renderSprite(t[r]);this.flush()},t.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(!e.visible)return;if(e.texture.baseTexture!==this.currentBaseTexture){this.flush(),this.currentBaseTexture=e.texture.baseTexture;if(!e.texture._uvs)return}var t,n=this.vertices,r,i,s,o,u,a,f;t=e.texture._uvs,r=e.texture.frame.width,i=e.texture.frame.height;if(e.texture.trim){var l=e.texture.trim;o=l.x-e.anchor.x*l.width,s=o+e.texture.crop.width,a=l.y-e.anchor.y*l.height,u=a+e.texture.crop.height}else s=e.texture.frame.width*(1-e.anchor.x),o=e.texture.frame.width*-e.anchor.x,u=e.texture.frame.height*(1-e.anchor.y),a=e.texture.frame.height*-e.anchor.y;f=this.currentBatchSize*4*this.vertSize,n[f++]=o,n[f++]=a,n[f++]=e.position.x,n[f++]=e.position.y,n[f++]=e.scale.x,n[f++]=e.scale.y,n[f++]=e.rotation,n[f++]=t.x0,n[f++]=t.y1,n[f++]=e.alpha,n[f++]=s,n[f++]=a,n[f++]=e.position.x,n[f++]=e.position.y,n[f++]=e.scale.x,n[f++]=e.scale.y,n[f++]=e.rotation,n[f++]=t.x1,n[f++]=t.y1,n[f++]=e.alpha,n[f++]=s,n[f++]=u,n[f++]=e.position.x,n[f++]=e.position.y,n[f++]=e.scale.x,n[f++]=e.scale.y,n[f++]=e.rotation,n[f++]=t.x2,n[f++]=t.y2,n[f++]=e.alpha,n[f++]=o,n[f++]=u,n[f++]=e.position.x,n[f++]=e.position.y,n[f++]=e.scale.x,n[f++]=e.scale.y,n[f++]=e.rotation,n[f++]=t.x3,n[f++]=t.y3,n[f++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()},t.WebGLFastSpriteBatch.prototype.flush=function(){if(this.currentBatchSize===0)return;var e=this.gl;this.currentBaseTexture._glTextures[e.id]||t.createWebGLTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]);if(this.currentBatchSize>this.size*.5)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var n=this.vertices.subarray(0,this.currentBatchSize*4*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,n)}e.drawElements(e.TRIANGLES,this.currentBatchSize*6,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++},t.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},t.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var n=this.vertSize*4;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,n,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,n,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,n,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,n,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,n,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,n,36)},t.WebGLFilterManager=function(e,t){this.transparent=t,this.filterStack=[],this.offsetX=0,this.offsetY=0,this.setContext(e)},t.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},t.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var n=this.renderSession.projection;this.width=n.x*2,this.height=-n.y*2,this.buffer=t},t.WebGLFilterManager.prototype.pushFilter=function(e){var n=this.gl,r=this.renderSession.projection,i=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),this.filterStack.push(e);var s=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var o=this.texturePool.pop();o?o.resize(this.width,this.height):o=new t.FilterTexture(this.gl,this.width,this.height),n.bindTexture(n.TEXTURE_2D,o.texture);var u=e._filterArea,a=s.padding;u.x-=a,u.y-=a,u.width+=a*2,u.height+=a*2,u.x<0&&(u.x=0),u.width>this.width&&(u.width=this.width),u.y<0&&(u.y=0),u.height>this.height&&(u.height=this.height),n.bindFramebuffer(n.FRAMEBUFFER,o.frameBuffer),n.viewport(0,0,u.width,u.height),r.x=u.width/2,r.y=-u.height/2,i.x=-u.x,i.y=-u.y,this.renderSession.shaderManager.setShader(this.defaultShader),n.uniform2f(this.defaultShader.projectionVector,u.width/2,-u.height/2),n.uniform2f(this.defaultShader.offsetVector,-u.x,-u.y),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),e._glFilterTexture=o},t.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,n=this.filterStack.pop(),r=n._filterArea,i=n._glFilterTexture,s=this.renderSession.projection,o=this.renderSession.offset;if(n.filterPasses.length>1){e.viewport(0,0,r.width,r.height),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var u=i,a=this.texturePool.pop();a||(a=new t.FilterTexture(this.gl,this.width,this.height)),a.resize(this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,a.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var f=0;f<n.filterPasses.length-1;f++){var l=n.filterPasses[f];e.bindFramebuffer(e.FRAMEBUFFER,a.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u.texture),this.applyFilterPass(l,r,r.width,r.height);var c=u;u=a,a=c}e.enable(e.BLEND),i=u,this.texturePool.push(a)}var h=n.filterPasses[n.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var p=this.width,d=this.height,v=0,m=0,g=this.buffer;if(this.filterStack.length===0)e.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];r=y._filterArea,p=r.width,d=r.height,v=r.x,m=r.y,g=y._glFilterTexture.frameBuffer}s.x=p/2,s.y=-d/2,o.x=v,o.y=m,r=n._filterArea;var b=r.x-v,w=r.y-m;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=b,this.vertexArray[1]=w+r.height,this.vertexArray[2]=b+r.width,this.vertexArray[3]=w+r.height,this.vertexArray[4]=b,this.vertexArray[5]=w,this.vertexArray[6]=b+r.width,this.vertexArray[7]=w,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,p,d),e.bindFramebuffer(e.FRAMEBUFFER,g),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i.texture),this.applyFilterPass(h,r,p,d),this.renderSession.shaderManager.setShader(this.defaultShader),e.uniform2f(this.defaultShader.projectionVector,p/2,-d/2),e.uniform2f(this.defaultShader.offsetVector,-v,-m),this.texturePool.push(i),n._glFilterTexture=null},t.WebGLFilterManager.prototype.applyFilterPass=function(e,n,r,i){var s=this.gl,o=e.shaders[s.id];o||(o=new t.PixiShader(s),o.fragmentSrc=e.fragmentSrc,o.uniforms=e.uniforms,o.init(),e.shaders[s.id]=o),this.renderSession.shaderManager.setShader(o),s.uniform2f(o.projectionVector,r/2,-i/2),s.uniform2f(o.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer),s.vertexAttribPointer(o.aVertexPosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.uvBuffer),s.vertexAttribPointer(o.aTextureCoord,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.colorBuffer),s.vertexAttribPointer(o.colorAttribute,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indexBuffer),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0),this.renderSession.drawCount++},t.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},t.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},t.FilterTexture=function(e,n,r,i){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),i=i||t.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i===t.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i===t.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(n,r)},t.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},t.FilterTexture.prototype.resize=function(e,t){if(this.width===e&&this.height===t)return;this.width=e,this.height=t;var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,this.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t)},t.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},t.CanvasMaskManager=function(){},t.CanvasMaskManager.prototype.pushMask=function(e,n){n.save();var r=e.alpha,i=e.worldTransform;n.setTransform(i.a,i.c,i.b,i.d,i.tx,i.ty),t.CanvasGraphics.renderGraphicsMask(e,n),n.clip(),e.worldAlpha=r},t.CanvasMaskManager.prototype.popMask=function(e){e.restore()},t.CanvasTinter=function(){},t.CanvasTinter.getTintedTexture=function(e,n){var r=e.texture;n=t.CanvasTinter.roundColor(n);var i="#"+("00000"+(n|0).toString(16)).substr(-6);r.tintCache=r.tintCache||{};if(r.tintCache[i])return r.tintCache[i];var s=t.CanvasTinter.canvas||document.createElement("canvas");t.CanvasTinter.tintMethod(r,n,s);if(t.CanvasTinter.convertTintToImage){var o=new Image;o.src=s.toDataURL(),r.tintCache[i]=o}else r.tintCache[i]=s,t.CanvasTinter.canvas=null;return s},t.CanvasTinter.tintWithMultiply=function(e,t,n){var r=n.getContext("2d"),i=e.frame;n.width=i.width,n.height=i.height,r.fillStyle="#"+("00000"+(t|0).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},t.CanvasTinter.tintWithOverlay=function(e,t,n){var r=n.getContext("2d"),i=e.frame;n.width=i.width,n.height=i.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(t|0).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},t.CanvasTinter.tintWithPerPixel=function(e,n,r){var i=r.getContext("2d"),s=e.frame;r.width=s.width,r.height=s.height,i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);var o=t.hex2rgb(n),u=o[0],a=o[1],f=o[2],l=i.getImageData(0,0,s.width,s.height),c=l.data;for(var h=0;h<c.length;h+=4)c[h+0]*=u,c[h+1]*=a,c[h+2]*=f;i.putImageData(l,0,0)},t.CanvasTinter.roundColor=function(e){var n=t.CanvasTinter.cacheStepsPerColorChannel,r=t.hex2rgb(e);return r[0]=Math.min(255,r[0]/n*n),r[1]=Math.min(255,r[1]/n*n),r[2]=Math.min(255,r[2]/n*n),t.rgb2hex(r)},t.CanvasTinter.cacheStepsPerColorChannel=8,t.CanvasTinter.convertTintToImage=!1,t.CanvasTinter.canUseMultiply=t.canUseNewCanvasBlendModes(),t.CanvasTinter.tintMethod=t.CanvasTinter.canUseMultiply?t.CanvasTinter.tintWithMultiply:t.CanvasTinter.tintWithPerPixel,t.CanvasRenderer=function(e,n,r,i){t.defaultRenderer||(t.sayHello("Canvas"),t.defaultRenderer=this),this.type=t.CANVAS_RENDERER,this.clearBeforeRender=!0,this.transparent=!!i,t.blendModesCanvas||(t.blendModesCanvas=[],t.canUseNewCanvasBlendModes()?(t.blendModesCanvas[t.blendModes.NORMAL]="source-over",t.blendModesCanvas[t.blendModes.ADD]="lighter",t.blendModesCanvas[t.blendModes.MULTIPLY]="multiply",t.blendModesCanvas[t.blendModes.SCREEN]="screen",t.blendModesCanvas[t.blendModes.OVERLAY]="overlay",t.blendModesCanvas[t.blendModes.DARKEN]="darken",t.blendModesCanvas[t.blendModes.LIGHTEN]="lighten",t.blendModesCanvas[t.blendModes.COLOR_DODGE]="color-dodge",t.blendModesCanvas[t.blendModes.COLOR_BURN]="color-burn",t.blendModesCanvas[t.blendModes.HARD_LIGHT]="hard-light",t.blendModesCanvas[t.blendModes.SOFT_LIGHT]="soft-light",t.blendModesCanvas[t.blendModes.DIFFERENCE]="difference",t.blendModesCanvas[t.blendModes.EXCLUSION]="exclusion",t.blendModesCanvas[t.blendModes.HUE]="hue",t.blendModesCanvas[t.blendModes.SATURATION]="saturation",t.blendModesCanvas[t.blendModes.COLOR]="color",t.blendModesCanvas[t.blendModes.LUMINOSITY]="luminosity"):(t.blendModesCanvas[t.blendModes.NORMAL]="source-over",t.blendModesCanvas[t.blendModes.ADD]="lighter",t.blendModesCanvas[t.blendModes.MULTIPLY]="source-over",t.blendModesCanvas[t.blendModes.SCREEN]="source-over",t.blendModesCanvas[t.blendModes.OVERLAY]="source-over",t.blendModesCanvas[t.blendModes.DARKEN]="source-over",t.blendModesCanvas[t.blendModes.LIGHTEN]="source-over",t.blendModesCanvas[t.blendModes.COLOR_DODGE]="source-over",t.blendModesCanvas[t.blendModes.COLOR_BURN]="source-over",t.blendModesCanvas[t.blendModes.HARD_LIGHT]="source-over",t.blendModesCanvas[t.blendModes.SOFT_LIGHT]="source-over",t.blendModesCanvas[t.blendModes.DIFFERENCE]="source-over",t.blendModesCanvas[t.blendModes.EXCLUSION]="source-over",t.blendModesCanvas[t.blendModes.HUE]="source-over",t.blendModesCanvas[t.blendModes.SATURATION]="source-over",t.blendModesCanvas[t.blendModes.COLOR]="source-over",t.blendModesCanvas[t.blendModes.LUMINOSITY]="source-over")),this.width=e||800,this.height=n||600,this.view=r||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0,this.maskManager=new t.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")},t.CanvasRenderer.prototype.constructor=t.CanvasRenderer,t.CanvasRenderer.prototype.render=function(e){t.texturesToUpdate.length=0,t.texturesToDestroy.length=0,e.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=e.backgroundColorString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this))),t.Texture.frameUpdates.length>0&&(t.Texture.frameUpdates.length=0)},t.CanvasRenderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t},t.CanvasRenderer.prototype.renderDisplayObject=function(e,t){this.renderSession.context=t||this.context,e._renderCanvas(this.renderSession)},t.CanvasRenderer.prototype.renderStripFlat=function(e){var t=this.context,n=e.verticies,r=n.length/2;this.count++,t.beginPath();for(var i=1;i<r-2;i++){var s=i*2,o=n[s],u=n[s+2],a=n[s+4],f=n[s+1],l=n[s+3],c=n[s+5];t.moveTo(o,f),t.lineTo(u,l),t.lineTo(a,c)}t.fillStyle="#FF0000",t.fill(),t.closePath()},t.CanvasRenderer.prototype.renderStrip=function(e){var t=this.context,n=e.verticies,r=e.uvs,i=n.length/2;this.count++;for(var s=1;s<i-2;s++){var o=s*2,u=n[o],a=n[o+2],f=n[o+4],l=n[o+1],c=n[o+3],h=n[o+5],p=r[o]*e.texture.width,d=r[o+2]*e.texture.width,v=r[o+4]*e.texture.width,m=r[o+1]*e.texture.height,g=r[o+3]*e.texture.height,y=r[o+5]*e.texture.height;t.save(),t.beginPath(),t.moveTo(u,l),t.lineTo(a,c),t.lineTo(f,h),t.closePath(),t.clip();var b=p*g+m*v+d*y-g*v-m*d-p*y,w=u*g+m*f+a*y-g*f-m*a-u*y,E=p*a+u*v+d*f-a*v-u*d-p*f,S=p*g*f+m*a*v+u*d*y-u*g*v-m*d*f-p*a*y,x=l*g+m*h+c*y-g*h-m*c-l*y,T=p*c+l*v+d*h-c*v-l*d-p*h,N=p*g*h+m*c*v+l*d*y-l*g*v-m*d*h-p*c*y;t.transform(w/b,x/b,E/b,T/b,S/b,N/b),t.drawImage(e.texture.baseTexture.source,0,0),t.restore()}},t.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},t.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},t.CanvasGraphics=function(){},t.CanvasGraphics.renderGraphics=function(e,n){var r=e.worldAlpha,i="";for(var s=0;s<e.graphicsData.length;s++){var o=e.graphicsData[s],u=o.points;n.strokeStyle=i="#"+("00000"+(o.lineColor|0).toString(16)).substr(-6),n.lineWidth=o.lineWidth;if(o.type===t.Graphics.POLY){n.beginPath(),n.moveTo(u[0],u[1]);for(var a=1;a<u.length/2;a++)n.lineTo(u[a*2],u[a*2+1]);u[0]===u[u.length-2]&&u[1]===u[u.length-1]&&n.closePath(),o.fill&&(n.globalAlpha=o.fillAlpha*r,n.fillStyle=i="#"+("00000"+(o.fillColor|0).toString(16)).substr(-6),n.fill()),o.lineWidth&&(n.globalAlpha=o.lineAlpha*r,n.stroke())}else if(o.type===t.Graphics.RECT){if(o.fillColor||o.fillColor===0)n.globalAlpha=o.fillAlpha*r,n.fillStyle=i="#"+("00000"+(o.fillColor|0).toString(16)).substr(-6),n.fillRect(u[0],u[1],u[2],u[3]);o.lineWidth&&(n.globalAlpha=o.lineAlpha*r,n.strokeRect(u[0],u[1],u[2],u[3]))}else if(o.type===t.Graphics.CIRC)n.beginPath(),n.arc(u[0],u[1],u[2],0,2*Math.PI),n.closePath(),o.fill&&(n.globalAlpha=o.fillAlpha*r,n.fillStyle=i="#"+("00000"+(o.fillColor|0).toString(16)).substr(-6),n.fill()),o.lineWidth&&(n.globalAlpha=o.lineAlpha*r,n.stroke());else if(o.type===t.Graphics.ELIP){var f=o.points,l=f[2]*2,c=f[3]*2,h=f[0]-l/2,p=f[1]-c/2;n.beginPath();var d=.5522848,v=l/2*d,m=c/2*d,g=h+l,y=p+c,b=h+l/2,w=p+c/2;n.moveTo(h,w),n.bezierCurveTo(h,w-m,b-v,p,b,p),n.bezierCurveTo(b+v,p,g,w-m,g,w),n.bezierCurveTo(g,w+m,b+v,y,b,y),n.bezierCurveTo(b-v,y,h,w+m,h,w),n.closePath(),o.fill&&(n.globalAlpha=o.fillAlpha*r,n.fillStyle=i="#"+("00000"+(o.fillColor|0).toString(16)).substr(-6),n.fill()),o.lineWidth&&(n.globalAlpha=o.lineAlpha*r,n.stroke())}else if(o.type===t.Graphics.RREC){var E=u[0],S=u[1],x=u[2],T=u[3],N=u[4],C=Math.min(x,T)/2|0;N=N>C?C:N,n.beginPath(),n.moveTo(E,S+N),n.lineTo(E,S+T-N),n.quadraticCurveTo(E,S+T,E+N,S+T),n.lineTo(E+x-N,S+T),n.quadraticCurveTo(E+x,S+T,E+x,S+T-N),n.lineTo(E+x,S+N),n.quadraticCurveTo(E+x,S,E+x-N,S),n.lineTo(E+N,S),n.quadraticCurveTo(E,S,E,S+N),n.closePath();if(o.fillColor||o.fillColor===0)n.globalAlpha=o.fillAlpha*r,n.fillStyle=i="#"+("00000"+(o.fillColor|0).toString(16)).substr(-6),n.fill();o.lineWidth&&(n.globalAlpha=o.lineAlpha*r,n.stroke())}}},t.CanvasGraphics.renderGraphicsMask=function(e,n){var r=e.graphicsData.length;if(r===0)return;r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var i=0;i<1;i++){var s=e.graphicsData[i],o=s.points;if(s.type===t.Graphics.POLY){n.beginPath(),n.moveTo(o[0],o[1]);for(var u=1;u<o.length/2;u++)n.lineTo(o[u*2],o[u*2+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&n.closePath()}else if(s.type===t.Graphics.RECT)n.beginPath(),n.rect(o[0],o[1],o[2],o[3]),n.closePath();else if(s.type===t.Graphics.CIRC)n.beginPath(),n.arc(o[0],o[1],o[2],0,2*Math.PI),n.closePath();else if(s.type===t.Graphics.ELIP){var a=s.points,f=a[2]*2,l=a[3]*2,c=a[0]-f/2,h=a[1]-l/2;n.beginPath();var p=.5522848,d=f/2*p,v=l/2*p,m=c+f,g=h+l,y=c+f/2,b=h+l/2;n.moveTo(c,b),n.bezierCurveTo(c,b-v,y-d,h,y,h),n.bezierCurveTo(y+d,h,m,b-v,m,b),n.bezierCurveTo(m,b+v,y+d,g,y,g),n.bezierCurveTo(y-d,g,c,b+v,c,b),n.closePath()}else if(s.type===t.Graphics.RREC){var w=o[0],E=o[1],S=o[2],x=o[3],T=o[4],N=Math.min(S,x)/2|0;T=T>N?N:T,n.beginPath(),n.moveTo(w,E+T),n.lineTo(w,E+x-T),n.quadraticCurveTo(w,E+x,w+T,E+x),n.lineTo(w+S-T,E+x),n.quadraticCurveTo(w+S,E+x,w+S,E+x-T),n.lineTo(w+S,E+T),n.quadraticCurveTo(w+S,E,w+S-T,E),n.lineTo(w+T,E),n.quadraticCurveTo(w,E,w,E+T),n.closePath()}}},t.Graphics=function(){t.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.tint=16777215,this.blendMode=t.blendModes.NORMAL,this.currentPath={points:[]},this._webGL=[],this.isMask=!1,this.bounds=null,this.boundsPadding=10,this.dirty=!0},t.Graphics.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Graphics.prototype.constructor=t.Graphics,Object.defineProperty(t.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),t.Graphics.prototype.lineStyle=function(e,n,r){return this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=e||0,this.lineColor=n||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:t.Graphics.POLY},this.graphicsData.push(this.currentPath),this},t.Graphics.prototype.moveTo=function(e,n){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:t.Graphics.POLY},this.currentPath.points.push(e,n),this.graphicsData.push(this.currentPath),this},t.Graphics.prototype.lineTo=function(e,t){return this.currentPath.points.push(e,t),this.dirty=!0,this},t.Graphics.prototype.quadraticCurveTo=function(e,t,n,r){this.currentPath.points.length===0&&this.moveTo(0,0);var i,s,o=20,u=this.currentPath.points;u.length===0&&this.moveTo(0,0);var a=u[u.length-2],f=u[u.length-1],l=0;for(var c=1;c<=o;c++)l=c/o,i=a+(e-a)*l,s=f+(t-f)*l,u.push(i+(e+(n-e)*l-i)*l,s+(t+(r-t)*l-s)*l);return this.dirty=!0,this},t.Graphics.prototype.bezierCurveTo=function(e,t,n,r,i,s){this.currentPath.points.length===0&&this.moveTo(0,0);var o=20,u,a,f,l,c,h=this.currentPath.points,p=h[h.length-2],d=h[h.length-1],v=0;for(var m=1;m<o;m++)v=m/o,u=1-v,a=u*u,f=a*u,l=v*v,c=l*v,h.push(f*p+3*a*v*e+3*u*l*n+c*i,f*d+3*a*v*t+3*u*l*r+c*s);return this.dirty=!0,this},t.Graphics.prototype.arcTo=function(e,t,n,r,i){this.currentPath.points.length===0&&this.moveTo(e,t);var s=this.currentPath.points,o=s[s.length-2],u=s[s.length-1],a=u-t,f=o-e,l=r-t,c=n-e,h=Math.abs(a*c-f*l);if(h<1e-8||i===0)s.push(e,t);else{var p=a*a+f*f,d=l*l+c*c,v=a*l+f*c,m=i*Math.sqrt(p)/h,g=i*Math.sqrt(d)/h,y=m*v/p,b=g*v/d,w=m*c+g*f,E=m*l+g*a,S=f*(g+y),x=a*(g+y),T=c*(m+b),N=l*(m+b),C=Math.atan2(x-E,S-w),k=Math.atan2(N-E,T-w);this.arc(w+e,E+t,i,C,k,f*l>c*a)}return this.dirty=!0,this},t.Graphics.prototype.arc=function(e,t,n,r,i,s){var o=e+Math.cos(r)*n,u=t+Math.sin(r)*n,a=this.currentPath.points;if(a.length!==0&&a[a.length-2]!==o||a[a.length-1]!==u)this.moveTo(o,u),a=this.currentPath.points;if(r===i)return this;!s&&i<=r?i+=Math.PI*2:s&&r<=i&&(r+=Math.PI*2);var f=s?(r-i)*-1:i-r,l=Math.abs(f)/(Math.PI*2)*40;if(f===0)return this;var c=f/(l*2),h=c*2,p=Math.cos(c),d=Math.sin(c),v=l-1,m=v%1/v;for(var g=0;g<=v;g++){var y=g+m*g,b=c+r+h*y,w=Math.cos(b),E=-Math.sin(b);a.push((p*w+d*E)*n+e,(p*-E+d*w)*n+t)}return this.dirty=!0,this},t.Graphics.prototype.drawPath=function(e){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:t.Graphics.POLY},this.graphicsData.push(this.currentPath),this.currentPath.points=this.currentPath.points.concat(e),this.dirty=!0,this},t.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=arguments.length<2?1:t,this},t.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.Graphics.prototype.drawRect=function(e,n,r,i){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,n,r,i],type:t.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0,this},t.Graphics.prototype.drawRoundedRect=function(e,n,r,i,s){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,n,r,i,s],type:t.Graphics.RREC},this.graphicsData.push(this.currentPath),this.dirty=!0,this},t.Graphics.prototype.drawCircle=function(e,n,r){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,n,r,r],type:t.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0,this},t.Graphics.prototype.drawEllipse=function(e,n,r,i){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,n,r,i],type:t.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0,this},t.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null,this},t.Graphics.prototype.generateTexture=function(){var e=this.getBounds(),n=new t.CanvasBuffer(e.width,e.height),r=t.Texture.fromCanvas(n.canvas);return n.context.translate(-e.x,-e.y),t.CanvasGraphics.renderGraphics(this,n.context),r},t.Graphics.prototype._renderWebGL=function(e){if(this.visible===!1||this.alpha===0||this.isMask===!0)return;if(this._cacheAsBitmap){this.dirty&&(this._generateCachedSprite(),t.updateWebGLTexture(this._cachedSprite.texture.baseTexture,e.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,t.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);return}e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock);if(this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var n=t.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(n[0],n[1])}t.WebGLGraphics.renderGraphics(this,e);if(this.children.length){e.spriteBatch.start();for(var r=0,i=this.children.length;r<i;r++)this.children[r]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()},t.Graphics.prototype._renderCanvas=function(e){if(this.visible===!1||this.alpha===0||this.isMask===!0)return;var n=e.context,r=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,n.globalCompositeOperation=t.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e.context),n.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty),t.CanvasGraphics.renderGraphics(this,n);for(var i=0,s=this.children.length;i<s;i++)this.children[i]._renderCanvas(e);this._mask&&e.maskManager.popMask(e.context)},t.Graphics.prototype.getBounds=function(e){this.bounds||this.updateBounds();var t=this.bounds.x,n=this.bounds.width+this.bounds.x,r=this.bounds.y,i=this.bounds.height+this.bounds.y,s=e||this.worldTransform,o=s.a,u=s.c,a=s.b,f=s.d,l=s.tx,c=s.ty,h=o*n+a*i+l,p=f*i+u*n+c,d=o*t+a*i+l,v=f*i+u*t+c,m=o*t+a*r+l,g=f*r+u*t+c,y=o*n+a*r+l,b=f*r+u*n+c,w=h,E=p,S=h,x=p;S=d<S?d:S,S=m<S?m:S,S=y<S?y:S,x=v<x?v:x,x=g<x?g:x,x=b<x?b:x,w=d>w?d:w,w=m>w?m:w,w=y>w?y:w,E=v>E?v:E,E=g>E?g:E,E=b>E?b:E;var T=this._bounds;return T.x=S,T.width=w-S,T.y=x,T.height=E-x,T},t.Graphics.prototype.updateBounds=function(){var e=Infinity,n=-Infinity,r=Infinity,i=-Infinity,s,o,u,a,f;for(var l=0;l<this.graphicsData.length;l++){var c=this.graphicsData[l],h=c.type,p=c.lineWidth;s=c.points;if(h===t.Graphics.RECT)o=s[0]-p/2,u=s[1]-p/2,a=s[2]+p,f=s[3]+p,e=o<e?o:e,n=o+a>n?o+a:n,r=u<r?o:r,i=u+f>i?u+f:i;else if(h===t.Graphics.CIRC||h===t.Graphics.ELIP)o=s[0],u=s[1],a=s[2]+p/2,f=s[3]+p/2,e=o-a<e?o-a:e,n=o+a>n?o+a:n,r=u-f<r?u-f:r,i=u+f>i?u+f:i;else for(var d=0;d<s.length;d+=2)o=s[d],u=s[d+1],e=o-p<e?o-p:e,n=o+p>n?o+p:n,r=u-p<r?u-p:r,i=u+p>i?u+p:i}var v=this.boundsPadding;this.bounds=new t.Rectangle(e-v,r-v,n-e+v*2,i-r+v*2)},t.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(!this._cachedSprite){var n=new t.CanvasBuffer(e.width,e.height),r=t.Texture.fromCanvas(n.canvas);this._cachedSprite=new t.Sprite(r),this._cachedSprite.buffer=n,this._cachedSprite.worldTransform=this.worldTransform}else this._cachedSprite.buffer.resize(e.width,e.height);this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),t.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},t.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},t.Graphics.POLY=0,t.Graphics.RECT=1,t.Graphics.CIRC=2,t.Graphics.ELIP=3,t.Graphics.RREC=4,t.Strip=function(e){t.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new t.Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new t.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new t.Float32Array([1,1,1,1]),this.indices=new t.Uint16Array([0,1,2,3]),this.dirty=!0},t.Strip.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Strip.prototype.constructor=t.Strip,t.Strip.prototype._renderWebGL=function(e){if(!this.visible||this.alpha<=0)return;e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start()},t.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.verticies,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},t.Strip.prototype._renderStrip=function(e){var n=e.gl,r=e.projection,i=e.offset,s=e.shaderManager.stripShader;n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.uniformMatrix3fv(s.translationMatrix,!1,this.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,r.x,-r.y),n.uniform2f(s.offsetVector,-i.x,-i.y),n.uniform1f(s.alpha,1),this.dirty?(this.dirty=!1,n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,this.verticies,n.STATIC_DRAW),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._uvBuffer),n.bufferData(n.ARRAY_BUFFER,this.uvs,n.STATIC_DRAW),n.vertexAttribPointer(s.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.texture.baseTexture._glTextures[n.id]||t.createWebGLTexture(this.texture.baseTexture,n)),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,this.indices,n.STATIC_DRAW)):(n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.verticies),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._uvBuffer),n.vertexAttribPointer(s.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.texture.baseTexture._glTextures[n.id]||t.createWebGLTexture(this.texture.baseTexture,n)),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),n.drawElements(n.TRIANGLE_STRIP,this.indices.length,n.UNSIGNED_SHORT,0)},t.Strip.prototype._renderCanvas=function(e){var t=e.context,n=this.worldTransform;e.roundPixels?t.setTransform(n.a,n.c,n.b,n.d,n.tx|0,n.ty|0):t.setTransform(n.a,n.c,n.b,n.d,n.tx,n.ty);var r=this,i=r.verticies,s=r.uvs,o=i.length/2;this.count++;for(var u=0;u<o-2;u++){var a=u*2,f=i[a],l=i[a+2],c=i[a+4],h=i[a+1],p=i[a+3],d=i[a+5],v=(f+l+c)/3,m=(h+p+d)/3,g=f-v,y=h-m,b=Math.sqrt(g*g+y*y);f=v+g/b*(b+3),h=m+y/b*(b+3),g=l-v,y=p-m,b=Math.sqrt(g*g+y*y),l=v+g/b*(b+3),p=m+y/b*(b+3),g=c-v,y=d-m,b=Math.sqrt(g*g+y*y),c=v+g/b*(b+3),d=m+y/b*(b+3);var w=s[a]*r.texture.width,E=s[a+2]*r.texture.width,S=s[a+4]*r.texture.width,x=s[a+1]*r.texture.height,T=s[a+3]*r.texture.height,N=s[a+5]*r.texture.height;t.save(),t.beginPath(),t.moveTo(f,h),t.lineTo(l,p),t.lineTo(c,d),t.closePath(),t.clip();var C=w*T+x*S+E*N-T*S-x*E-w*N,k=f*T+x*c+l*N-T*c-x*l-f*N,L=w*l+f*S+E*c-l*S-f*E-w*c,A=w*T*c+x*l*S+f*E*N-f*T*S-x*E*c-w*l*N,O=h*T+x*d+p*N-T*d-x*p-h*N,M=w*p+h*S+E*d-p*S-h*E-w*d,_=w*T*d+x*p*S+h*E*N-h*T*S-x*E*d-w*p*N;t.transform(k/C,O/C,L/C,M/C,A/C,_/C),t.drawImage(r.texture.baseTexture.source,0,0),t.restore()}},t.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},t.Rope=function(e,n){t.Strip.call(this,e),this.points=n,this.verticies=new t.Float32Array(n.length*4),this.uvs=new t.Float32Array(n.length*4),this.colors=new t.Float32Array(n.length*2),this.indices=new t.Uint16Array(n.length*2),this.refresh()},t.Rope.prototype=Object.create(t.Strip.prototype),t.Rope.prototype.constructor=t.Rope,t.Rope.prototype.refresh=function(){var e=this.points;if(e.length<1)return;var t=this.uvs,n=e[0],r=this.indices,i=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;var s=e.length,o,u,a;for(var f=1;f<s;f++)o=e[f],u=f*4,a=f/(s-1),f%2?(t[u]=a,t[u+1]=0,t[u+2]=a,t[u+3]=1):(t[u]=a,t[u+1]=0,t[u+2]=a,t[u+3]=1),u=f*2,i[u]=1,i[u+1]=1,u=f*2,r[u]=u,r[u+1]=u+1,n=o},t.Rope.prototype.updateTransform=function(){var e=this.points;if(e.length<1)return;var n=e[0],r,i={x:0,y:0};this.count-=.2;var s=this.verticies,o=e.length,u,a,f,l,c;for(var h=0;h<o;h++)u=e[h],a=h*4,h<e.length-1?r=e[h+1]:r=u,i.y=-(r.x-n.x),i.x=r.y-n.y,f=(1-h/(o-1))*10,f>1&&(f=1),l=Math.sqrt(i.x*i.x+i.y*i.y),c=this.texture.height/2,i.x/=l,i.y/=l,i.x*=c,i.y*=c,s[a]=u.x+i.x,s[a+1]=u.y+i.y,s[a+2]=u.x-i.x,s[a+3]=u.y-i.y,n=u;t.DisplayObjectContainer.prototype.updateTransform.call(this)},t.Rope.prototype.setTexture=function(e){this.texture=e},t.TilingSprite=function(e,n,r){t.Sprite.call(this,e),this._width=n||100,this._height=r||100,this.tileScale=new t.Point(1,1),this.tileScaleOffset=new t.Point(1,1),this.tilePosition=new t.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=t.blendModes.NORMAL},t.TilingSprite.prototype=Object.create(t.Sprite.prototype),t.TilingSprite.prototype.constructor=t.TilingSprite,Object.defineProperty(t.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(t.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),t.TilingSprite.prototype.setTexture=function(e){if(this.texture===e)return;this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215},t.TilingSprite.prototype._renderWebGL=function(e){if(this.visible===!1||this.alpha===0)return;var n,r;this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(t.updateWebGLTexture(this.tilingTexture.baseTexture,e.gl),this.tilingTexture.needsUpdate=!1)):e.spriteBatch.renderTilingSprite(this);for(n=0,r=this.children.length;n<r;n++)this.children[n]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(e),e.spriteBatch.start()},t.TilingSprite.prototype._renderCanvas=function(e){if(this.visible===!1||this.alpha===0)return;var n=e.context;this._mask&&e.maskManager.pushMask(this._mask,n),n.globalAlpha=this.worldAlpha;var r=this.worldTransform,i,s;n.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty);if(!this.__tilePattern||this.refreshTexture){this.generateTilingTexture(!1);if(!this.tilingTexture)return;this.__tilePattern=n.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,n.globalCompositeOperation=t.blendModesCanvas[e.currentBlendMode]);var o=this.tilePosition,u=this.tileScale;o.x%=this.tilingTexture.baseTexture.width,o.y%=this.tilingTexture.baseTexture.height,n.scale(u.x,u.y),n.translate(o.x,o.y),n.fillStyle=this.__tilePattern,n.fillRect(-o.x+this.anchor.x*-this._width,-o.y+this.anchor.y*-this._height,this._width/u.x,this._height/u.y),n.scale(1/u.x,1/u.y),n.translate(-o.x,-o.y),this._mask&&e.maskManager.popMask(e.context);for(i=0,s=this.children.length;i<s;i++)this.children[i]._renderCanvas(e)},t.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,n=e*(1-this.anchor.x),r=e*-this.anchor.x,i=t*(1-this.anchor.y),s=t*-this.anchor.y,o=this.worldTransform,u=o.a,a=o.c,f=o.b,l=o.d,c=o.tx,h=o.ty,p=u*r+f*s+c,d=l*s+a*r+h,v=u*n+f*s+c,m=l*s+a*n+h,g=u*n+f*i+c,y=l*i+a*n+h,b=u*r+f*i+c,w=l*i+a*r+h,E=-Infinity,S=-Infinity,x=Infinity,T=Infinity;x=p<x?p:x,x=v<x?v:x,x=g<x?g:x,x=b<x?b:x,T=d<T?d:T,T=m<T?m:T,T=y<T?y:T,T=w<T?w:T,E=p>E?p:E,E=v>E?v:E,E=g>E?g:E,E=b>E?b:E,S=d>S?d:S,S=m>S?m:S,S=y>S?y:S,S=w>S?w:S;var N=this._bounds;return N.x=x,N.width=E-x,N.y=T,N.height=S-T,this._currentBounds=N,N},t.TilingSprite.prototype.onTextureUpdate=function(){},t.TilingSprite.prototype.generateTilingTexture=function(e){if(!this.texture.baseTexture.hasLoaded)return;var n=this.texture,r=n.frame,i,s,o=r.width!==n.baseTexture.width||r.height!==n.baseTexture.height,u=!1;if(!e)o&&(i=r.width,s=r.height,u=!0);else{i=t.getNextPowerOfTwo(r.width),s=t.getNextPowerOfTwo(r.height);if(r.width!==i||r.height!==s)u=!0}if(u){var a;this.tilingTexture&&this.tilingTexture.isTiling?(a=this.tilingTexture.canvasBuffer,a.resize(i,s),this.tilingTexture.baseTexture.width=i,this.tilingTexture.baseTexture.height=s,this.tilingTexture.needsUpdate=!0):(a=new t.CanvasBuffer(i,s),this.tilingTexture=t.Texture.fromCanvas(a.canvas),this.tilingTexture.canvasBuffer=a,this.tilingTexture.isTiling=!0),a.context.drawImage(n.baseTexture.source,n.crop.x,n.crop.y,n.crop.width,n.crop.height,0,0,i,s),this.tileScaleOffset.x=r.width/i,this.tileScaleOffset.y=r.height/s}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=n;this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0};var s={};s.BoneData=function(e,t){this.name=e,this.parent=t},s.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},s.SlotData=function(e,t){this.name=e,this.boneData=t},s.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},s.Bone=function(e,t){this.data=e,this.parent=t,this.setToSetupPose()},s.Bone.yDown=!1,s.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(e,t){var n=this.parent;n!=null?(this.worldX=this.x*n.m00+this.y*n.m01+n.worldX,this.worldY=this.x*n.m10+this.y*n.m11+n.worldY,this.worldScaleX=n.worldScaleX*this.scaleX,this.worldScaleY=n.worldScaleY*this.scaleY,this.worldRotation=n.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var r=this.worldRotation*Math.PI/180,i=Math.cos(r),o=Math.sin(r);this.m00=i*this.worldScaleX,this.m10=o*this.worldScaleX,this.m01=-o*this.worldScaleY,this.m11=i*this.worldScaleY,e&&(this.m00=-this.m00,this.m01=-this.m01),t&&(this.m10=-this.m10,this.m11=-this.m11),s.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY}},s.Slot=function(e,t,n){this.data=e,this.skeleton=t,this.bone=n,this.setToSetupPose()},s.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(e){this.attachment=e,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(e){this._attachmentTime=this.skeleton.time-e},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var e=this.data;this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;var t=this.skeleton.data.slots;for(var n=0,r=t.length;n<r;n++)if(t[n]==e){this.setAttachment(e.attachmentName?this.skeleton.getAttachmentBySlotIndex(n,e.attachmentName):null);break}}},s.Skin=function(e){this.name=e,this.attachments={}},s.Skin.prototype={addAttachment:function(e,t,n){this.attachments[e+":"+t]=n},getAttachment:function(e,t){return this.attachments[e+":"+t]},_attachAll:function(e,t){for(var n in t.attachments){var r=n.indexOf(":"),i=parseInt(n.substring(0,r),10),s=n.substring(r+1),o=e.slots[i];if(o.attachment&&o.attachment.name==s){var u=this.getAttachment(i,s);u&&o.setAttachment(u)}}}},s.Animation=function(e,t,n){this.name=e,this.timelines=t,this.duration=n},s.Animation.prototype={apply:function(e,t,n){n&&this.duration&&(t%=this.duration);var r=this.timelines;for(var i=0,s=r.length;i<s;i++)r[i].apply(e,t,1)},mix:function(e,t,n,r){n&&this.duration&&(t%=this.duration);var i=this.timelines;for(var s=0,o=i.length;s<o;s++)i[s].apply(e,t,r)}},s.binarySearch=function(e,t,n){var r=0,i=Math.floor(e.length/n)-2;if(!i)return n;var s=i>>>1;for(;;){e[(s+1)*n]<=t?r=s+1:i=s;if(r==i)return(r+1)*n;s=r+i>>>1}},s.linearSearch=function(e,t,n){for(var r=0,i=e.length-n;r<=i;r+=n)if(e[r]>t)return r;return-1},s.Curves=function(e){this.curves=[],this.curves.length=(e-1)*6},s.Curves.prototype={setLinear:function(e){this.curves[e*6]=0},setStepped:function(e){this.curves[e*6]=-1},setCurve:function(e,t,n,r,i){var s=.1,o=s*s,u=o*s,a=3*s,f=3*o,l=6*o,c=6*u,h=-t*2+r,p=-n*2+i,d=(t-r)*3+1,v=(n-i)*3+1,m=e*6,g=this.curves;g[m]=t*a+h*f+d*u,g[m+1]=n*a+p*f+v*u,g[m+2]=h*l+d*c,g[m+3]=p*l+v*c,g[m+4]=d*c,g[m+5]=v*c},getCurvePercent:function(e,t){t=t<0?0:t>1?1:t;var n=e*6,r=this.curves,i=r[n];if(!i)return t;if(i==-1)return 0;var s=r[n+1],o=r[n+2],u=r[n+3],a=r[n+4],f=r[n+5],l=i,c=s,h=8;for(;;){if(l>=t){var p=l-i,d=c-s;return d+(c-d)*(t-p)/(l-p)}if(!h)break;h--,i+=o,s+=u,o+=a,u+=f,l+=i,c+=s}return c+(1-c)*(t-l)/(1-l)}},s.RotateTimeline=function(e){this.curves=new s.Curves(e),this.frames=[],this.frames.length=e*2},s.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,n){e*=2,this.frames[e]=t,this.frames[e+1]=n},apply:function(e,t,n){var r=this.frames,i;if(t<r[0])return;var o=e.bones[this.boneIndex];if(t>=r[r.length-2]){i=o.data.rotation+r[r.length-1]-o.rotation;while(i>180)i-=360;while(i<-180)i+=360;o.rotation+=i*n;return}var u=s.binarySearch(r,t,2),a=r[u-1],f=r[u],l=1-(t-f)/(r[u-2]-f);l=this.curves.getCurvePercent(u/2-1,l),i=r[u+1]-a;while(i>180)i-=360;while(i<-180)i+=360;i=o.data.rotation+(a+i*l)-o.rotation;while(i>180)i-=360;while(i<-180)i+=360;o.rotation+=i*n}},s.TranslateTimeline=function(e){this.curves=new s.Curves(e),this.frames=[],this.frames.length=e*3},s.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,n,r){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r},apply:function(e,t,n){var r=this.frames;if(t<r[0])return;var i=e.bones[this.boneIndex];if(t>=r[r.length-3]){i.x+=(i.data.x+r[r.length-2]-i.x)*n,i.y+=(i.data.y+r[r.length-1]-i.y)*n;return}var o=s.binarySearch(r,t,3),u=r[o-2],a=r[o-1],f=r[o],l=1-(t-f)/(r[o+ -3]-f);l=this.curves.getCurvePercent(o/3-1,l),i.x+=(i.data.x+u+(r[o+1]-u)*l-i.x)*n,i.y+=(i.data.y+a+(r[o+2]-a)*l-i.y)*n}},s.ScaleTimeline=function(e){this.curves=new s.Curves(e),this.frames=[],this.frames.length=e*3},s.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,n,r){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r},apply:function(e,t,n){var r=this.frames;if(t<r[0])return;var i=e.bones[this.boneIndex];if(t>=r[r.length-3]){i.scaleX+=(i.data.scaleX-1+r[r.length-2]-i.scaleX)*n,i.scaleY+=(i.data.scaleY-1+r[r.length-1]-i.scaleY)*n;return}var o=s.binarySearch(r,t,3),u=r[o-2],a=r[o-1],f=r[o],l=1-(t-f)/(r[o+ -3]-f);l=this.curves.getCurvePercent(o/3-1,l),i.scaleX+=(i.data.scaleX-1+u+(r[o+1]-u)*l-i.scaleX)*n,i.scaleY+=(i.data.scaleY-1+a+(r[o+2]-a)*l-i.scaleY)*n}},s.ColorTimeline=function(e){this.curves=new s.Curves(e),this.frames=[],this.frames.length=e*5},s.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(e,t,n,r,i,s){e*=5,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r,this.frames[e+3]=i,this.frames[e+4]=s},apply:function(e,t,n){var r=this.frames;if(t<r[0])return;var i=e.slots[this.slotIndex];if(t>=r[r.length-5]){var o=r.length-1;i.r=r[o-3],i.g=r[o-2],i.b=r[o-1],i.a=r[o];return}var u=s.binarySearch(r,t,5),a=r[u-4],f=r[u-3],l=r[u-2],c=r[u-1],h=r[u],p=1-(t-h)/(r[u-5]-h);p=this.curves.getCurvePercent(u/5-1,p);var d=a+(r[u+1]-a)*p,v=f+(r[u+2]-f)*p,m=l+(r[u+3]-l)*p,g=c+(r[u+4]-c)*p;n<1?(i.r+=(d-i.r)*n,i.g+=(v-i.g)*n,i.b+=(m-i.b)*n,i.a+=(g-i.a)*n):(i.r=d,i.g=v,i.b=m,i.a=g)}},s.AttachmentTimeline=function(e){this.curves=new s.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},s.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,n){this.frames[e]=t,this.attachmentNames[e]=n},apply:function(e,t,n){var r=this.frames;if(t<r[0])return;var i;t>=r[r.length-1]?i=r.length-1:i=s.binarySearch(r,t,1)-1;var o=this.attachmentNames[i];e.slots[this.slotIndex].setAttachment(o?e.getAttachmentBySlotIndex(this.slotIndex,o):null)}},s.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},s.SkeletonData.prototype={defaultSkin:null,findBone:function(e){var t=this.bones;for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return t[n];return null},findBoneIndex:function(e){var t=this.bones;for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return n;return-1},findSlot:function(e){var t=this.slots;for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return slot[n];return null},findSlotIndex:function(e){var t=this.slots;for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return n;return-1},findSkin:function(e){var t=this.skins;for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return t[n];return null},findAnimation:function(e){var t=this.animations;for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return t[n];return null}},s.Skeleton=function(e){this.data=e,this.bones=[];for(var t=0,n=e.bones.length;t<n;t++){var r=e.bones[t],i=r.parent?this.bones[e.bones.indexOf(r.parent)]:null;this.bones.push(new s.Bone(r,i))}this.slots=[],this.drawOrder=[];for(t=0,n=e.slots.length;t<n;t++){var o=e.slots[t],u=this.bones[e.bones.indexOf(o.boneData)],a=new s.Slot(o,this,u);this.slots.push(a),this.drawOrder.push(a)}},s.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){var e=this.flipX,t=this.flipY,n=this.bones;for(var r=0,i=n.length;r<i;r++)n[r].updateWorldTransform(e,t)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){var e=this.bones;for(var t=0,n=e.length;t<n;t++)e[t].setToSetupPose()},setSlotsToSetupPose:function(){var e=this.slots;for(var t=0,n=e.length;t<n;t++)e[t].setToSetupPose(t)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(e){var t=this.bones;for(var n=0,r=t.length;n<r;n++)if(t[n].data.name==e)return t[n];return null},findBoneIndex:function(e){var t=this.bones;for(var n=0,r=t.length;n<r;n++)if(t[n].data.name==e)return n;return-1},findSlot:function(e){var t=this.slots;for(var n=0,r=t.length;n<r;n++)if(t[n].data.name==e)return t[n];return null},findSlotIndex:function(e){var t=this.slots;for(var n=0,r=t.length;n<r;n++)if(t[n].data.name==e)return n;return-1},setSkinByName:function(e){var t=this.data.findSkin(e);if(!t)throw"Skin not found: "+e;this.setSkin(t)},setSkin:function(e){this.skin&&e&&e._attachAll(this,this.skin),this.skin=e},getAttachmentBySlotName:function(e,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e),t)},getAttachmentBySlotIndex:function(e,t){if(this.skin){var n=this.skin.getAttachment(e,t);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},setAttachment:function(e,t){var n=this.slots;for(var r=0,i=n.size;r<i;r++){var s=n[r];if(s.data.name==e){var o=null;if(t){o=this.getAttachment(r,t);if(o==null)throw"Attachment not found: "+t+", for slot: "+e}s.setAttachment(o);return}}throw"Slot not found: "+e},update:function(e){time+=e}},s.AttachmentType={region:0},s.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},s.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(e,t,n,r,i){var s=this.uvs;i?(s[2]=e,s[3]=r,s[4]=e,s[5]=t,s[6]=n,s[7]=t,s[0]=n,s[1]=r):(s[0]=e,s[1]=r,s[2]=e,s[3]=t,s[4]=n,s[5]=t,s[6]=n,s[7]=r)},updateOffset:function(){var e=this.width/this.regionOriginalWidth*this.scaleX,t=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*e,r=-this.height/2*this.scaleY+this.regionOffsetY*t,i=n+this.regionWidth*e,s=r+this.regionHeight*t,o=this.rotation*Math.PI/180,u=Math.cos(o),a=Math.sin(o),f=n*u+this.x,l=n*a,c=r*u+this.y,h=r*a,p=i*u+this.x,d=i*a,v=s*u+this.y,m=s*a,g=this.offset;g[0]=f-h,g[1]=c+l,g[2]=f-m,g[3]=v+l,g[4]=p-m,g[5]=v+d,g[6]=p-h,g[7]=c+d},computeVertices:function(e,t,n,r){e+=n.worldX,t+=n.worldY;var i=n.m00,s=n.m01,o=n.m10,u=n.m11,a=this.offset;r[0]=a[0]*i+a[1]*s+e,r[1]=a[0]*o+a[1]*u+t,r[2]=a[2]*i+a[3]*s+e,r[3]=a[2]*o+a[3]*u+t,r[4]=a[4]*i+a[5]*s+e,r[5]=a[4]*o+a[5]*u+t,r[6]=a[6]*i+a[7]*s+e,r[7]=a[6]*o+a[7]*u+t}},s.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},s.AnimationStateData.prototype={defaultMix:0,setMixByName:function(e,t,n){var r=this.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setMix(r,i,n)},setMix:function(e,t,n){this.animationToMixTime[e.name+":"+t.name]=n},getMix:function(e,t){var n=this.animationToMixTime[e.name+":"+t.name];return n?n:this.defaultMix}},s.AnimationState=function(e){this.data=e,this.queue=[]},s.AnimationState.prototype={animationSpeed:1,current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(e){this.currentTime+=e*this.animationSpeed,this.previousTime+=e,this.mixTime+=e;if(this.queue.length>0){var t=this.queue[0];this.currentTime>=t.delay&&(this._setAnimation(t.animation,t.loop),this.queue.shift())}},apply:function(e){if(!this.current)return;if(this.previous){this.previous.apply(e,this.previousTime,this.previousLoop);var t=this.mixTime/this.mixDuration;t>=1&&(t=1,this.previous=null),this.current.mix(e,this.currentTime,this.currentLoop,t)}else this.current.apply(e,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(e,t){this.previous=null,e&&this.current&&(this.mixDuration=this.data.getMix(this.current,e),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=e,this.currentLoop=t,this.currentTime=0},setAnimationByName:function(e,t){var n=this.data.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;this.setAnimation(n,t)},setAnimation:function(e,t){this.queue.length=0,this._setAnimation(e,t)},addAnimationByName:function(e,t,n){var r=this.data.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;this.addAnimation(r,t,n)},addAnimation:function(e,t,n){var r={};r.animation=e,r.loop=t;if(!n||n<=0){var i=this.queue.length?this.queue[this.queue.length-1].animation:this.current;i!=null?n=i.duration-this.data.getMix(i,e)+(n||0):n=0}r.delay=n,this.queue.push(r)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},s.SkeletonJson=function(e){this.attachmentLoader=e},s.SkeletonJson.prototype={scale:1,readSkeletonData:function(e){var t=new s.SkeletonData,n,r=e.bones;for(var i=0,o=r.length;i<o;i++){var u=r[i],a=null;if(u.parent){a=t.findBone(u.parent);if(!a)throw"Parent bone not found: "+u.parent}n=new s.BoneData(u.name,a),n.length=(u.length||0)*this.scale,n.x=(u.x||0)*this.scale,n.y=(u.y||0)*this.scale,n.rotation=u.rotation||0,n.scaleX=u.scaleX||1,n.scaleY=u.scaleY||1,t.bones.push(n)}var f=e.slots;for(i=0,o=f.length;i<o;i++){var l=f[i];n=t.findBone(l.bone);if(!n)throw"Slot bone not found: "+l.bone;var c=new s.SlotData(l.name,n),h=l.color;h&&(c.r=s.SkeletonJson.toColor(h,0),c.g=s.SkeletonJson.toColor(h,1),c.b=s.SkeletonJson.toColor(h,2),c.a=s.SkeletonJson.toColor(h,3)),c.attachmentName=l.attachment,t.slots.push(c)}var p=e.skins;for(var d in p){if(!p.hasOwnProperty(d))continue;var v=p[d],m=new s.Skin(d);for(var g in v){if(!v.hasOwnProperty(g))continue;var y=t.findSlotIndex(g),b=v[g];for(var w in b){if(!b.hasOwnProperty(w))continue;var E=this.readAttachment(m,w,b[w]);E!=null&&m.addAttachment(y,w,E)}}t.skins.push(m),m.name=="default"&&(t.defaultSkin=m)}var S=e.animations;for(var x in S){if(!S.hasOwnProperty(x))continue;this.readAnimation(x,S[x],t)}return t},readAttachment:function(e,t,n){t=n.name||t;var r=s.AttachmentType[n.type||"region"];if(r==s.AttachmentType.region){var i=new s.RegionAttachment;return i.x=(n.x||0)*this.scale,i.y=(n.y||0)*this.scale,i.scaleX=n.scaleX||1,i.scaleY=n.scaleY||1,i.rotation=n.rotation||0,i.width=(n.width||32)*this.scale,i.height=(n.height||32)*this.scale,i.updateOffset(),i.rendererObject={},i.rendererObject.name=t,i.rendererObject.scale={},i.rendererObject.scale.x=i.scaleX,i.rendererObject.scale.y=i.scaleY,i.rendererObject.rotation=-i.rotation*Math.PI/180,i}throw"Unknown attachment type: "+r},readAnimation:function(e,t,n){var r=[],i=0,o,u,a,f,l,c,h,p=t.bones;for(var d in p){if(!p.hasOwnProperty(d))continue;var v=n.findBoneIndex(d);if(v==-1)throw"Bone not found: "+d;var m=p[d];for(a in m){if(!m.hasOwnProperty(a))continue;l=m[a];if(a=="rotate"){u=new s.RotateTimeline(l.length),u.boneIndex=v,o=0;for(c=0,h=l.length;c<h;c++)f=l[c],u.setFrame(o,f.time,f.angle),s.SkeletonJson.readCurve(u,o,f),o++;r.push(u),i=Math.max(i,u.frames[u.getFrameCount()*2-2])}else{if(a!="translate"&&a!="scale")throw"Invalid timeline type for a bone: "+a+" ("+d+")";var g=1;a=="scale"?u=new s.ScaleTimeline(l.length):(u=new s.TranslateTimeline(l.length),g=this.scale),u.boneIndex=v,o=0;for(c=0,h=l.length;c<h;c++){f=l[c];var y=(f.x||0)*g,b=(f.y||0)*g;u.setFrame(o,f.time,y,b),s.SkeletonJson.readCurve(u,o,f),o++}r.push(u),i=Math.max(i,u.frames[u.getFrameCount()*3-3])}}}var w=t.slots;for(var E in w){if(!w.hasOwnProperty(E))continue;var S=w[E],x=n.findSlotIndex(E);for(a in S){if(!S.hasOwnProperty(a))continue;l=S[a];if(a=="color"){u=new s.ColorTimeline(l.length),u.slotIndex=x,o=0;for(c=0,h=l.length;c<h;c++){f=l[c];var T=f.color,N=s.SkeletonJson.toColor(T,0),C=s.SkeletonJson.toColor(T,1),k=s.SkeletonJson.toColor(T,2),L=s.SkeletonJson.toColor(T,3);u.setFrame(o,f.time,N,C,k,L),s.SkeletonJson.readCurve(u,o,f),o++}r.push(u),i=Math.max(i,u.frames[u.getFrameCount()*5-5])}else{if(a!="attachment")throw"Invalid timeline type for a slot: "+a+" ("+E+")";u=new s.AttachmentTimeline(l.length),u.slotIndex=x,o=0;for(c=0,h=l.length;c<h;c++)f=l[c],u.setFrame(o++,f.time,f.name);r.push(u),i=Math.max(i,u.frames[u.getFrameCount()-1])}}}n.animations.push(new s.Animation(e,r,i))}},s.SkeletonJson.readCurve=function(e,t,n){var r=n.curve;if(!r)return;r=="stepped"?e.curves.setStepped(t):r instanceof Array&&e.curves.setCurve(t,r[0],r[1],r[2],r[3])},s.SkeletonJson.toColor=function(e,t){if(e.length!=8)throw"Color hexidecimal length must be 8, recieved: "+e;return parseInt(e.substr(t*2,2),16)/255},s.Atlas=function(e,t){this.textureLoader=t,this.pages=[],this.regions=[];var n=new s.AtlasReader(e),r=[];r.length=4;var i=null;for(;;){var o=n.readLine();if(o==null)break;o=n.trim(o);if(!o.length)i=null;else if(!i){i=new s.AtlasPage,i.name=o,i.format=s.Atlas.Format[n.readValue()],n.readTuple(r),i.minFilter=s.Atlas.TextureFilter[r[0]],i.magFilter=s.Atlas.TextureFilter[r[1]];var u=n.readValue();i.uWrap=s.Atlas.TextureWrap.clampToEdge,i.vWrap=s.Atlas.TextureWrap.clampToEdge,u=="x"?i.uWrap=s.Atlas.TextureWrap.repeat:u=="y"?i.vWrap=s.Atlas.TextureWrap.repeat:u=="xy"&&(i.uWrap=i.vWrap=s.Atlas.TextureWrap.repeat),t.load(i,o),this.pages.push(i)}else{var a=new s.AtlasRegion;a.name=o,a.page=i,a.rotate=n.readValue()=="true",n.readTuple(r);var f=parseInt(r[0],10),l=parseInt(r[1],10);n.readTuple(r);var c=parseInt(r[0],10),h=parseInt(r[1],10);a.u=f/i.width,a.v=l/i.height,a.rotate?(a.u2=(f+h)/i.width,a.v2=(l+c)/i.height):(a.u2=(f+c)/i.width,a.v2=(l+h)/i.height),a.x=f,a.y=l,a.width=Math.abs(c),a.height=Math.abs(h),n.readTuple(r)==4&&(a.splits=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)],n.readTuple(r)==4&&(a.pads=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)],n.readTuple(r))),a.originalWidth=parseInt(r[0],10),a.originalHeight=parseInt(r[1],10),n.readTuple(r),a.offsetX=parseInt(r[0],10),a.offsetY=parseInt(r[1],10),a.index=parseInt(n.readValue(),10),this.regions.push(a)}}},s.Atlas.prototype={findRegion:function(e){var t=this.regions;for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return t[n];return null},dispose:function(){var e=this.pages;for(var t=0,n=e.length;t<n;t++)this.textureLoader.unload(e[t].rendererObject)},updateUVs:function(e){var t=this.regions;for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i.page!=e)continue;i.u=i.x/e.width,i.v=i.y/e.height,i.rotate?(i.u2=(i.x+i.height)/e.width,i.v2=(i.y+i.width)/e.height):(i.u2=(i.x+i.width)/e.width,i.v2=(i.y+i.height)/e.height)}}},s.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},s.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},s.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},s.AtlasPage=function(){},s.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},s.AtlasRegion=function(){},s.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},s.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},s.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var e=this.readLine(),t=e.indexOf(":");if(t==-1)throw"Invalid line: "+e;return this.trim(e.substring(t+1))},readTuple:function(e){var t=this.readLine(),n=t.indexOf(":");if(n==-1)throw"Invalid line: "+t;var r=0,i=n+1;for(;r<3;r++){var s=t.indexOf(",",i);if(s==-1){if(!r)throw"Invalid line: "+t;break}e[r]=this.trim(t.substr(i,s-i)),i=s+1}return e[r]=this.trim(t.substring(i)),r+1}},s.AtlasAttachmentLoader=function(e){this.atlas=e},s.AtlasAttachmentLoader.prototype={newAttachment:function(e,t,n){switch(t){case s.AttachmentType.region:var r=this.atlas.findRegion(n);if(!r)throw"Region not found in atlas: "+n+" ("+t+")";var i=new s.RegionAttachment(n);return i.rendererObject=r,i.setUVs(r.u,r.v,r.u2,r.v2,r.rotate),i.regionOffsetX=r.offsetX,i.regionOffsetY=r.offsetY,i.regionWidth=r.width,i.regionHeight=r.height,i.regionOriginalWidth=r.originalWidth,i.regionOriginalHeight=r.originalHeight,i}throw"Unknown attachment type: "+t}},s.Bone.yDown=!0,t.AnimCache={},t.Spine=function(e){t.DisplayObjectContainer.call(this),this.spineData=t.AnimCache[e];if(!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+e);this.skeleton=new s.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new s.AnimationStateData(this.spineData),this.state=new s.AnimationState(this.stateData),this.slotContainers=[];for(var n=0,r=this.skeleton.drawOrder.length;n<r;n++){var i=this.skeleton.drawOrder[n],o=i.attachment,u=new t.DisplayObjectContainer;this.slotContainers.push(u),this.addChild(u);if(!(o instanceof s.RegionAttachment))continue;var a=o.rendererObject.name,f=this.createSprite(i,o.rendererObject);i.currentSprite=f,i.currentSpriteName=a,u.addChild(f)}},t.Spine.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Spine.prototype.constructor=t.Spine,t.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var e=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.state.update(e),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();var n=this.skeleton.drawOrder;for(var r=0,i=n.length;r<i;r++){var o=n[r],u=o.attachment,a=this.slotContainers[r];if(!(u instanceof s.RegionAttachment)){a.visible=!1;continue}if(u.rendererObject)if(!o.currentSpriteName||o.currentSpriteName!=u.name){var f=u.rendererObject.name;o.currentSprite!==undefined&&(o.currentSprite.visible=!1),o.sprites=o.sprites||{};if(o.sprites[f]!==undefined)o.sprites[f].visible=!0;else{var l=this.createSprite(o,u.rendererObject);a.addChild(l)}o.currentSprite=o.sprites[f],o.currentSpriteName=f}a.visible=!0;var c=o.bone;a.position.x=c.worldX+u.x*c.m00+u.y*c.m01,a.position.y=c.worldY+u.x*c.m10+u.y*c.m11,a.scale.x=c.worldScaleX,a.scale.y=c.worldScaleY,a.rotation=-(o.bone.worldRotation*Math.PI/180),a.alpha=o.a,o.currentSprite.tint=t.rgb2hex([o.r,o.g,o.b])}t.DisplayObjectContainer.prototype.updateTransform.call(this)},t.Spine.prototype.createSprite=function(e,n){var r=t.TextureCache[n.name]?n.name:n.name+".png",i=new t.Sprite(t.Texture.fromFrame(r));return i.scale=n.scale,i.rotation=n.rotation,i.anchor.x=i.anchor.y=.5,e.sprites=e.sprites||{},e.sprites[n.name]=i,i},t.BaseTextureCache={},t.texturesToUpdate=[],t.texturesToDestroy=[],t.BaseTextureCacheIdGenerator=0,t.BaseTexture=function(e,n){t.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=n||t.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this.id=t.BaseTextureCacheIdGenerator++,this.premultipliedAlpha=!0,this._glTextures=[],this._dirty=[];if(!e)return;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,t.texturesToUpdate.push(this);else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.width,r.height=r.source.height;for(var e=0;e<r._glTextures.length;e++)r._dirty[e]=!0;r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1},t.BaseTexture.prototype.constructor=t.BaseTexture,t.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete t.BaseTextureCache[this.imageUrl],delete t.TextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null):this.source&&this.source._pixiId&&delete t.BaseTextureCache[this.source._pixiId],this.source=null,t.texturesToDestroy.push(this)},t.BaseTexture.prototype.updateSourceImage=function(e){this.hasLoaded=!1,this.source.src=null,this.source.src=e},t.BaseTexture.fromImage=function(e,n,r){var i=t.BaseTextureCache[e];n===undefined&&e.indexOf("data:")===-1&&(n=!0);if(!i){var s=new Image;n&&(s.crossOrigin=""),s.src=e,i=new t.BaseTexture(s,r),i.imageUrl=e,t.BaseTextureCache[e]=i}return i},t.BaseTexture.fromCanvas=function(e,n){e._pixiId||(e._pixiId="canvas_"+t.TextureCacheIdGenerator++);var r=t.BaseTextureCache[e._pixiId];return r||(r=new t.BaseTexture(e,n),t.BaseTextureCache[e._pixiId]=r),r},t.TextureCache={},t.FrameCache={},t.TextureCacheIdGenerator=0,t.Texture=function(e,n){t.EventTarget.call(this),this.noFrame=!1,n||(this.noFrame=!0,n=new t.Rectangle(0,0,1,1)),e instanceof t.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=n,this.trim=null,this.valid=!1,this.scope=this,this._uvs=null,this.width=0,this.height=0,this.crop=new t.Rectangle(0,0,1,1);if(e.hasLoaded)this.noFrame&&(n=new t.Rectangle(0,0,e.width,e.height)),this.setFrame(n);else{var r=this;e.addEventListener("loaded",function(){r.onBaseTextureLoaded()})}},t.Texture.prototype.constructor=t.Texture,t.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new t.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame),this.scope.dispatchEvent({type:"update",content:this})},t.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},t.Texture.prototype.setFrame=function(e){this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height;if(!this.trim&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&t.Texture.frameUpdates.push(this)},t.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new t.TextureUvs);var e=this.crop,n=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=e.x/n,this._uvs.y0=e.y/r,this._uvs.x1=(e.x+e.width)/n,this._uvs.y1=e.y/r,this._uvs.x2=(e.x+e.width)/n,this._uvs.y2=(e.y+e.height)/r,this._uvs.x3=e.x/n,this._uvs.y3=(e.y+e.height)/r},t.Texture.fromImage=function(e,n,r){var i=t.TextureCache[e];return i||(i=new t.Texture(t.BaseTexture.fromImage(e,n,r)),t.TextureCache[e]=i),i},t.Texture.fromFrame=function(e){var n=t.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache ');return n},t.Texture.fromCanvas=function(e,n){var r=t.BaseTexture.fromCanvas(e,n);return new t.Texture(r)},t.Texture.addTextureToCache=function(e,n){t.TextureCache[n]=e},t.Texture.removeTextureFromCache=function(e){var n=t.TextureCache[e];return delete t.TextureCache[e],delete t.BaseTextureCache[e],n},t.Texture.frameUpdates=[],t.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},t.RenderTexture=function(e,n,r,i){t.EventTarget.call(this),this.width=e||100,this.height=n||100,this.frame=new t.Rectangle(0,0,this.width,this.height),this.crop=new t.Rectangle(0,0,this.width,this.height),this.baseTexture=new t.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.scaleMode=i||t.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,this.renderer=r||t.defaultRenderer;if(this.renderer.type===t.WEBGL_RENDERER){var s=this.renderer.gl;this.textureBuffer=new t.FilterTexture(s,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[s.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new t.Point(this.width/2,-this.height/2)}else this.render=this.renderCanvas,this.textureBuffer=new t.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,t.Texture.frameUpdates.push(this)},t.RenderTexture.prototype=Object.create(t.Texture.prototype),t.RenderTexture.prototype.constructor=t.RenderTexture,t.RenderTexture.prototype.resize=function(e,n,r){if(e===this.width&&n===this.height)return;this.width=this.frame.width=this.crop.width=e,this.height=this.frame.height=this.crop.height=n,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===t.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.textureBuffer.resize(this.width,this.height)},t.RenderTexture.prototype.clear=function(){this.renderer.type===t.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear()},t.RenderTexture.prototype.renderWebGL=function(e,n,r){var i=this.renderer.gl;i.colorMask(!0,!0,!0,!0),i.viewport(0,0,this.width,this.height),i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),r&&this.textureBuffer.clear();var s=e.children,o=e.worldTransform;e.worldTransform=t.RenderTexture.tempMatrix,e.worldTransform.d=-1,e.worldTransform.ty=this.projection.y*-2,n&&(e.worldTransform.tx=n.x,e.worldTransform.ty-=n.y);for(var u=0,a=s.length;u<a;u++)s[u].updateTransform();t.WebGLRenderer.updateTextures(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer),e.worldTransform=o,this.renderer.spriteBatch.dirty=!0},t.RenderTexture.prototype.renderCanvas=function(e,n,r){var i=e.children,s=e.worldTransform;e.worldTransform=t.RenderTexture.tempMatrix,n?(e.worldTransform.tx=n.x,e.worldTransform.ty=n.y):(e.worldTransform.tx=0,e.worldTransform.ty=0);for(var o=0,u=i.length;o<u;o++)i[o].updateTransform();r&&this.textureBuffer.clear();var a=this.textureBuffer.context;this.renderer.renderDisplayObject(e,a),a.setTransform(1,0,0,1,0,0),e.worldTransform=s},t.RenderTexture.tempMatrix=new t.Matrix,t.AssetLoader=function(e,n){t.EventTarget.call(this),this.assetURLs=e,this.crossorigin=n,this.loadersByType={jpg:t.ImageLoader,jpeg:t.ImageLoader,png:t.ImageLoader,gif:t.ImageLoader,webp:t.ImageLoader,json:t.JsonLoader,atlas:t.AtlasLoader,anim:t.SpineLoader,xml:t.BitmapFontLoader,fnt:t.BitmapFontLoader}},t.AssetLoader.prototype.constructor=t.AssetLoader,t.AssetLoader.prototype._getDataType=function(e){var t="data:",n=e.slice(0,t.length).toLowerCase();if(n===t){var r=e.slice(t.length),i=r.indexOf(",");if(i===-1)return null;var s=r.slice(0,i).split(";")[0];return!s||s.toLowerCase()==="text/plain"?"txt":s.split("/").pop().toLowerCase()}return null},t.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.content)}var e=this;this.loadCount=this.assetURLs.length;for(var n=0;n<this.assetURLs.length;n++){var r=this.assetURLs[n],i=this._getDataType(r);i||(i=r.split("?").shift().split(".").pop().toLowerCase());var s=this.loadersByType[i];if(!s)throw new Error(i+" is an unsupported file type");var o=new s(r,this.crossorigin);o.addEventListener("loaded",t),o.load()}},t.AssetLoader.prototype.onAssetLoaded=function(e){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this,loader:e}),this.onProgress&&this.onProgress(e),this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())},t.JsonLoader=function(e,n){t.EventTarget.call(this),this.url=e,this.crossorigin=n,this.baseUrl=e.replace(/[^\/]*$/,""),this.loaded=!1},t.JsonLoader.prototype.constructor=t.JsonLoader,t.JsonLoader.prototype.load=function(){var e=this;window.XDomainRequest&&e.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){e.onError()},this.ajaxRequest.ontimeout=function(){e.onError()},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest?this.ajaxRequest=new window.XMLHttpRequest:this.ajaxRequest=new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onload=function(){e.onJSONLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},t.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText){this.onError();return}this.json=JSON.parse(this.ajaxRequest.responseText);if(this.json.frames){var e=this,n=this.baseUrl+this.json.meta.image,r=new t.ImageLoader(n,this.crossorigin),i=this.json.frames;this.texture=r.texture.baseTexture,r.addEventListener("loaded",function(){e.onLoaded()});for(var o in i){var u=i[o].frame;if(u){t.TextureCache[o]=new t.Texture(this.texture,{x:u.x,y:u.y,width:u.w,height:u.h}),t.TextureCache[o].crop=new t.Rectangle(u.x,u.y,u.w,u.h);if(i[o].trimmed){var a=i[o].sourceSize,f=i[o].spriteSourceSize;t.TextureCache[o].trim=new t.Rectangle(f.x,f.y,a.w,a.h)}}}r.load()}else if(this.json.bones){var l=new s.SkeletonJson,c=l.readSkeletonData(this.json);t.AnimCache[this.url]=c,this.onLoaded()}else this.onLoaded()},t.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},t.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},t.AtlasLoader=function(e,n){t.EventTarget.call(this),this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.crossorigin=n,this.loaded=!1},t.AtlasLoader.constructor=t.AtlasLoader,t.AtlasLoader.prototype.load=function(){this.ajaxRequest=new t.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},t.AtlasLoader.prototype.onAtlasLoaded=function(){if(this.ajaxRequest.readyState===4)if(this.ajaxRequest.status===200||window.location.href.indexOf("http")===-1){this.atlas={meta:{image:[]},frames:[]};var e=this.ajaxRequest.responseText.split(/\r?\n/),n=-3,r=0,i=null,s=!1,o=0,u=0,a=this.onLoaded.bind(this);for(o=0;o<e.length;o++){e[o]=e[o].replace(/^\s+|\s+$/g,""),e[o]===""&&(s=o+1);if(e[o].length>0){if(s===o)this.atlas.meta.image.push(e[o]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),n=-3;else if(n>0)if(n%7===1)i!=null&&(this.atlas.frames[r][i.name]=i),i={name:e[o],frame:{}};else{var f=e[o].split(" ");if(n%7===3)i.frame.x=Number(f[1].replace(",","")),i.frame.y=Number(f[2]);else if(n%7===4)i.frame.w=Number(f[1].replace(",","")),i.frame.h=Number(f[2]);else if(n%7===5){var l={x:0,y:0,w:Number(f[1].replace(",","")),h:Number(f[2])};l.w>i.frame.w||l.h>i.frame.h?(i.trimmed=!0,i.realSize=l):i.trimmed=!1}}n++}}i!=null&&(this.atlas.frames[r][i.name]=i);if(this.atlas.meta.image.length>0){this.images=[];for(u=0;u<this.atlas.meta.image.length;u++){var c=this.baseUrl+this.atlas.meta.image[u],h=this.atlas.frames[u];this.images.push(new t.ImageLoader(c,this.crossorigin));for(o in h){var p=h[o].frame;p&&(t.TextureCache[o]=new t.Texture(this.images[u].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),h[o].trimmed&&(t.TextureCache[o].realSize=h[o].realSize,t.TextureCache[o].trim.x=0,t.TextureCache[o].trim.y=0))}}this.currentImageId=0;for(u=0;u<this.images.length;u++)this.images[u].addEventListener("loaded",a);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},t.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.dispatchEvent({type:"loaded",content:this}))},t.AtlasLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},t.SpriteSheetLoader=function(e,n){t.EventTarget.call(this),this.url=e,this.crossorigin=n,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},t.SpriteSheetLoader.prototype.constructor=t.SpriteSheetLoader,t.SpriteSheetLoader.prototype.load=function(){var e=this,n=new t.JsonLoader(this.url,this.crossorigin);n.addEventListener("loaded",function(t){e.json=t.content.json,e.onLoaded()}),n.load()},t.SpriteSheetLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},t.ImageLoader=function(e,n){t.EventTarget.call(this),this.texture=t.Texture.fromImage(e,n),this.frames=[]},t.ImageLoader.prototype.constructor=t.ImageLoader,t.ImageLoader.prototype.load=function(){if(!this.texture.baseTexture.hasLoaded){var e=this;this.texture.baseTexture.addEventListener("loaded",function(){e.onLoaded()})}else this.onLoaded()},t.ImageLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},t.ImageLoader.prototype.loadFramedSpriteSheet=function(e,n,r){this.frames=[];var i=Math.floor(this.texture.width/e),s=Math.floor(this.texture.height/n),o=0;for(var u=0;u<s;u++)for(var a=0;a<i;a++,o++){var f=new t.Texture(this.texture,{x:a*e,y:u*n,width:e,height:n});this.frames.push(f),r&&(t.TextureCache[r+"-"+o]=f)}if(!this.texture.baseTexture.hasLoaded){var l=this;this.texture.baseTexture.addEventListener("loaded",function(){l.onLoaded()})}else this.onLoaded()},t.BitmapFontLoader=function(e,n){t.EventTarget.call(this),this.url=e,this.crossorigin=n,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null},t.BitmapFontLoader.prototype.constructor=t.BitmapFontLoader,t.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new t.AjaxRequest;var e=this;this.ajaxRequest.onreadystatechange=function(){e.onXMLLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},t.BitmapFontLoader.prototype.onXMLLoaded=function(){if(this.ajaxRequest.readyState===4)if(this.ajaxRequest.status===200||window.location.protocol.indexOf("http")===-1){var e=this.ajaxRequest.responseXML;if(!e||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if(typeof window.DOMParser=="function"){var n=new DOMParser;e=n.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,e=r}var i=this.baseUrl+e.getElementsByTagName("page")[0].getAttribute("file"),s=new t.ImageLoader(i,this.crossorigin);this.texture=s.texture.baseTexture;var o={},u=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0];o.font=u.getAttribute("face"),o.size=parseInt(u.getAttribute("size"),10),o.lineHeight=parseInt(a.getAttribute("lineHeight"),10),o.chars={};var f=e.getElementsByTagName("char");for(var l=0;l<f.length;l++){var c=parseInt(f[l].getAttribute("id"),10),h=new t.Rectangle(parseInt(f[l].getAttribute("x"),10),parseInt(f[l].getAttribute("y"),10),parseInt(f[l].getAttribute("width"),10),parseInt(f[l].getAttribute("height"),10));o.chars[c]={xOffset:parseInt(f[l].getAttribute("xoffset"),10),yOffset:parseInt(f[l].getAttribute("yoffset"),10),xAdvance:parseInt(f[l].getAttribute("xadvance"),10),kerning:{},texture:t.TextureCache[c]=new t.Texture(this.texture,h)}}var p=e.getElementsByTagName("kerning");for(l=0;l<p.length;l++){var d=parseInt(p[l].getAttribute("first"),10),v=parseInt(p[l].getAttribute("second"),10),m=parseInt(p[l].getAttribute("amount"),10);o.chars[v].kerning[d]=m}t.BitmapText.fonts[o.font]=o;var g=this;s.addEventListener("loaded",function(){g.onLoaded()}),s.load()}},t.BitmapFontLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},t.SpineLoader=function(e,n){t.EventTarget.call(this),this.url=e,this.crossorigin=n,this.loaded=!1},t.SpineLoader.prototype.constructor=t.SpineLoader,t.SpineLoader.prototype.load=function(){var e=this,n=new t.JsonLoader(this.url,this.crossorigin);n.addEventListener("loaded",function(t){e.json=t.content.json,e.onLoaded()}),n.load()},t.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},t.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},t.AlphaMaskFilter=function(e){t.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:e},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mask.value.x=e.width,this.uniforms.mask.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},t.AlphaMaskFilter.prototype=Object.create(t.AbstractFilter.prototype),t.AlphaMaskFilter.prototype.constructor=t.AlphaMaskFilter,t.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(t.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}}),t.ColorMatrixFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},t.ColorMatrixFilter.prototype=Object.create(t.AbstractFilter.prototype),t.ColorMatrixFilter.prototype.constructor=t.ColorMatrixFilter,Object.defineProperty(t.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=e}}),t.GrayFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},t.GrayFilter.prototype=Object.create(t.AbstractFilter.prototype),t.GrayFilter.prototype.constructor=t.GrayFilter,Object.defineProperty(t.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}),t.DisplacementFilter=function(e){t.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:e},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=e.width,this.uniforms.mapDimensions.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},t.DisplacementFilter.prototype=Object.create(t.AbstractFilter.prototype),t.DisplacementFilter.prototype.constructor=t.DisplacementFilter,t.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(t.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}}),Object.defineProperty(t.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}}),Object.defineProperty(t.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}),t.PixelateFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},t.PixelateFilter.prototype=Object.create(t.AbstractFilter.prototype),t.PixelateFilter.prototype.constructor=t.PixelateFilter,Object.defineProperty(t.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.dirty=!0,this.uniforms.pixelSize.value=e}}),t.BlurXFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},t.BlurXFilter.prototype=Object.create(t.AbstractFilter.prototype),t.BlurXFilter.prototype.constructor=t.BlurXFilter,Object.defineProperty(t.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.dirty=!0,this.uniforms.blur.value=1/7e3*e}}),t.BlurYFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},t.BlurYFilter.prototype=Object.create(t.AbstractFilter.prototype),t.BlurYFilter.prototype.constructor=t.BlurYFilter,Object.defineProperty(t.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),t.BlurFilter=function(){this.blurXFilter=new t.BlurXFilter,this.blurYFilter=new t.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},Object.defineProperty(t.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}}),Object.defineProperty(t.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}}),Object.defineProperty(t.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}),t.InvertFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},t.InvertFilter.prototype=Object.create(t.AbstractFilter.prototype),t.InvertFilter.prototype.constructor=t.InvertFilter,Object.defineProperty(t.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}),t.SepiaFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},t.SepiaFilter.prototype=Object.create(t.AbstractFilter.prototype),t.SepiaFilter.prototype.constructor=t.SepiaFilter,Object.defineProperty(t.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}),t.TwistFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},t.TwistFilter.prototype=Object.create(t.AbstractFilter.prototype),t.TwistFilter.prototype.constructor=t.TwistFilter,Object.defineProperty(t.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.dirty=!0,this.uniforms.offset.value=e}}),Object.defineProperty(t.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(e){this.dirty=!0,this.uniforms.radius.value=e}}),Object.defineProperty(t.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),t.ColorStepFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},t.ColorStepFilter.prototype=Object.create(t.AbstractFilter.prototype),t.ColorStepFilter.prototype.constructor=t.ColorStepFilter,Object.defineProperty(t.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}),t.DotScreenFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},t.DotScreenFilter.prototype=Object.create(t.AbstractFilter.prototype),t.DotScreenFilter.prototype.constructor=t.DotScreenFilter,Object.defineProperty(t.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.dirty=!0,this.uniforms.scale.value=e}}),Object.defineProperty(t.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),t.CrossHatchFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},t.CrossHatchFilter.prototype=Object.create(t.AbstractFilter.prototype),t.CrossHatchFilter.prototype.constructor=t.BlurYFilter,Object.defineProperty(t.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),t.RGBSplitFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},t.RGBSplitFilter.prototype=Object.create(t.AbstractFilter.prototype),t.RGBSplitFilter.prototype.constructor=t.RGBSplitFilter,Object.defineProperty(t.RGBSplitFilter.prototype,"angle",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=t),exports.PIXI=t):typeof define!="undefined"&&define.amd?define("pixi",t):e.PIXI=t}).call(this);var _gsScope=typeof module!="undefined"&&module.exports&&typeof global!="undefined"?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){var t=[],n=e.length,r;for(r=0;r!==n;t.push(e[r++]));return t},i=function(e,t,r){n.call(this,e,t,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=i.prototype.render},s=1e-10,o=n._internals,u=o.isSelector,a=o.isArray,f=i.prototype=n.to({},.1,{}),l=[];i.version="1.13.2",f.constructor=i,f.kill()._gc=!1,i.killTweensOf=i.killDelayedCallsTo=n.killTweensOf,i.getTweensOf=n.getTweensOf,i.lagSmoothing=n.lagSmoothing,i.ticker=n.ticker,i.render=n.render,f.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},f.updateTo=function(e,t){var r=this.ratio,i;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(i in e)this.vars[i]=e[i];if(this._initted)if(t)this._initted=!1;else{this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this);if(this._time/this._duration>.998){var s=this._time;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._time>0){this._initted=!1,this._init();var o=1/(1-r),u=this._firstPT,a;while(u)a=u.s+u.c,u.c*=o,u.s=a-u.c,u=u._next}}return this},f.render=function(e,t,n){this._initted||this._duration===0&&this.vars.repeat&&this.invalidate();var r=this._dirty?this.totalDuration():this._totalDuration,i=this._time,u=this._totalTime,a=this._cycle,f=this._duration,c=this._rawPrevTime,h,p,d,v,m,g,y,b,w;if(e>=r)this._totalTime=r,this._cycle=this._repeat,this._yoyo&&(this._cycle&1)!==0?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=f,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(h=!0,p="onComplete"),f===0&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(e===0||c<0||c===s)&&c!==e&&(n=!0,c>s&&(p="onReverseComplete")),this._rawPrevTime=b=!t||e||c===e?e:s);else if(e<1e-7){this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(u!==0||f===0&&c>0&&c!==s)p="onReverseComplete",h=this._reversed;e<0&&(this._active=!1,f===0&&(this._initted||!this.vars.lazy||n)&&(c>=0&&(n=!0),this._rawPrevTime=b=!t||e||c===e?e:s)),this._initted||(n=!0)}else{this._totalTime=this._time=e,this._repeat!==0&&(v=f+this._repeatDelay,this._cycle=this._totalTime/v>>0,this._cycle!==0&&this._cycle===this._totalTime/v&&this._cycle--,this._time=this._totalTime-this._cycle*v,this._yoyo&&(this._cycle&1)!==0&&(this._time=f-this._time),this._time>f?this._time=f:this._time<0&&(this._time=0));if(this._easeType){m=this._time/f,g=this._easeType,y=this._easePower;if(g===1||g===3&&m>=.5)m=1-m;g===3&&(m*=2),y===1?m*=m:y===2?m*=m*m:y===3?m*=m*m*m:y===4&&(m*=m*m*m*m),g===1?this.ratio=1-m:g===2?this.ratio=m:this._time/f<.5?this.ratio=m/2:this.ratio=1-m/2}else this.ratio=this._ease.getRatio(this._time/f)}if(i===this._time&&!n&&a===this._cycle){u!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l));return}if(!this._initted){this._init();if(!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)){this._time=i,this._totalTime=u,this._rawPrevTime=c,this._cycle=a,o.lazyTweens.push(this),this._lazy=[e,t];return}this._time&&!h?this.ratio=this._ease.getRatio(this._time/f):h&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(this._time===0?0:1))}this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==i&&e>=0&&(this._active=!0),u===0&&(this._initted===2&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,n):p||(p="_dummyGS")),this.vars.onStart&&(this._totalTime!==0||f===0)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l))),d=this._firstPT;while(d)d.f?d.t[d.p](d.c*this.ratio+d.s):d.t[d.p]=d.c*this.ratio+d.s,d=d._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._totalTime!==u||h)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l)),this._cycle!==a&&(t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||l)),p&&(!this._gc||n)&&(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),h&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[p]&&this.vars[p].apply(this.vars[p+"Scope"]||this,this.vars[p+"Params"]||l),f===0&&this._rawPrevTime===s&&b!==s&&(this._rawPrevTime=0))},i.to=function(e,t,n){return new i(e,t,n)},i.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=n.immediateRender!=0,new i(e,t,n)},i.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,new i(e,t,r)},i.staggerTo=i.allTo=function(e,t,s,o,f,c,h){o=o||0;var p=s.delay||0,d=[],v=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),f.apply(h||this,c||l)},m,g,y,b;a(e)||(typeof e=="string"&&(e=n.selector(e)||e),u(e)&&(e=r(e))),m=e.length;for(y=0;y<m;y++){g={};for(b in s)g[b]=s[b];g.delay=p,y===m-1&&f&&(g.onComplete=v),d[y]=new i(e[y],t,g),p+=o}return d},i.staggerFrom=i.allFrom=function(e,t,n,r,s,o,u){return n.runBackwards=!0,n.immediateRender=n.immediateRender!=0,i.staggerTo(e,t,n,r,s,o,u)},i.staggerFromTo=i.allFromTo=function(e,t,n,r,s,o,u,a){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,i.staggerTo(e,t,r,s,o,u,a)},i.delayedCall=function(e,t,n,r,s){return new i(t,0,{delay:e,onComplete:t,onCompleteParams:n,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:n,onReverseCompleteScope:r,immediateRender:!1,useFrames:s,overwrite:0})},i.set=function(e,t){return new i(e,0,t)},i.isTweening=function(e){return n.getTweensOf(e,!0).length>0};var c=function(e,t){var r=[],i=0,s=e._first;while(s)s instanceof n?r[i++]=s:(t&&(r[i++]=s),r=r.concat(c(s,t)),i=r.length),s=s._next;return r},h=i.getAllTweens=function(t){return c(e._rootTimeline,t).concat(c(e._rootFramesTimeline,t))};i.killAll=function(e,n,r,i){n==null&&(n=!0),r==null&&(r=!0);var s=h(i!=0),o=s.length,u=n&&r&&i,a,f,l;for(l=0;l<o;l++){f=s[l];if(u||f instanceof t||(a=f.target===f.vars.onComplete)&&r||n&&!a)e?f.totalTime(f._reversed?0:f.totalDuration()):f._enabled(!1,!1)}},i.killChildTweensOf=function(e,t){if(e==null)return;var s=o.tweenLookup,f,l,c,h,p;typeof e=="string"&&(e=n.selector(e)||e),u(e)&&(e=r(e));if(a(e)){h=e.length;while(--h>-1)i.killChildTweensOf(e[h],t);return}f=[];for(c in s){l=s[c].target.parentNode;while(l)l===e&&(f=f.concat(s[c].tweens)),l=l.parentNode}p=f.length;for(h=0;h<p;h++)t&&f[h].totalTime(f[h].totalDuration()),f[h]._enabled(!1,!1)};var p=function(e,n,r,i){n=n!==!1,r=r!==!1,i=i!==!1;var s=h(i),o=n&&r&&i,u=s.length,a,f;while(--u>-1)f=s[u],(o||f instanceof t||(a=f.target===f.vars.onComplete)&&r||n&&!a)&&f.paused(e)};return i.pauseAll=function(e,t,n){p(!0,e,t,n)},i.resumeAll=function(e,t,n){p(!1,e,t,n)},i.globalTimeScale=function(t){var r=e._rootTimeline,i=n.ticker.time;return arguments.length?(t=t||s,r._startTime=i-(i-r._startTime)*r._timeScale/t,r=e._rootFramesTimeline,i=n.ticker.frame,r._startTime=i-(i-r._startTime)*r._timeScale/t,r._timeScale=e._rootTimeline._timeScale=t,t):r._timeScale},f.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},f.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},f.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&(this._cycle&1)!==0?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):this._repeat!==0&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},f.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},f.totalDuration=function(e){return arguments.length?this._repeat===-1?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},f.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},f.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},f.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},i},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n=this.vars,r,i;for(i in n)r=n[i],u(r)&&r.join("").indexOf("{self}")!==-1&&(n[i]=this._swapSelfInParams(r));u(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},i=1e-10,s=n._internals,o=s.isSelector,u=s.isArray,a=s.lazyTweens,f=s.lazyRender,l=[],c=_gsScope._gsDefine.globals,h=function(e){var t={},n;for(n in e)t[n]=e[n];return t},p=function(e,t,n,r){var i=e._timeline._totalTime;if(t||!this._forcingPlayhead)e._timeline.pause(e._startTime),t&&t.apply(r||e._timeline,n||l),this._forcingPlayhead&&e._timeline.seek(i)},d=function(e){var t=[],n=e.length,r;for(r=0;r!==n;t.push(e[r++]));return t},v=r.prototype=new t;return r.version="1.13.2",v.constructor=r,v.kill()._gc=v._forcingPlayhead=!1,v.to=function(e,t,r,i){var s=r.repeat&&c.TweenMax||n;return t?this.add(new s(e,t,r),i):this.set(e,r,i)},v.from=function(e,t,r,i){return this.add((r.repeat&&c.TweenMax||n).from(e,t,r),i)},v.fromTo=function(e,t,r,i,s){var o=i.repeat&&c.TweenMax||n;return t?this.add(o.fromTo(e,t,r,i),s):this.set(e,i,s)},v.staggerTo=function(e,t,i,s,u,a,f,l){var c=new r({onComplete:a,onCompleteParams:f,onCompleteScope:l,smoothChildTiming:this.smoothChildTiming}),p;typeof e=="string"&&(e=n.selector(e)||e),o(e)&&(e=d(e)),s=s||0;for(p=0;p<e.length;p++)i.startAt&&(i.startAt=h(i.startAt)),c.to(e[p],t,h(i),p*s);return this.add(c,u)},v.staggerFrom=function(e,t,n,r,i,s,o,u){return n.immediateRender=n.immediateRender!=0,n.runBackwards=!0,this.staggerTo(e,t,n,r,i,s,o,u)},v.staggerFromTo=function(e,t,n,r,i,s,o,u,a){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,this.staggerTo(e,t,r,i,s,o,u,a)},v.call=function(e,t,r,i){return this.add(n.delayedCall(0,e,t,r),i)},v.set=function(e,t,r){return r=this._parseTimeOrLabel(r,0,!0),t.immediateRender==null&&(t.immediateRender=r===this._time&&!this._paused),this.add(new n(e,0,t),r)},r.exportRoot=function(e,t){e=e||{},e.smoothChildTiming==null&&(e.smoothChildTiming=!0);var i=new r(e),s=i._timeline,o,u;t==null&&(t=!0),s._remove(i,!0),i._startTime=0,i._rawPrevTime=i._time=i._totalTime=s._time,o=s._first;while(o)u=o._next,(!t||!(o instanceof n&&o.target===o.vars.onComplete))&&i.add(o,o._startTime-o._delay),o=u;return s.add(i,0),i},v.add=function(i,s,o,a){var f,l,c,h,p,d;typeof s!="number"&&(s=this._parseTimeOrLabel(s,0,!0,i));if(!(i instanceof e)){if(i instanceof Array||i&&i.push&&u(i)){o=o||"normal",a=a||0,f=s,l=i.length;for(c=0;c<l;c++)u(h=i[c])&&(h=new r({tweens:h})),this.add(h,f),typeof h!="string"&&typeof h!="function"&&(o==="sequence"?f=h._startTime+h.totalDuration()/h._timeScale:o==="start"&&(h._startTime-=h.delay())),f+=a;return this._uncache(!0)}if(typeof i=="string")return this.addLabel(i,s);if(typeof i!="function")throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string.";i=n.delayedCall(0,i)}t.prototype.add.call(this,i,s);if(this._gc||this._time===this._duration)if(!this._paused&&this._duration<this.duration()){p=this,d=p.rawTime()>i._startTime;while(p._timeline)d&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline}return this},v.remove=function(t){if(t instanceof e)return this._remove(t,!1);if(t instanceof Array||t&&t.push&&u(t)){var n=t.length;while(--n>-1)this.remove(t[n]);return this}return typeof t=="string"?this.removeLabel(t):this.kill(null,t)},v._remove=function(e,n){t.prototype._remove.call(this,e,n);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},v.insert=v.insertMultiple=function(e,t,n,r){return this.add(e,t||0,n,r)},v.appendMultiple=function(e,t,n,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,r)},v.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},v.addPause=function(e,t,n,r){return this.call(p,["{self}",t,n,r],this,e)},v.removeLabel=function(e){return delete this._labels[e],this},v.getLabelTime=function(e){return this._labels[e]!=null?this._labels[e]:-1},v._parseTimeOrLabel=function(t,n,r,i){var s;if(i instanceof e&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&u(i))){s=i.length;while(--s>-1)i[s]instanceof e&&i[s].timeline===this&&this.remove(i[s])}if(typeof n=="string")return this._parseTimeOrLabel(n,r&&typeof t=="number"&&this._labels[n]==null?t-this.duration():0,r);n=n||0;if(typeof t!="string"||!isNaN(t)&&this._labels[t]==null)t==null&&(t=this.duration());else{s=t.indexOf("=");if(s===-1)return this._labels[t]==null?r?this._labels[t]=this.duration()+n:n:this._labels[t]+n;n=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,r):this.duration()}return Number(t)+n},v.seek=function(e,t){return this.totalTime(typeof e=="number"?e:this._parseTimeOrLabel(e),t!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(e,t){return this.play(e,t)},v.gotoAndStop=function(e,t){return this.pause(e,t)},v.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r=this._dirty?this.totalDuration():this._totalDuration,s=this._time,o=this._startTime,u=this._timeScale,c=this._paused,h,p,d,v,m;if(e>=r)this._totalTime=this._time=r,this._reversed||this._hasPausedChild()||(p=!0,v="onComplete",this._duration===0&&(e===0||this._rawPrevTime<0||this._rawPrevTime===i)&&this._rawPrevTime!==e&&this._first&&(m=!0,this._rawPrevTime>i&&(v="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,e=r+1e-4;else if(e<1e-7){this._totalTime=this._time=0;if(s!==0||this._duration===0&&this._rawPrevTime!==i&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0))v="onReverseComplete",p=this._reversed;e<0?(this._active=!1,this._rawPrevTime>=0&&this._first&&(m=!0),this._rawPrevTime=e):(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,e=0,this._initted||(m=!0))}else this._totalTime=this._time=this._rawPrevTime=e;if((this._time===s||!this._first)&&!n&&!m)return;this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==s&&e>0&&(this._active=!0),s===0&&this.vars.onStart&&this._time!==0&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l));if(this._time>=s){h=this._first;while(h){d=h._next;if(this._paused&&!c)break;if(h._active||h._startTime<=this._time&&!h._paused&&!h._gc)h._reversed?h.render((h._dirty?h.totalDuration():h._totalDuration)-(e-h._startTime)*h._timeScale,t,n):h.render((e-h._startTime)*h._timeScale,t,n);h=d}}else{h=this._last;while(h){d=h._prev;if(this._paused&&!c)break;if(h._active||h._startTime<=s&&!h._paused&&!h._gc)h._reversed?h.render((h._dirty?h.totalDuration():h._totalDuration)-(e-h._startTime)*h._timeScale,t,n):h.render((e-h._startTime)*h._timeScale,t,n);h=d}}this._onUpdate&&(t||(a.length&&f(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l))),v&&!this._gc&&(o===this._startTime||u!==this._timeScale)&&(this._time===0||r>=this.totalDuration())&&(p&&(a.length&&f(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[v]&&this.vars[v].apply(this.vars[v+"Scope"]||this,this.vars[v+"Params"]||l))},v._hasPausedChild=function(){var e=this._first;while(e){if(e._paused||e instanceof r&&e._hasPausedChild())return!0;e=e._next}return!1},v.getChildren=function(e,t,r,i){i=i||-9999999999;var s=[],o=this._first,u=0;while(o)o._startTime<i||(o instanceof n?t!==!1&&(s[u++]=o):(r!==!1&&(s[u++]=o),e!==!1&&(s=s.concat(o.getChildren(!0,t,r)),u=s.length))),o=o._next;return s},v.getTweensOf=function(e,t){var r=this._gc,i=[],s=0,o,u;r&&this._enabled(!0,!0),o=n.getTweensOf(e),u=o.length;while(--u>-1)if(o[u].timeline===this||t&&this._contains(o[u]))i[s++]=o[u];return r&&this._enabled(!1,!0),i},v._contains=function(e){var t=e.timeline;while(t){if(t===this)return!0;t=t.timeline}return!1},v.shiftChildren=function(e,t,n){n=n||0;var r=this._first,i=this._labels,s;while(r)r._startTime>=n&&(r._startTime+=e),r=r._next;if(t)for(s in i)i[s]>=n&&(i[s]+=e);return this._uncache(!0)},v._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=n.length,i=!1;while(--r>-1)n[r]._kill(e,t)&&(i=!0);return i},v.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;this._time=this._totalTime=0;while(--n>-1)t[n]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){var t=this._first;while(t)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},v._enabled=function(e,n){if(e===this._gc){var r=this._first;while(r)r._enabled(e,!0),r=r._next}return t.prototype._enabled.call(this,e,n)},v.totalTime=function(t,n,r){this._forcingPlayhead=!0;var i=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},v.duration=function(e){return arguments.length?(this.duration()!==0&&e!==0&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(e){if(!arguments.length){if(this._dirty){var t=0,n=this._last,r=999999999999,i,s;while(n)i=n._prev,n._dirty&&n.totalDuration(),n._startTime>r&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):r=n._startTime,n._startTime<0&&!n._paused&&(t-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),r=0),s=n._startTime+n._totalDuration/n._timeScale,s>t&&(t=s),n=i;this._duration=this._totalDuration=t,this._dirty=!1}return this._totalDuration}return this.totalDuration()!==0&&e!==0&&this.timeScale(this._totalDuration/e),this},v.usesFrames=function(){var t=this._timeline;while(t._timeline)t=t._timeline;return t===e._rootFramesTimeline},v.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var r=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},i=1e-10,s=[],o=t._internals,u=o.lazyTweens,a=o.lazyRender,f=new n(null,null,1,0),l=r.prototype=new e;return l.constructor=r,l.kill()._gc=!1,r.version="1.13.2",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},l.addCallback=function(e,n,r,i){return this.add(t.delayedCall(0,e,r,i),n)},l.removeCallback=function(e,t){if(e)if(t==null)this._kill(null,e);else{var n=this.getTweensOf(e,!1),r=n.length,i=this._parseTimeOrLabel(t);while(--r>-1)n[r]._startTime===i&&n[r]._enabled(!1,!1)}return this},l.tweenTo=function(e,n){n=n||{};var r={ease:f,overwrite:n.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1},i,o,u;for(o in n)r[o]=n[o];return r.time=this._parseTimeOrLabel(e),i=Math.abs(Number(r.time)-this._time)/this._timeScale||.001,u=new t(this,i,r),r.onStart=function(){u.target.paused(!0),u.vars.time!==u.target.time()&&i===u.duration()&&u.duration(Math.abs(u.vars.time-u.target.time())/u.target._timeScale),n.onStart&&n.onStart.apply(n.onStartScope||u,n.onStartParams||s)},u},l.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],onCompleteScope:this},n.immediateRender=n.immediateRender!==!1;var r=this.tweenTo(t,n);return r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)},l.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r=this._dirty?this.totalDuration():this._totalDuration,o=this._duration,f=this._time,l=this._totalTime,c=this._startTime,h=this._timeScale,p=this._rawPrevTime,d=this._paused,v=this._cycle,m,g,y,b,w,E;if(e>=r)this._locked||(this._totalTime=r,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,b="onComplete",this._duration===0&&(e===0||p<0||p===i)&&p!==e&&this._first&&(w=!0,p>i&&(b="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,this._yoyo&&(this._cycle&1)!==0?this._time=e=0:(this._time=o,e=o+1e-4);else if(e<1e-7){this._locked||(this._totalTime=this._cycle=0),this._time=0;if(f!==0||o===0&&p!==i&&(p>0||e<0&&p>=0)&&!this._locked)b="onReverseComplete",g=this._reversed;e<0?(this._active=!1,p>=0&&this._first&&(w=!0),this._rawPrevTime=e):(this._rawPrevTime=o||!t||e||this._rawPrevTime===e?e:i,e=0,this._initted||(w=!0))}else o===0&&p<0&&(w=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,this._repeat!==0&&(E=o+this._repeatDelay,this._cycle=this._totalTime/E>>0,this._cycle!==0&&this._cycle===this._totalTime/E&&this._cycle--,this._time=this._totalTime-this._cycle*E,this._yoyo&&(this._cycle&1)!==0&&(this._time=o-this._time),this._time>o?(this._time=o,e=o+1e-4):this._time<0?this._time=e=0:e=this._time));if(this._cycle!==v&&!this._locked){var S=this._yoyo&&(v&1)!==0,x=S===(this._yoyo&&(this._cycle&1)!==0),T=this._totalTime,N=this._cycle,C=this._rawPrevTime,k=this._time;this._totalTime=v*o,this._cycle<v?S=!S:this._totalTime+=o,this._time=f,this._rawPrevTime=o===0?p-1e-4:p,this._cycle=v,this._locked=!0,f=S?0:o,this.render(f,t,o===0),t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||s),x&&(f=S?o+1e-4:-0.0001,this.render(f,!0,!1)),this._locked=!1;if(this._paused&&!d)return;this._time=k,this._totalTime=T,this._cycle=N,this._rawPrevTime=C}if((this._time===f||!this._first)&&!n&&!w){l!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s));return}this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==l&&e>0&&(this._active=!0),l===0&&this.vars.onStart&&this._totalTime!==0&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s));if(this._time>=f){m=this._first;while(m){y=m._next;if(this._paused&&!d)break;if(m._active||m._startTime<=this._time&&!m._paused&&!m._gc)m._reversed?m.render((m._dirty?m.totalDuration():m._totalDuration)-(e-m._startTime)*m._timeScale,t,n):m.render((e-m._startTime)*m._timeScale,t,n);m=y}}else{m=this._last;while(m){y=m._prev;if(this._paused&&!d)break;if(m._active||m._startTime<=f&&!m._paused&&!m._gc)m._reversed?m.render((m._dirty?m.totalDuration():m._totalDuration)-(e-m._startTime)*m._timeScale,t,n):m.render((e-m._startTime)*m._timeScale,t,n);m=y}}this._onUpdate&&(t||(u.length&&a(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s))),b&&(this._locked||!this._gc&&(c===this._startTime||h!==this._timeScale)&&(this._time===0||r>=this.totalDuration())&&(g&&(u.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[b]&&this.vars[b].apply(this.vars[b+"Scope"]||this,this.vars[b+"Params"]||s)))},l.getActive=function(e,t,n){e==null&&(e=!0),t==null&&(t=!0),n==null&&(n=!1);var r=[],i=this.getChildren(e,t,n),s=0,o=i.length,u,a;for(u=0;u<o;u++)a=i[u],a.isActive()&&(r[s++]=a);return r},l.getLabelAfter=function(e){e||e!==0&&(e=this._time);var t=this.getLabelsArray(),n=t.length,r;for(r=0;r<n;r++)if(t[r].time>e)return t[r].name;return null},l.getLabelBefore=function(e){e==null&&(e=this._time);var t=this.getLabelsArray(),n=t.length;while(--n>-1)if(t[n].time<e)return t[n].name;return null},l.getLabelsArray=function(){var e=[],t=0,n;for(n in this._labels)e[t++]={time:this._labels[n],name:n};return e.sort(function(e,t){return e.time-t.time}),e},l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},l.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&(this._cycle&1)!==0?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):this._repeat!==0&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},l.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var e=180/Math.PI,t=[],n=[],r=[],i={},s=function(e,t,n,r){this.a=e,this.b=t,this.c=n,this.d=r,this.da=r-e,this.ca=n-e,this.ba=t-e},o=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",u=function(e,t,n,r){var i={a:e},s={},o={},u={c:r},a=(e+t)/2,f=(t+n)/2,l=(n+r)/2,c=(a+f)/2,h=(f+l)/2,p=(h-c)/8;return i.b=a+(e-a)/4,s.b=c+p,i.c=s.a=(i.b+s.b)/2,s.c=o.a=(c+h)/2,o.b=h-p,u.b=l+(r-l)/4,o.c=u.a=(o.b+u.b)/2,[i,s,o,u]},a=function(e,i,s,o,a){var f=e.length-1,l=0,c=e[0].a,h,p,d,v,m,g,y,b,w,E,S,x,T;for(h=0;h<f;h++)m=e[l],p=m.a,d=m.d,v=e[l+1].d,a?(S=t[h],x=n[h],T=(x+S)*i*.25/(o?.5:r[h]||.5),g=d-(d-p)*(o?i*.5:S!==0?T/S:0),y=d+(v-d)*(o?i*.5:x!==0?T/x:0),b=d-(g+((y-g)*(S*3/(S+x)+.5)/4||0))):(g=d-(d-p)*i*.5,y=d+(v-d)*i*.5,b=d-(g+y)/2),g+=b,y+=b,m.c=w=g,h!==0?m.b=c:m.b=c=m.a+(m.c-m.a)*.6,m.da=d-p,m.ca=w-p,m.ba=c-p,s?(E=u(p,c,w,d),e.splice(l,1,E[0],E[1],E[2],E[3]),l+=4):l++,c=y;m=e[l],m.b=c,m.c=c+(m.d-c)*.4,m.da=m.d-m.a,m.ca=m.c-m.a,m.ba=c-m.a,s&&(E=u(m.a,c,m.c,m.d),e.splice(l,1,E[0],E[1],E[2],E[3]))},f=function(e,r,i,o){var u=[],a,f,l,c,h,p;if(o){e=[o].concat(e),f=e.length;while(--f>-1)typeof (p=e[f][r])=="string"&&p.charAt(1)==="="&&(e[f][r]=o[r]+Number(p.charAt(0)+p.substr(2)))}a=e.length-2;if(a<0)return u[0]=new s(e[0][r],0,0,e[a<-1?0:1][r]),u;for(f=0;f<a;f++)l=e[f][r],c=e[f+1][r],u[f]=new s(l,0,0,c),i&&(h=e[f+2][r],t[f]=(t[f]||0)+(c-l)*(c-l),n[f]=(n[f]||0)+(h-c)*(h-c));return u[f]=new s(e[f][r],0,0,e[f+1][r]),u},l=function(e,s,u,l,c,h){var p={},d=[],v=h||e[0],m,g,y,b,w,E,S,x;c=typeof c=="string"?","+c+",":o,s==null&&(s=1);for(g in e[0])d.push(g);if(e.length>1){x=e[e.length-1],S=!0,m=d.length;while(--m>-1){g=d[m];if(Math.abs(v[g]-x[g])>.05){S=!1;break}}S&&(e=e.concat(),h&&e.unshift(h),e.push(e[1]),h=e[e.length-3])}t.length=n.length=r.length=0,m=d.length;while(--m>-1)g=d[m],i[g]=c.indexOf(","+g+",")!==-1,p[g]=f(e,g,i[g],h);m=t.length;while(--m>-1)t[m]=Math.sqrt(t[m]),n[m]=Math.sqrt(n[m]);if(!l){m=d.length;while(--m>-1)if(i[g]){y=p[d[m]],E=y.length-1;for(b=0;b<E;b++)w=y[b+1].da/n[b]+y[b].da/t[b],r[b]=(r[b]||0)+w*w}m=r.length;while(--m>-1)r[m]=Math.sqrt(r[m])}m=d.length,b=u?4:1;while(--m>-1)g=d[m],y=p[g],a(y,s,u,l,i[g]),S&&(y.splice(0,b),y.splice(y.length-b,b));return p},c=function(e,t,n){t=t||"soft";var r={},i=t==="cubic"?3:2,o=t==="soft",u=[],a,f,l,c,h,p,d,v,m,g,y;o&&n&&(e=[n].concat(e));if(e==null||e.length<i+1)throw"invalid Bezier data";for(m in e[0])u.push(m);p=u.length;while(--p>-1){m=u[p],r[m]=h=[],g=0,v=e.length;for(d=0;d<v;d++)a=n==null?e[d][m]:typeof (y=e[d][m])=="string"&&y.charAt(1)==="="?n[m]+Number(y.charAt(0)+y.substr(2)):Number(y),o&&d>1&&d<v-1&&(h[g++]=(a+h[g-2])/2),h[g++]=a;v=g-i+1,g=0;for(d=0;d<v;d+=i)a=h[d],f=h[d+1],l=h[d+2],c=i===2?0:h[d+3],h[g++]=y=i===3?new s(a,f,l,c):new s(a,(2*f+a)/3,(2*f+l)/3,l);h.length=g}return r},h=function(e,t,n){var r=1/n,i=e.length,s,o,u,a,f,l,c,h,p,d,v;while(--i>-1){d=e[i],u=d.a,a=d.d-u,f=d.c-u,l=d.b-u,s=o=0;for(h=1;h<=n;h++)c=r*h,p=1-c,s=o-(o=(c*c*a+3*p*(c*f+p*l))*c),v=i*n+h-1,t[v]=(t[v]||0)+s*s}},p=function(e,t){t=t>>0||6;var n=[],r=[],i=0,s=0,o=t-1,u=[],a=[],f,l,c,p;for(f in e)h(e[f],n,t);c=n.length;for(l=0;l<c;l++)i+=Math.sqrt(n[l]),p=l%t,a[p]=i,p===o&&(s+=i,p=l/t>>0,u[p]=a,r[p]=s,i=0,a=[]);return{length:s,lengths:r,segments:u}},d=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=t.timeResolution==null?6:parseInt(t.timeResolution,10);var r=t.values||[],i={},s=r[0],o=t.autoRotate||n.vars.orientToBezier,u,a,f,h,d;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",o===!0?0:Number(o)||0]]:null;for(u in s)this._props.push(u);f=this._props.length;while(--f>-1)u=this._props[f],this._overwriteProps.push(u),a=this._func[u]=typeof e[u]=="function",i[u]=a?e[u.indexOf("set")||typeof e["get"+u.substr(3)]!="function"?u:"get"+u.substr(3)]():parseFloat(e[u]),d||i[u]!==r[0][u]&&(d=i);this._beziers=t.type!=="cubic"&&t.type!=="quadratic"&&t.type!=="soft"?l(r,isNaN(t.curviness)?1:t.curviness,!1,t.type==="thruBasic",t.correlate,d):c(r,t.type,i),this._segCount=this._beziers[u].length;if(this._timeRes){var v=p(this._beziers,this._timeRes);this._length=v.length,this._lengths=v.lengths,this._segments=v.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(o=this._autoRotate){this._initialRotations=[],o[0]instanceof Array||(this._autoRotate=o=[o]),f=o.length;while(--f>-1){for(h=0;h<3;h++)u=o[f][h],this._func[u]=typeof e[u]=="function"?e[u.indexOf("set")||typeof e["get"+u.substr(3)]!="function"?u:"get"+u.substr(3)]:!1;u=o[f][2],this._initialRotations[f]=this._func[u]?this._func[u].call(this._target):this._target[u]}}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(t){var n=this._segCount,r=this._func,i=this._target,s=t!==this._startRatio,o,u,a,f,l,c,h,p,d,v;if(!this._timeRes)o=t<0?0:t>=1?n-1:n*t>>0,c=(t-o*(1/n))*n;else{d=this._lengths,v=this._curSeg,t*=this._length,a=this._li;if(t>this._l2&&a<n-1){p=n-1;while(a<p&&(this._l2=d[++a])<=t);this._l1=d[a-1],this._li=a,this._curSeg=v=this._segments[a],this._s2=v[this._s1=this._si=0]}else if(t<this._l1&&a>0){while(a>0&&(this._l1=d[--a])>=t);a===0&&t<this._l1?this._l1=0:a++,this._l2=d[a],this._li=a,this._curSeg=v=this._segments[a],this._s1=v[(this._si=v.length-1)-1]||0,this._s2=v[this._si]}o=a,t-=this._l1,a=this._si;if(t>this._s2&&a<v.length-1){p=v.length-1;while(a<p&&(this._s2=v[++a])<=t);this._s1=v[a-1],this._si=a}else if(t<this._s1&&a>0){while(a>0&&(this._s1=v[--a])>=t);a===0&&t<this._s1?this._s1=0:a++,this._s2=v[a],this._si=a}c=(a+(t-this._s1)/(this._s2-this._s1))*this._prec}u=1-c,a=this._props.length;while(--a>-1)f=this._props[a],l=this._beziers[f][o],h=(c*c*l.da+3*u*(c*l.ca+u*l.ba))*c+l.a,this._round[f]&&(h=Math.round(h)),r[f]?i[f](h):i[f]=h;if(this._autoRotate){var m=this._autoRotate,g,y,b,w,E,S,x;a=m.length;while(--a>-1)f=m[a][2],S=m[a][3]||0,x=m[a][4]===!0?1:e,l=this._beziers[m[a][0]],g=this._beziers[m[a][1]],l&&g&&(l=l[o],g=g[o],y=l.a+(l.b-l.a)*c,w=l.b+(l.c-l.b)*c,y+=(w-y)*c,w+=(l.c+(l.d-l.c)*c-w)*c,b=g.a+(g.b-g.a)*c,E=g.b+(g.c-g.b)*c,b+=(E-b)*c,E+=(g.c+(g.d-g.c)*c-E)*c,h=s?Math.atan2(E-b,w-y)*x+S:this._initialRotations[a],r[f]?i[f](h):i[f]=h)}}}),v=d.prototype;d.bezierThrough=l,d.cubicToQuadratic=u,d._autoCSS=!0,d.quadraticToCubic=function(e,t,n){return new s(e,(2*t+e)/3,(2*t+n)/3,n)},d._cssRegister=function(){var e=_gsScope._gsDefine.globals.CSSPlugin;if(!e)return;var t=e._internals,n=t._parseToProxy,r=t._setPluginRatio,i=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,s,o,u,a){t instanceof Array&&(t={values:t}),a=new d;var f=t.values,l=f.length-1,c=[],h={},p,v,m;if(l<0)return u;for(p=0;p<=l;p++)m=n(e,f[p],o,u,a,l!==p),c[p]=m.end;for(v in t)h[v]=t[v];return h.values=c,u=new i(e,"bezier",0,0,m.pt,2),u.data=m,u.plugin=a,u.setRatio=r,h.autoRotate===0&&(h.autoRotate=!0),h.autoRotate&&!(h.autoRotate instanceof Array)&&(p=h.autoRotate===!0?0:Number(h.autoRotate),h.autoRotate=m.end.left!=null?[["left","top","rotation",p,!1]]:m.end.x!=null?[["x","y","rotation",p,!1]]:!1),h.autoRotate&&(o._transform||o._enableTransforms(!1),m.autoRotate=o._target._gsTransform),a._onInitTween(m.proxy,h,o._tween),u}})},v._roundProps=function(e,t){var n=this._overwriteProps,r=n.length;while(--r>-1)if(e[n[r]]||e.bezier||e.bezierThrough)this._round[n[r]]=t},v._kill=function(e){var t=this._props,n,r;for(n in this._beziers)if(n in e){delete this._beziers[n],delete this._func[n],r=t.length;while(--r>-1)t[r]===n&&t.splice(r,1)}return this._super._kill.call(this,e)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var n=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=n.prototype.setRatio},r,i,s,o,u={},a=n.prototype=new e("css");a.constructor=n,n.version="1.13.2",n.API=2,n.defaultTransformPerspective=0,n.defaultSkewType="compensated",a="px",n.suffixMap={top:a,right:a,bottom:a,left:a,width:a,height:a,fontSize:a,padding:a,margin:a,perspective:a,lineHeight:""};var f=/(?:\d|\-\d|\.\d|\-\.\d)+/g,l=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,c=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,h=/[^\d\-\.]/g,p=/(?:\d|\-|\+|=|#|\.)*/g,d=/opacity *= *([^)]*)/i,v=/opacity:([^;]*)/i,m=/alpha\(opacity *=.+?\)/i,g=/^(rgb|hsl)/,y=/([A-Z])/g,b=/-([a-z])/gi,w=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,E=function(e,t){return t.toUpperCase()},S=/(?:Left|Right|Width)/i,x=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,T=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,N=/,(?=[^\)]*(?:\(|$))/gi,C=Math.PI/180,k=180/Math.PI,L={},A=document,O=A.createElement("div"),M=A.createElement("img"),_=n._internals={_specialProps:u},D=navigator.userAgent,P,H,B,j,F,I,q=function(){var e=D.indexOf("Android"),t=A.createElement("div"),n;return B=D.indexOf("Safari")!==-1&&D.indexOf("Chrome")===-1&&(e===-1||Number(D.substr(e+8,1))>3),F=B&&Number(D.substr(D.indexOf("Version/")+8,1))<6,j=D.indexOf("Firefox")!==-1,/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(D)&&(I=parseFloat(RegExp.$1)),t.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",n=t.getElementsByTagName("a")[0],n?/^0.55/.test(n.style.opacity):!1}(),R=function(e){return d.test(typeof e=="string"?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},U=function(e){window.console&&console.log(e)},z="",W="",X=function(e,t){t=t||O;var n=t.style,r,i;if(n[e]!==undefined)return e;e=e.charAt(0).toUpperCase()+e.substr(1),r=["O","Moz","ms","Ms","Webkit"],i=5;while(--i>-1&&n[r[i]+e]===undefined);return i>=0?(W=i===3?"ms":r[i],z="-"+W.toLowerCase()+"-",W+e):null},V=A.defaultView?A.defaultView.getComputedStyle:function(){},$=n.getStyle=function(e,t,n,r,i){var s;return!q&&t==="opacity"?R(e):(!r&&e.style[t]?s=e.style[t]:(n=n||V(e))?s=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(y,"-$1").toLowerCase()):e.currentStyle&&(s=e.currentStyle[t]),i==null||!!s&&s!=="none"&&s!=="auto"&&s!=="auto auto"?s:i)},J=_.convertToPixels=function(e,r,i,s,o){if(s==="px"||!s)return i;if(s==="auto"||!i)return 0;var u=S.test(r),a=e,f=O.style,l=i<0,c,h,p;l&&(i=-i);if(s==="%"&&r.indexOf("border")!==-1)c=i/100*(u?e.clientWidth:e.clientHeight);else{f.cssText="border:0 solid red;position:"+$(e,"position")+";line-height:0;";if(s==="%"||!a.appendChild){a=e.parentNode||A.body,h=a._gsCache,p=t.ticker.frame;if(h&&u&&h.time===p)return h.width*i/100;f[u?"width":"height"]=i+s}else f[u?"borderLeftWidth":"borderTopWidth"]=i+s;a.appendChild(O),c=parseFloat(O[u?"offsetWidth":"offsetHeight"]),a.removeChild(O),u&&s==="%"&&n.cacheWidths!==!1&&(h=a._gsCache=a._gsCache||{},h.time=p,h.width=c/i*100),c===0&&!o&&(c=J(e,r,i,s,!0))}return l?-c:c},K=_.calculateOffset=function(e,t,n){if($(e,"position",n)!=="absolute")return 0;var r=t==="left"?"Left":"Top",i=$(e,"margin"+r,n);return e["offset"+r]-(J(e,t,parseFloat(i),i.replace(p,""))||0)},Q=function(e,t){var n={},r,i;if(t=t||V(e,null))if(r=t.length)while(--r>-1)n[t[r].replace(b,E)]=t.getPropertyValue(t[r]);else for(r in t)n[r]=t[r];else if(t=e.currentStyle||e.style)for(r in t)typeof r=="string"&&n[r]===undefined&&(n[r.replace(b,E)]=t[r]);return q||(n.opacity=R(e)),i=Ct(e,t,!1),n.rotation=i.rotation,n.skewX=i.skewX,n.scaleX=i.scaleX,n.scaleY=i.scaleY,n.x=i.x,n.y=i.y,Tt&&(n.z=i.z,n.rotationX=i.rotationX,n.rotationY=i.rotationY,n.scaleZ=i.scaleZ),n.filters&&delete n.filters,n},G=function(e,t,n,r,i){var s={},o=e.style,u,a,f;for(a in n)a!=="cssText"&&a!=="length"&&isNaN(a)&&(t[a]!==(u=n[a])||i&&i[a])&&a.indexOf("Origin")===-1&&(typeof u=="number"||typeof u=="string")&&(s[a]=u!=="auto"||a!=="left"&&a!=="top"?u!==""&&u!=="auto"&&u!=="none"||typeof t[a]!="string"||t[a].replace(h,"")===""?u:0:K(e,a),o[a]!==undefined&&(f=new ht(o,a,o[a],f)));if(r)for(a in r)a!=="className"&&(s[a]=r[a]);return{difs:s,firstMPT:f}},Y={width:["Left","Right"],height:["Top","Bottom"]},Z=["marginLeft","marginRight","marginTop","marginBottom"],et=function(e,t,n){var r=parseFloat(t==="width"?e.offsetWidth:e.offsetHeight),i=Y[t],s=i.length;n=n||V(e,null);while(--s>-1)r-=parseFloat($(e,"padding"+i[s],n,!0))||0,r-=parseFloat($(e,"border"+i[s]+"Width",n,!0))||0;return r},tt=function(e,t){if(e==null||e===""||e==="auto"||e==="auto auto")e="0 0";var n=e.split(" "),r=e.indexOf("left")!==-1?"0%":e.indexOf("right")!==-1?"100%":n[0],i=e.indexOf("top")!==-1?"0%":e.indexOf("bottom")!==-1?"100%":n[1];i==null?i="0":i==="center"&&(i="50%");if(r==="center"||isNaN(parseFloat(r))&&(r+"").indexOf("=")===-1)r="50%";return t&&(t.oxp=r.indexOf("%")!==-1,t.oyp=i.indexOf("%")!==-1,t.oxr=r.charAt(1)==="=",t.oyr=i.charAt(1)==="=",t.ox=parseFloat(r.replace(h,"")),t.oy=parseFloat(i.replace(h,""))),r+" "+i+(n.length>2?" "+n[2]:"")},nt=function(e,t){return typeof e=="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},rt=function(e,t){return e==null?t:typeof e=="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*Number(e.substr(2))+t:parseFloat(e)},it=function(e,t,n,r){var i=1e-6,s,o,u,a;return e==null?a=t:typeof e=="number"?a=e:(s=360,o=e.split("_"),u=Number(o[0].replace(h,""))*(e.indexOf("rad")===-1?1:k)-(e.charAt(1)==="="?0:t),o.length&&(r&&(r[n]=t+u),e.indexOf("short")!==-1&&(u%=s,u!==u%(s/2)&&(u=u<0?u+s:u-s)),e.indexOf("_cw")!==-1&&u<0?u=(u+s*9999999999)%s-(u/s|0)*s:e.indexOf("ccw")!==-1&&u>0&&(u=(u-s*9999999999)%s-(u/s|0)*s)),a=t+u),a<i&&a>-i&&(a=0),a},st={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ot=function(e,t,n){return e=e<0?e+1:e>1?e-1:e,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*255+.5|0},ut=function(e){var t,n,r,i,s,o;return!e||e===""?st.black:typeof e=="number"?[e>>16,e>>8&255,e&255]:(e.charAt(e.length-1)===","&&(e=e.substr(0,e.length-1)),st[e]?st[e]:e.charAt(0)==="#"?(e.length===4&&(t=e.charAt(1),n=e.charAt(2),r=e.charAt(3),e="#"+t+t+n+n+r+r),e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):e.substr(0,3)==="hsl"?(e=e.match(f),i=Number(e[0])%360/360,s=Number(e[1])/100,o=Number(e[2])/100,n=o<=.5?o*(s+1):o+s-o*s,t=o*2-n,e.length>3&&(e[3]=Number(e[3])),e[0]=ot(i+1/3,t,n),e[1]=ot(i,t,n),e[2]=ot(i-1/3,t,n),e):(e=e.match(f)||st.transparent,e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2]),e.length>3&&(e[3]=Number(e[3])),e))},at="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(a in st)at+="|"+a+"\\b";at=new RegExp(at+")","gi");var ft=function(e,t,n,r){if(e==null)return function(e){return e};var i=t?(e.match(at)||[""])[0]:"",s=e.split(i).join("").match(c)||[],o=e.substr(0,e.indexOf(s[0])),u=e.charAt(e.length-1)===")"?")":"",a=e.indexOf(" ")!==-1?" ":",",l=s.length,h=l>0?s[0].replace(f,""):"",p;return l?t?(p=function(e){var t,f,d,v;if(typeof e=="number")e+=h;else if(r&&N.test(e)){v=e.replace(N,"|").split("|");for(d=0;d<v.length;d++)v[d]=p(v[d]);return v.join(",")}t=(e.match(at)||[i])[0],f=e.split(t).join("").match(c)||[],d=f.length;if(l>d--)while(++d<l)f[d]=n?f[(d-1)/2|0]:s[d];return o+f.join(a)+a+t+u+(e.indexOf("inset")!==-1?" inset":"")},p):(p=function(e){var t,i,f;if(typeof e=="number")e+=h;else if(r&&N.test(e)){i=e.replace(N,"|").split("|");for(f=0;f<i.length;f++)i[f]=p(i[f]);return i.join(",")}t=e.match(c)||[],f=t.length;if(l>f--)while(++f<l)t[f]=n?t[(f-1)/2|0]:s[f];return o+t.join(a)+u},p):function(e){return e}},lt=function(e){return e=e.split(","),function(t,n,r,i,s,o,u){var a=(n+"").split(" "),f;u={};for(f=0;f<4;f++)u[e[f]]=a[f]=a[f]||a[(f-1)/2>>0];return i.parse(t,u,s,o)}},ct=_._setPluginRatio=function(e){this.plugin.setRatio(e);var t=this.data,n=t.proxy,r=t.firstMPT,i=1e-6,s,o,u,a;while(r)s=n[r.v],r.r?s=Math.round(s):s<i&&s>-i&&(s=0),r.t[r.p]=s,r=r._next;t.autoRotate&&(t.autoRotate.rotation=n.rotation);if(e===1){r=t.firstMPT;while(r){o=r.t;if(!o.type)o.e=o.s+o.xs0;else if(o.type===1){a=o.xs0+o.s+o.xs1;for(u=1;u<o.l;u++)a+=o["xn"+u]+o["xs"+(u+1)];o.e=a}r=r._next}}},ht=function(e,t,n,r,i){this.t=e,this.p=t,this.v=n,this.r=i,r&&(r._prev=this,this._next=r)},pt=_._parseToProxy=function(e,t,n,r,i,s){var o=r,u={},a={},f=n._transform,l=L,c,h,p,d,v;n._transform=null,L=t,r=v=n.parse(e,t,r,i),L=l,s&&(n._transform=f,o&&(o._prev=null,o._prev&&(o._prev._next=null)));while(r&&r!==o){if(r.type<=1){h=r.p,a[h]=r.s+r.c,u[h]=r.s,s||(d=new ht(r,"s",h,d,r.r),r.c=0);if(r.type===1){c=r.l;while(--c>0)p="xn"+c,h=r.p+"_"+p,a[h]=r.data[p],u[h]=r[p],s||(d=new ht(r,p,h,d,r.rxp[p]))}}r=r._next}return{proxy:u,end:a,firstMPT:d,pt:v}},dt=_.CSSPropTween=function(e,t,n,i,s,u,a,f,l,c,h){this.t=e,this.p=t,this.s=n,this.c=i,this.n=a||t,e instanceof dt||o.push(this.n),this.r=f,this.type=u||0,l&&(this.pr=l,r=!0),this.b=c===undefined?n:c,this.e=h===undefined?n+i:h,s&&(this._next=s,s._prev=this)},vt=n.parseComplex=function(e,t,n,r,i,s,o,u,a,c){n=n||s||"",o=new dt(e,t,0,0,o,c?2:1,null,!1,u,n,r),r+="";var h=n.split(", ").join(",").split(" "),p=r.split(", ").join(",").split(" "),d=h.length,v=P!==!1,m,y,b,w,E,S,x,T,C,k,L,A;if(r.indexOf(",")!==-1||n.indexOf(",")!==-1)h=h.join(" ").replace(N,", ").split(" "),p=p.join(" ").replace(N,", ").split(" "),d=h.length;d!==p.length&&(h=(s||"").split(" "),d=h.length),o.plugin=a,o.setRatio=c;for(m=0;m<d;m++){w=h[m],E=p[m],T=parseFloat(w);if(T||T===0)o.appendXtra("",T,nt(E,T),E.replace(l,""),v&&E.indexOf("px")!==-1,!0);else if(i&&(w.charAt(0)==="#"||st[w]||g.test(w)))A=E.charAt(E.length-1)===","?"),":")",w=ut(w),E=ut(E),C=w.length+E.length>6,C&&!q&&E[3]===0?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(p[m]).join("transparent")):(q||(C=!1),o.appendXtra(C?"rgba(":"rgb(",w[0],E[0]-w[0],",",!0,!0).appendXtra("",w[1],E[1]-w[1],",",!0).appendXtra("",w[2],E[2]-w[2],C?",":A,!0),C&&(w=w.length<4?1:w[3],o.appendXtra("",w,(E.length<4?1:E[3])-w,A,!1)));else{S=w.match(f);if(!S)o["xs"+o.l]+=o.l?" "+w:w;else{x=E.match(l);if(!x||x.length!==S.length)return o;b=0;for(y=0;y<S.length;y++)L=S[y],k=w.indexOf(L,b),o.appendXtra(w.substr(b,k-b),Number(L),nt(x[y],L),"",v&&w.substr(k+L.length,2)==="px",y===0),b=k+L.length;o["xs"+o.l]+=w.substr(b)}}}if(r.indexOf("=")!==-1&&o.data){A=o.xs0+o.data.s;for(m=1;m<o.l;m++)A+=o["xs"+m]+o.data["xn"+m];o.e=A+o["xs"+m]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},mt=9;a=dt.prototype,a.l=a.pr=0;while(--mt>0)a["xn"+mt]=0,a["xs"+mt]="";a.xs0="",a._next=a._prev=a.xfirst=a.data=a.plugin=a.setRatio=a.rxp=null,a.appendXtra=function(e,t,n,r,i,s){var o=this,u=o.l;return o["xs"+u]+=s&&u?" "+e:e||"",!n&&u!==0&&!o.plugin?(o["xs"+u]+=t+(r||""),o):(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=r||"",u>0?(o.data["xn"+u]=t+n,o.rxp["xn"+u]=i,o["xn"+u]=t,o.plugin||(o.xfirst=new dt(o,"xn"+u,t,n,o.xfirst||o,0,o.n,i,o.pr),o.xfirst.xs0=0),o):(o.data={s:t+n},o.rxp={},o.s=t,o.c=n,o.r=i,o))};var gt=function(e,t){t=t||{},this.p=t.prefix?X(e)||e:e,u[e]=u[this.p]=this,this.format=t.formatter||ft(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},yt=_._registerComplexSpecialProp=function(e,t,n){typeof t!="object"&&(t={parser:n});var r=e.split(","),i=t.defaultValue,s,o;n=n||[i];for(s=0;s<r.length;s++)t.prefix=s===0&&t.prefix,t.defaultValue=n[s]||i,o=new gt(r[s],t)},bt=function(e){if(!u[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";yt(e,{parser:function(e,n,r,i,s,o,a){var f=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins[t];return f?(f._cssRegister(),u[r].parse(e,n,r,i,s,o,a)):(U("Error: "+t+" js file not loaded."),s)}})}};a=gt.prototype,a.parseComplex=function(e,t,n,r,i,s){var o=this.keyword,u,a,f,l,c,h;this.multi&&(N.test(n)||N.test(t)?(a=t.replace(N,"|").split("|"),f=n.replace(N,"|").split("|")):o&&(a=[t],f=[n]));if(f){l=f.length>a.length?f.length:a.length;for(u=0;u<l;u++)t=a[u]=a[u]||this.dflt,n=f[u]=f[u]||this.dflt,o&&(c=t.indexOf(o),h=n.indexOf(o),c!==h&&(n=h===-1?f:a,n[u]+=" "+o));t=a.join(", "),n=f.join(", ")}return vt(e,this.p,t,n,this.clrs,this.dflt,r,this.pr,i,s)},a.parse=function(e,t,n,r,i,o,u){return this.parseComplex(e.style,this.format($(e,this.p,s,!1,this.dflt)),this.format(t),i,o)},n.registerSpecialProp=function(e,t,n){yt(e,{parser:function(e,r,i,s,o,u,a){var f=new dt(e,i,0,0,o,2,i,!1,n);return f.plugin=u,f.setRatio=t(e,r,s._tween,i),f},priority:n})};var wt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Et=X("transform"),St=z+"transform",xt=X("transformOrigin"),Tt=X("perspective")!==null,Nt=_.Transform=function(){this.skewY=0},Ct=_.getTransform=function(e,t,r,i){if(e._gsTransform&&r&&!i)return e._gsTransform;var s=r?e._gsTransform||new Nt:new Nt,o=s.scaleX<0,u=2e-5,a=1e5,f=179.99,l=f*C,c=Tt?parseFloat($(e,xt,t,!1,"0 0 0").split(" ")[2])||s.zOrigin||0:0,h=parseFloat(n.defaultTransformPerspective)||0,p,d,v,m,g,y,b,w,E,S,T,N,L;Et?p=$(e,St,t,!0):e.currentStyle&&(p=e.currentStyle.filter.match(x),p=p&&p.length===4?[p[0].substr(4),Number(p[2].substr(4)),Number(p[1].substr(4)),p[3].substr(4),s.x||0,s.y||0].join(","):"");if(!p||p==="none"||p==="matrix(1, 0, 0, 1, 0, 0)")s={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,perspective:h,rotation:0,rotationX:0,rotationY:0,zOrigin:0};else{d=(p||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],v=d.length;while(--v>-1)m=Number(d[v]),d[v]=(g=m-(m|=0))?(g*a+(g<0?-0.5:.5)|0)/a+m:m;if(d.length===16){var A=d[8],O=d[9],M=d[10],_=d[12],D=d[13],P=d[14];s.zOrigin&&(P=-s.zOrigin,_=A*P-d[12],D=O*P-d[13],P=M*P+s.zOrigin-d[14]);if(!r||i||s.rotationX==null){var H=d[0],B=d[1],j=d[2],F=d[3],I=d[4],q=d[5],R=d[6],U=d[7],z=d[11],W=Math.atan2(R,M),X=W<-l||W>l,V,J,K,Q,G,Y,Z;s.rotationX=W*k,W&&(Q=Math.cos(-W),G=Math.sin(-W),V=I*Q+A*G,J=q*Q+O*G,K=R*Q+M*G,A=I*-G+A*Q,O=q*-G+O*Q,M=R*-G+M*Q,z=U*-G+z*Q,I=V,q=J,R=K),W=Math.atan2(A,H),s.rotationY=W*k,W&&(Y=W<-l||W>l,Q=Math.cos(-W),G=Math.sin(-W),V=H*Q-A*G,J=B*Q-O*G,K=j*Q-M*G,O=B*G+O*Q,M=j*G+M*Q,z=F*G+z*Q,H=V,B=J,j=K),W=Math.atan2(B,q),s.rotation=W*k,W&&(Z=W<-l||W>l,Q=Math.cos(-W),G=Math.sin(-W),H=H*Q+I*G,J=B*Q+q*G,q=B*-G+q*Q,R=j*-G+R*Q,B=J),Z&&X?s.rotation=s.rotationX=0:Z&&Y?s.rotation=s.rotationY=0:Y&&X&&(s.rotationY=s.rotationX=0),s.scaleX=(Math.sqrt(H*H+B*B)*a+.5|0)/a,s.scaleY=(Math.sqrt(q*q+O*O)*a+.5|0)/a,s.scaleZ=(Math.sqrt(R*R+M*M)*a+.5|0)/a,s.skewX=0,s.perspective=z?1/(z<0?-z:z):0,s.x=_,s.y=D,s.z=P}}else if((!Tt||i||!d.length||s.x!==d[4]||s.y!==d[5]||!s.rotationX&&!s.rotationY)&&(s.x===undefined||$(e,"display",t)!=="none")){var et=d.length>=6,tt=et?d[0]:1,nt=d[1]||0,rt=d[2]||0,it=et?d[3]:1;s.x=d[4]||0,s.y=d[5]||0,y=Math.sqrt(tt*tt+nt*nt),b=Math.sqrt(it*it+rt*rt),w=tt||nt?Math.atan2(nt,tt)*k:s.rotation||0,E=rt||it?Math.atan2(rt,it)*k+w:s.skewX||0,S=y-Math.abs(s.scaleX||0),T=b-Math.abs(s.scaleY||0),Math.abs(E)>90&&Math.abs(E)<270&&(o?(y*=-1,E+=w<=0?180:-180,w+=w<=0?180:-180):(b*=-1,E+=E<=0?180:-180)),N=(w-s.rotation)%180,L=(E-s.skewX)%180;if(s.skewX===undefined||S>u||S<-u||T>u||T<-u||N>-f&&N<f&&N*a|!1||L>-f&&L<f&&L*a|!1)s.scaleX=y,s.scaleY=b,s.rotation=w,s.skewX=E;Tt&&(s.rotationX=s.rotationY=s.z=0,s.perspective=h,s.scaleZ=1)}s.zOrigin=c;for(v in s)s[v]<u&&s[v]>-u&&(s[v]=0)}return r&&(e._gsTransform=s),s.xPercent=s.yPercent=0,s},kt=function(e){var t=this.data,n=-t.rotation*C,r=n+t.skewX*C,i=1e5,s=(Math.cos(n)*t.scaleX*i|0)/i,o=(Math.sin(n)*t.scaleX*i|0)/i,u=(Math.sin(r)*-t.scaleY*i|0)/i,a=(Math.cos(r)*t.scaleY*i|0)/i,f=this.t.style,l=this.t.currentStyle,c,h;if(!l)return;h=o,o=-u,u=-h,c=l.filter,f.filter="";var v=this.t.offsetWidth,m=this.t.offsetHeight,g=l.position!=="absolute",y="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+o+", M21="+u+", M22="+a,b=t.x+v*t.xPercent/100,w=t.y+m*t.yPercent/100,E,S;t.ox!=null&&(E=(t.oxp?v*t.ox*.01:t.ox)-v/2,S=(t.oyp?m*t.oy*.01:t.oy)-m/2,b+=E-(E*s+S*o),w+=S-(E*u+S*a)),g?(E=v/2,S=m/2,y+=", Dx="+(E-(E*s+S*o)+b)+", Dy="+(S-(E*u+S*a)+w)+")"):y+=", sizingMethod='auto expand')",c.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?f.filter=c.replace(T,y):f.filter=y+" "+c,(e===0||e===1)&&s===1&&o===0&&u===0&&a===1&&(!g||y.indexOf("Dx=0, Dy=0")!==-1)&&(!d.test(c)||parseFloat(RegExp.$1)===100)&&c.indexOf(c.indexOf("Alpha"))===-1&&f.removeAttribute("filter");if(!g){var x=I<8?1:-1,N,k,L;E=t.ieOffsetX||0,S=t.ieOffsetY||0,t.ieOffsetX=Math.round((v-((s<0?-s:s)*v+(o<0?-o:o)*m))/2+b),t.ieOffsetY=Math.round((m-((a<0?-a:a)*m+(u<0?-u:u)*v))/2+w);for(mt=0;mt<4;mt++)k=Z[mt],N=l[k],h=N.indexOf("px")!==-1?parseFloat(N):J(this.t,k,parseFloat(N),N.replace(p,""))||0,h!==t[k]?L=mt<2?-t.ieOffsetX:-t.ieOffsetY:L=mt<2?E-t.ieOffsetX:S-t.ieOffsetY,f[k]=(t[k]=Math.round(h-L*(mt===0||mt===2?1:x)))+"px"}},Lt=_.set3DTransformRatio=function(e){var t=this.data,n=this.t.style,r=t.rotation*C,i=t.scaleX,s=t.scaleY,o=t.scaleZ,u=t.x,a=t.y,f=t.z,l=t.perspective,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,k,L,A,O,M,_,D,P;if(e===1||e===0)if(t.force3D==="auto"&&!t.rotationY&&!t.rotationX&&o===1&&!l&&!f){At.call(this,e);return}if(j){var H=1e-4;i<H&&i>-H&&(i=o=2e-5),s<H&&s>-H&&(s=o=2e-5),l&&!t.z&&!t.rotationX&&!t.rotationY&&(l=0)}if(r||t.skewX)A=Math.cos(r),O=Math.sin(r),c=A,v=O,t.skewX&&(r-=t.skewX*C,A=Math.cos(r),O=Math.sin(r),t.skewType==="simple"&&(M=Math.tan(t.skewX*C),M=Math.sqrt(1+M*M),A*=M,O*=M)),h=-O,m=A;else{if(!t.rotationY&&!t.rotationX&&o===1&&!l){n[Et]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) translate3d(":"translate3d(")+u+"px,"+a+"px,"+f+"px)"+(i!==1||s!==1?" scale("+i+","+s+")":"");return}c=m=1,h=v=0}E=1,p=d=g=y=b=w=S=x=T=0,N=l?-1/l:0,k=t.zOrigin,L=1e5,r=t.rotationY*C,r&&(A=Math.cos(r),O=Math.sin(r),b=E*-O,x=N*-O,p=c*O,g=v*O,E*=A,N*=A,c*=A,v*=A),r=t.rotationX*C,r&&(A=Math.cos(r),O=Math.sin(r),M=h*A+p*O,_=m*A+g*O,D=w*A+E*O,P=T*A+N*O,p=h*-O+p*A,g=m*-O+g*A,E=w*-O+E*A,N=T*-O+N*A,h=M,m=_,w=D,T=P),o!==1&&(p*=o,g*=o,E*=o,N*=o),s!==1&&(h*=s,m*=s,w*=s,T*=s),i!==1&&(c*=i,v*=i,b*=i,x*=i),k&&(S-=k,d=p*S,y=g*S,S=E*S+k),d=(M=(d+=u)-(d|=0))?(M*L+(M<0?-0.5:.5)|0)/L+d:d,y=(M=(y+=a)-(y|=0))?(M*L+(M<0?-0.5:.5)|0)/L+y:y,S=(M=(S+=f)-(S|=0))?(M*L+(M<0?-0.5:.5)|0)/L+S:S,n[Et]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix3d(":"matrix3d(")+[(c*L|0)/L,(v*L|0)/L,(b*L|0)/L,(x*L|0)/L,(h*L|0)/L,(m*L|0)/L,(w*L|0)/L,(T*L|0)/L,(p*L|0)/L,(g*L|0)/L,(E*L|0)/L,(N*L|0)/L,d,y,S,l?1+ -S/l:1].join(",")+")"},At=_.set2DTransformRatio=function(e){var t=this.data,n=this.t,r=n.style,i=t.x,s=t.y,o="",u,a,f,l,c;if(t.rotationX||t.rotationY||t.z||t.force3D===!0||t.force3D==="auto"&&e!==1&&e!==0){this.setRatio=Lt,Lt.call(this,e);return}!t.rotation&&!t.skewX?r[Et]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+t.scaleX+",0,0,"+t.scaleY+","+i+","+s+")":(u=t.rotation*C,a=u-t.skewX*C,f=1e5,l=t.scaleX*f,c=t.scaleY*f,r[Et]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+(Math.cos(u)*l|0)/f+","+(Math.sin(u)*l|0)/f+","+(Math.sin(a)*-c|0)/f+","+(Math.cos(a)*c|0)/f+","+i+","+s+")")};yt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(e,t,r,i,o,u,a){if(i._transform)return o;var f=i._transform=Ct(e,s,!0,a.parseTransform),l=e.style,c=1e-6,h=wt.length,p=a,d={},v,m,g,y,b,w,E;if(typeof p.transform=="string"&&Et)g=O.style,g[Et]=p.transform,g.display="block",g.position="absolute",A.body.appendChild(O),v=Ct(O,null,!1),A.body.removeChild(O);else if(typeof p=="object"){v={scaleX:rt(p.scaleX!=null?p.scaleX:p.scale,f.scaleX),scaleY:rt(p.scaleY!=null?p.scaleY:p.scale,f.scaleY),scaleZ:rt(p.scaleZ,f.scaleZ),x:rt(p.x,f.x),y:rt(p.y,f.y),z:rt(p.z,f.z),xPercent:rt(p.xPercent,f.xPercent),yPercent:rt(p.yPercent,f.yPercent),perspective:rt(p.transformPerspective,f.perspective)},E=p.directionalRotation;if(E!=null)if(typeof E=="object")for(g in E)p[g]=E[g];else p.rotation=E;typeof p.x=="string"&&p.x.indexOf("%")!==-1&&(v.x=0,v.xPercent=rt(p.x,f.xPercent)),typeof p.y=="string"&&p.y.indexOf("%")!==-1&&(v.y=0,v.yPercent=rt(p.y,f.yPercent)),v.rotation=it("rotation"in p?p.rotation:"shortRotation"in p?p.shortRotation+"_short":"rotationZ"in p?p.rotationZ:f.rotation,f.rotation,"rotation",d),Tt&&(v.rotationX=it("rotationX"in p?p.rotationX:"shortRotationX"in p?p.shortRotationX+"_short":f.rotationX||0,f.rotationX,"rotationX",d),v.rotationY=it("rotationY"in p?p.rotationY:"shortRotationY"in p?p.shortRotationY+"_short":f.rotationY||0,f.rotationY,"rotationY",d)),v.skewX=p.skewX==null?f.skewX:it(p.skewX,f.skewX),v.skewY=p.skewY==null?f.skewY:it(p.skewY,f.skewY);if(m=v.skewY-f.skewY)v.skewX+=m,v.rotation+=m}Tt&&p.force3D!=null&&(f.force3D=p.force3D,w=!0),f.skewType=p.skewType||f.skewType||n.defaultSkewType,b=f.force3D||f.z||f.rotationX||f.rotationY||v.z||v.rotationX||v.rotationY||v.perspective,!b&&p.scale!=null&&(v.scaleZ=1);while(--h>-1){r=wt[h],y=v[r]-f[r];if(y>c||y<-c||L[r]!=null)w=!0,o=new dt(f,r,f[r],y,o),r in d&&(o.e=d[r]),o.xs0=0,o.plugin=u,i._overwriteProps.push(o.n)}y=p.transformOrigin;if(y||Tt&&b&&f.zOrigin)Et?(w=!0,r=xt,y=(y||$(e,r,s,!1,"50% 50%"))+"",o=new dt(l,r,0,0,o,-1,"transformOrigin"),o.b=l[r],o.plugin=u,Tt?(g=f.zOrigin,y=y.split(" "),f.zOrigin=(y.length>2&&(g===0||y[2]!=="0px")?parseFloat(y[2]):g)||0,o.xs0=o.e=y[0]+" "+(y[1]||"50%")+" 0px",o=new dt(f,"zOrigin",0,0,o,-1,o.n),o.b=g,o.xs0=o.e=f.zOrigin):o.xs0=o.e=y):tt(y+"",f);return w&&(i._transformType=b||this._transformType===3?3:2),o},prefix:!0}),yt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),yt("borderRadius",{defaultValue:"0px",parser:function(e,t,n,r,o,u){t=this.format(t);var a=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],f=e.style,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;y=parseFloat(e.offsetWidth),b=parseFloat(e.offsetHeight),l=t.split(" ");for(c=0;c<a.length;c++)this.p.indexOf("border")&&(a[c]=X(a[c])),d=p=$(e,a[c],s,!1,"0px"),d.indexOf(" ")!==-1&&(p=d.split(" "),d=p[0],p=p[1]),v=h=l[c],m=parseFloat(d),E=d.substr((m+"").length),S=v.charAt(1)==="=",S?(g=parseInt(v.charAt(0)+"1",10),v=v.substr(2),g*=parseFloat(v),w=v.substr((g+"").length-(g<0?1:0))||""):(g=parseFloat(v),w=v.substr((g+"").length)),w===""&&(w=i[n]||E),w!==E&&(x=J(e,"borderLeft",m,E),T=J(e,"borderTop",m,E),w==="%"?(d=x/y*100+"%",p=T/b*100+"%"):w==="em"?(N=J(e,"borderLeft",1,"em"),d=x/N+"em",p=T/N+"em"):(d=x+"px",p=T+"px"),S&&(v=parseFloat(d)+g+w,h=parseFloat(p)+g+w)),o=vt(f,a[c],d+" "+p,v+" "+h,!1,"0px",o);return o},prefix:!0,formatter:ft("0px 0px 0px 0px",!1,!0)}),yt("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,n,r,i,o){var u="background-position",a=s||V(e,null),f=this.format((a?I?a.getPropertyValue(u+"-x")+" "+a.getPropertyValue(u+"-y"):a.getPropertyValue(u):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),l=this.format(t),c,h,p,d,v,m;if(f.indexOf("%")!==-1!=(l.indexOf("%")!==-1)){m=$(e,"backgroundImage").replace(w,"");if(m&&m!=="none"){c=f.split(" "),h=l.split(" "),M.setAttribute("src",m),p=2;while(--p>-1)f=c[p],d=f.indexOf("%")!==-1,d!==(h[p].indexOf("%")!==-1)&&(v=p===0?e.offsetWidth-M.width:e.offsetHeight-M.height,c[p]=d?parseFloat(f)/100*v+"px":parseFloat(f)/v*100+"%");f=c.join(" ")}}return this.parseComplex(e.style,f,l,i,o)},formatter:tt}),yt("backgroundSize",{defaultValue:"0 0",formatter:tt}),yt("perspective",{defaultValue:"0px",prefix:!0}),yt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),yt("transformStyle",{prefix:!0}),yt("backfaceVisibility",{prefix:!0}),yt("userSelect",{prefix:!0}),yt("margin",{parser:lt("marginTop,marginRight,marginBottom,marginLeft")}),yt("padding",{parser:lt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),yt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,n,r,i,o){var u,a,f;return I<9?(a=e.currentStyle,f=I<8?" ":",",u="rect("+a.clipTop+f+a.clipRight+f+a.clipBottom+f+a.clipLeft+")",t=this.format(t).split(",").join(f)):(u=this.format($(e,this.p,s,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,u,t,i,o)}}),yt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),yt("autoRound,strictUnits",{parser:function(e,t,n,r,i){return i}}),yt("border",{defaultValue:"0px solid #000",parser:function(e,t,n,r,i,o){return this.parseComplex(e.style,this.format($(e,"borderTopWidth",s,!1,"0px")+" "+$(e,"borderTopStyle",s,!1,"solid")+" "+$(e,"borderTopColor",s,!1,"#000")),this.format(t),i,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(at)||["#000"])[0]}}),yt("borderWidth",{parser:lt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),yt("float,cssFloat,styleFloat",{parser:function(e,t,n,r,i,s){var o=e.style,u="cssFloat"in o?"cssFloat":"styleFloat";return new dt(o,u,0,0,i,-1,n,!1,0,o[u],t)}});var Ot=function(e){var t=this.t,n=t.filter||$(this.data,"filter"),r=this.s+this.c*e|0,i;r===100&&(n.indexOf("atrix(")===-1&&n.indexOf("radient(")===-1&&n.indexOf("oader(")===-1?(t.removeAttribute("filter"),i=!$(this.data,"filter")):(t.filter=n.replace(m,""),i=!0));if(!i){this.xn1&&(t.filter=n=n||"alpha(opacity="+r+")");if(n.indexOf("pacity")===-1){if(r!==0||!this.xn1)t.filter=n+" alpha(opacity="+r+")"}else t.filter=n.replace(d,"opacity="+r)}};yt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,n,r,i,o){var u=parseFloat($(e,"opacity",s,!1,"1")),a=e.style,f=n==="autoAlpha";return typeof t=="string"&&t.charAt(1)==="="&&(t=(t.charAt(0)==="-"?-1:1)*parseFloat(t.substr(2))+u),f&&u===1&&$(e,"visibility",s)==="hidden"&&t!==0&&(u=0),q?i=new dt(a,"opacity",u,t-u,i):(i=new dt(a,"opacity",u*100,(t-u)*100,i),i.xn1=f?1:0,a.zoom=1,i.type=2,i.b="alpha(opacity="+i.s+")",i.e="alpha(opacity="+(i.s+i.c)+")",i.data=e,i.plugin=o,i.setRatio=Ot),f&&(i=new dt(a,"visibility",0,0,i,-1,null,!1,0,u!==0?"inherit":"hidden",t===0?"hidden":"inherit"),i.xs0="inherit",r._overwriteProps.push(i.n),r._overwriteProps.push(n)),i}});var Mt=function(e,t){t&&(e.removeProperty?(t.substr(0,2)==="ms"&&(t="M"+t.substr(1)),e.removeProperty(t.replace(y,"-$1").toLowerCase())):e.removeAttribute(t))},_t=function(e){this.t._gsClassPT=this;if(e===1||e===0){this.t.setAttribute("class",e===0?this.b:this.e);var t=this.data,n=this.t.style;while(t)t.v?n[t.p]=t.v:Mt(n,t.p),t=t._next;e===1&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};yt("className",{parser:function(e,t,n,i,o,u,a){var f=e.getAttribute("class")||"",l=e.style.cssText,c,h,p,d,v;o=i._classNamePT=new dt(e,n,0,0,o,2),o.setRatio=_t,o.pr=-11,r=!0,o.b=f,h=Q(e,s),p=e._gsClassPT;if(p){d={},v=p.data;while(v)d[v.p]=1,v=v._next;p.setRatio(1)}return e._gsClassPT=o,o.e=t.charAt(1)!=="="?t:f.replace(new RegExp("\\s*\\b"+t.substr(2)+"\\b"),"")+(t.charAt(0)==="+"?" "+t.substr(2):""),i._tween._duration&&(e.setAttribute("class",o.e),c=G(e,h,Q(e),a,d),e.setAttribute("class",f),o.data=c.firstMPT,e.style.cssText=l,o=o.xfirst=i.parse(e,c.difs,o,u)),o}});var Dt=function(e){if(e===1||e===0)if(this.data._totalTime===this.data._totalDuration&&this.data.data!=="isFromStart"){var t=this.t.style,n=u.transform.parse,r,i,s,o;if(this.e==="all")t.cssText="",o=!0;else{r=this.e.split(","),s=r.length;while(--s>-1)i=r[s],u[i]&&(u[i].parse===n?o=!0:i=i==="transformOrigin"?xt:u[i].p),Mt(t,i)}o&&(Mt(t,Et),this.t._gsTransform&&delete this.t._gsTransform)}};yt("clearProps",{parser:function(e,t,n,i,s){return s=new dt(e,n,0,0,s,2),s.setRatio=Dt,s.e=t,s.pr=-10,s.data=i._tween,r=!0,s}}),a="bezier,throwProps,physicsProps,physics2D".split(","),mt=a.length;while(mt--)bt(a[mt]);a=n.prototype,a._firstPT=null,a._onInitTween=function(e,t,u){if(!e.nodeType)return!1;this._target=e,this._tween=u,this._vars=t,P=t.autoRound,r=!1,i=t.suffixMap||n.suffixMap,s=V(e,""),o=this._overwriteProps;var a=e.style,f,l,c,h,p,d,m,g,y;H&&a.zIndex===""&&(f=$(e,"zIndex",s),(f==="auto"||f==="")&&this._addLazySet(a,"zIndex",0)),typeof t=="string"&&(h=a.cssText,f=Q(e,s),a.cssText=h+";"+t,f=G(e,f,Q(e)).difs,!q&&v.test(t)&&(f.opacity=parseFloat(RegExp.$1)),t=f,a.cssText=h),this._firstPT=l=this.parse(e,t,null);if(this._transformType){y=this._transformType===3,Et?B&&(H=!0,a.zIndex===""&&(m=$(e,"zIndex",s),(m==="auto"||m==="")&&this._addLazySet(a,"zIndex",0)),F&&this._addLazySet(a,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(y?"visible":"hidden"))):a.zoom=1,c=l;while(c&&c._next)c=c._next;g=new dt(e,"transform",0,0,null,2),this._linkCSSP(g,null,c),g.setRatio=y&&Tt?Lt:Et?At:kt,g.data=this._transform||Ct(e,s,!0),o.pop()}if(r){while(l){d=l._next,c=h;while(c&&c.pr>l.pr)c=c._next;(l._prev=c?c._prev:p)?l._prev._next=l:h=l,(l._next=c)?c._prev=l:p=l,l=d}this._firstPT=h}return!0},a.parse=function(e,t,n,r){var o=e.style,a,f,l,c,h,d,v,m,y,b;for(a in t){d=t[a],f=u[a];if(f)n=f.parse(e,d,a,this,n,r,t);else{h=$(e,a,s)+"",y=typeof d=="string";if(a==="color"||a==="fill"||a==="stroke"||a.indexOf("Color")!==-1||y&&g.test(d))y||(d=ut(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),n=vt(o,a,h,d,!0,"transparent",n,0,r);else if(!y||d.indexOf(" ")===-1&&d.indexOf(",")===-1){l=parseFloat(h),v=l||l===0?h.substr((l+"").length):"";if(h===""||h==="auto")a==="width"||a==="height"?(l=et(e,a,s),v="px"):a==="left"||a==="top"?(l=K(e,a,s),v="px"):(l=a!=="opacity"?0:1,v="");b=y&&d.charAt(1)==="=",b?(c=parseInt(d.charAt(0)+"1",10),d=d.substr(2),c*=parseFloat(d),m=d.replace(p,"")):(c=parseFloat(d),m=y?d.substr((c+"").length)||"":""),m===""&&(m=a in i?i[a]:v),d=c||c===0?(b?c+l:c)+m:t[a],v!==m&&m!==""&&(c||c===0)&&l&&(l=J(e,a,l,v),m==="%"?(l/=J(e,a,100,"%")/100,t.strictUnits!==!0&&(h=l+"%")):m==="em"?l/=J(e,a,1,"em"):m!=="px"&&(c=J(e,a,c,m),m="px"),b&&(c||c===0)&&(d=c+l+m)),b&&(c+=l),!l&&l!==0||!c&&c!==0?o[a]===undefined||!d&&(d+""=="NaN"||d==null)?U("invalid "+a+" tween value: "+t[a]):(n=new dt(o,a,c||l||0,0,n,-1,a,!1,0,h,d),n.xs0=d!=="none"||a!=="display"&&a.indexOf("Style")===-1?d:h):(n=new dt(o,a,l,c-l,n,0,a,P!==!1&&(m==="px"||a==="zIndex"),0,h,d),n.xs0=m)}else n=vt(o,a,h,d,!0,null,n,0,r)}r&&n&&!n.plugin&&(n.plugin=r)}return n},a.setRatio=function(e){var t=this._firstPT,n=1e-6,r,i,s;if(e!==1||this._tween._time!==this._tween._duration&&this._tween._time!==0)if(e||this._tween._time!==this._tween._duration&&this._tween._time!==0||this._tween._rawPrevTime===-0.000001)while(t){r=t.c*e+t.s,t.r?r=Math.round(r):r<n&&r>-n&&(r=0);if(!t.type)t.t[t.p]=r+t.xs0;else if(t.type===1){s=t.l;if(s===2)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2;else if(s===3)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3;else if(s===4)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4;else if(s===5)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4+t.xn4+t.xs5;else{i=t.xs0+r+t.xs1;for(s=1;s<t.l;s++)i+=t["xn"+s]+t["xs"+(s+1)];t.t[t.p]=i}}else t.type===-1?t.t[t.p]=t.xs0:t.setRatio&&t.setRatio(e);t=t._next}else while(t)t.type!==2?t.t[t.p]=t.b:t.setRatio(e),t=t._next;else while(t)t.type!==2?t.t[t.p]=t.e:t.setRatio(e),t=t._next},a._enableTransforms=function(e){this._transformType=e||this._transformType===3?3:2,this._transform=this._transform||Ct(this._target,s,!0)};var Pt=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};a._addLazySet=function(e,t,n){var r=this._firstPT=new dt(e,t,0,0,this._firstPT,2);r.e=n,r.setRatio=Pt,r.data=this},a._linkCSSP=function(e,t,n,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,r=!0),n?n._next=e:!r&&this._firstPT===null&&(this._firstPT=e),e._next=t,e._prev=n),e},a._kill=function(t){var n=t,r,i,s;if(t.autoAlpha||t.alpha){n={};for(i in t)n[i]=t[i];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return t.className&&(r=this._classNamePT)&&(s=r.xfirst,s&&s._prev?this._linkCSSP(s._prev,r._next,s._prev._prev):s===this._firstPT&&(this._firstPT=r._next),r._next&&this._linkCSSP(r._next,r._next._next,s._prev),this._classNamePT=null),e.prototype._kill.call(this,n)};var Ht=function(e,t,n){var r,i,s,o;if(e.slice){i=e.length;while(--i>-1)Ht(e[i],t,n);return}r=e.childNodes,i=r.length;while(--i>-1)s=r[i],o=s.type,s.style&&(t.push(Q(s)),n&&n.push(s)),(o===1||o===9||o===11)&&s.childNodes.length&&Ht(s,t,n)};return n.cascadeTo=function(e,n,r){var i=t.to(e,n,r),s=[i],o=[],u=[],a=[],f=t._internals.reservedProps,l,c,h;e=i._targets||i.target,Ht(e,o,a),i.render(n,!0),Ht(e,u),i.render(0,!0),i._enabled(!0),l=a.length;while(--l>-1){c=G(a[l],o[l],u[l]);if(c.firstMPT){c=c.difs;for(h in r)f[h]&&(c[h]=r[h]);s.push(t.to(a[l],n,c))}}return s},e.activate([n]),n},!0),function(){var e=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),t=e.prototype;t._onInitAllProps=function(){var e=this._tween,t=e.vars.roundProps instanceof Array?e.vars.roundProps:e.vars.roundProps.split(","),n=t.length,r={},i=e._propLookup.roundProps,s,o,u;while(--n>-1)r[t[n]]=1;n=t.length;while(--n>-1){s=t[n],o=e._firstPT;while(o)u=o._next,o.pg?o.t._roundProps(r,!0):o.n===s&&(this._add(o.t,s,o.s,o.c),u&&(u._prev=o._prev),o._prev?o._prev._next=u:e._firstPT===o&&(e._firstPT=u),o._next=o._prev=null,e._propLookup[s]=i),o=u}return!1},t._add=function(e,t,n,r){this._addTween(e,t,n,n+r,t,!0),this._overwriteProps.push(t)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(e,t,n){var r,i,s;if(typeof e.setAttribute!="function")return!1;this._target=e,this._proxy={},this._start={},this._end={};for(r in t)this._start[r]=this._proxy[r]=i=e.getAttribute(r),s=this._addTween(this._proxy,r,parseFloat(i),t[r],r),this._end[r]=s?s.s+s.c:t[r],this._overwriteProps.push(r);return!0},set:function(e){this._super.setRatio.call(this,e);var t=this._overwriteProps,n=t.length,r=e===1?this._end:e?this._proxy:this._start,i;while(--n>-1)i=t[n],this._target.setAttribute(i,r[i]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t,n){typeof t!="object"&&(t={rotation:t}),this.finals={};var r=t.useRadians===!0?Math.PI*2:360,i=1e-6,s,o,u,a,f,l;for(s in t)if(s!=="useRadians"){l=(t[s]+"").split("_"),o=l[0],u=parseFloat(typeof e[s]!="function"?e[s]:e[s.indexOf("set")||typeof e["get"+s.substr(3)]!="function"?s:"get"+s.substr(3)]()),a=this.finals[s]=typeof o=="string"&&o.charAt(1)==="="?u+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0,f=a-u,l.length&&(o=l.join("_"),o.indexOf("short")!==-1&&(f%=r,f!==f%(r/2)&&(f=f<0?f+r:f-r)),o.indexOf("_cw")!==-1&&f<0?f=(f+r*9999999999)%r-(f/r|0)*r:o.indexOf("ccw")!==-1&&f>0&&(f=(f-r*9999999999)%r-(f/r|0)*r));if(f>i||f<-i)this._addTween(e,s,u,u+f,s),this._overwriteProps.push(s)}return!0},set:function(e){var t;if(e!==1)this._super.setRatio.call(this,e);else{t=this._firstPT;while(t)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t=_gsScope.GreenSockGlobals||_gsScope,n=t.com.greensock,r=Math.PI*2,i=Math.PI/2,s=n._class,o=function(t,n){var r=s("easing."+t,function(){},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,r},u=e.register||function(){},a=function(e,t,n,r,i){var o=s("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new r},!0);return u(o,e),o},f=function(e,t,n){this.t=e,this.v=t,n&&(this.next=n,n.prev=this,this.c=n.v-t,this.gap=n.t-e)},l=function(t,n){var r=s("easing."+t,function(e){this._p1=e||e===0?e:1.70158,this._p2=this._p1*1.525},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,i.config=function(e){return new r(e)},r},c=a("Back",l("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),l("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),l("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),h=s("easing.SlowMo",function(e,t,n){t=t||t===0?t:.7,e==null?e=.7:e>1&&(e=1),this._p=e!==1?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=n===!0},!0),p=h.prototype=new e,d,v,m;return p.constructor=h,p.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},h.ease=new h(.7,.7),p.config=h.config=function(e,t,n){return new h(e,t,n)},d=s("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),p=d.prototype=new e,p.constructor=d,p.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},p.config=d.config=function(e){return new d(e)},v=s("easing.RoughEase",function(t){t=t||{};var n=t.taper||"none",r=[],i=0,s=(t.points||20)|0,o=s,u=t.randomize!==!1,a=t.clamp===!0,l=t.template instanceof e?t.template:null,c=typeof t.strength=="number"?t.strength*.4:.4,h,p,d,v,m,g;while(--o>-1)h=u?Math.random():1/s*o,p=l?l.getRatio(h):h,n==="none"?d=c:n==="out"?(v=1-h,d=v*v*c):n==="in"?d=h*h*c:h<.5?(v=h*2,d=v*v*.5*c):(v=(1-h)*2,d=v*v*.5*c),u?p+=Math.random()*d-d*.5:o%2?p+=d*.5:p-=d*.5,a&&(p>1?p=1:p<0&&(p=0)),r[i++]={x:h,y:p};r.sort(function(e,t){return e.x-t.x}),g=new f(1,1,null),o=s;while(--o>-1)m=r[o],g=new f(m.x,m.y,g);this._prev=new f(0,0,g.t!==0?g:g.next)},!0),p=v.prototype=new e,p.constructor=v,p.getRatio=function(e){var t=this._prev;if(e>t.t){while(t.next&&e>=t.t)t=t.next;t=t.prev}else while(t.prev&&e<=t.t)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},p.config=function(e){return new v(e)},v.ease=new v,a("Bounce",o("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),o("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),o("BounceInOut",function(e){var t=e<.5;return t?e=1-e*2:e=e*2-1,e<1/2.75?e=7.5625*e*e:e<2/2.75?e=7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?e=7.5625*(e-=2.25/2.75)*e+.9375:e=7.5625*(e-=2.625/2.75)*e+.984375,t?(1-e)*.5:e*.5+.5})),a("Circ",o("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),o("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),o("CircInOut",function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),m=function(t,n,i){var o=s("easing."+t,function(e,t){this._p1=e||1,this._p2=t||i,this._p3=this._p2/r*(Math.asin(1/this._p1)||0)},!0),u=o.prototype=new e;return u.constructor=o,u.getRatio=n,u.config=function(e,t){return new o(e,t)},o},a("Elastic",m("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*r/this._p2)+1},.3),m("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*r/this._p2))},.3),m("ElasticInOut",function(e){return(e*=2)<1?-0.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*r/this._p2):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*r/this._p2)*.5+1},.45)),a("Expo",o("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),o("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),o("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),a("Sine",o("SineOut",function(e){return Math.sin(e*i)}),o("SineIn",function(e){return-Math.cos(e*i)+1}),o("SineInOut",function(e){return-0.5*(Math.cos(Math.PI*e)-1)})),s("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),u(t.SlowMo,"SlowMo","ease,"),u(v,"RoughEase","ease,"),u(d,"SteppedEase","ease,"),c},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){var n=e.GreenSockGlobals=e.GreenSockGlobals||e;if(n.TweenLite)return;var r=function(e){var t=e.split("."),r=n,i;for(i=0;i<t.length;i++)r[t[i]]=r=r[t[i]]||{};return r},i=r("com.greensock"),s=1e-10,o=function(e){var t=[],n=e.length,r;for(r=0;r!==n;t.push(e[r++]));return t},u=function(){},a=function(){var e=Object.prototype.toString,t=e.call([]);return function(n){return n!=null&&(n instanceof Array||typeof n=="object"&&!!n.push&&e.call(n)===t)}}(),f,l,c,h,p,d={},v=function(i,s,o,u){this.sc=d[i]?d[i].sc:[],d[i]=this,this.gsClass=null,this.func=o;var a=[];this.check=function(f){var l=s.length,c=l,h,p,m,g;while(--l>-1)(h=d[s[l]]||new v(s[l],[])).gsClass?(a[l]=h.gsClass,c--):f&&h.sc.push(this);if(c===0&&o){p=("com.greensock."+i).split("."),m=p.pop(),g=r(p.join("."))[m]=this.gsClass=o.apply(o,a),u&&(n[m]=g,typeof define=="function"&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+i.split(".").pop(),[],function(){return g}):i===t&&typeof module!="undefined"&&module.exports&&(module.exports=g));for(l=0;l<this.sc.length;l++)this.sc[l].check()}},this.check(!0)},m=e._gsDefine=function(e,t,n,r){return new v(e,t,n,r)},g=i._class=function(e,t,n){return t=t||function(){},m(e,[],function(){return t},n),t};m.globals=n;var y=[0,0,1,1],b=[],w=g("easing.Ease",function(e,t,n,r){this._func=e,this._type=n||0,this._power=r||0,this._params=t?y.concat(t):y},!0),E=w.map={},S=w.register=function(e,t,n,r){var s=t.split(","),o=s.length,u=(n||"easeIn,easeOut,easeInOut").split(","),a,f,l,c;while(--o>-1){f=s[o],a=r?g("easing."+f,null,!0):i.easing[f]||{},l=u.length;while(--l>-1)c=u[l],E[f+"."+c]=E[c+f]=a[c]=e.getRatio?e:e[c]||new e}};c=w.prototype,c._calcEnd=!1,c.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,r=t===1?1-e:t===2?e:e<.5?e*2:(1-e)*2;return n===1?r*=r:n===2?r*=r*r:n===3?r*=r*r*r:n===4&&(r*=r*r*r*r),t===1?1-r:t===2?r:e<.5?r/2:1-r/2},f=["Linear","Quad","Cubic","Quart","Quint,Strong"],l=f.length;while(--l>-1)c=f[l]+",Power"+l,S(new w(null,null,1,l),c,"easeOut",!0),S(new w(null,null,2,l),c,"easeIn"+(l===0?",easeNone":"")),S(new w(null,null,3,l),c,"easeInOut");E.linear=i.easing.Linear.easeIn,E.swing=i.easing.Quad.easeInOut;var x=g("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});c=x.prototype,c.addEventListener=function(e,t,n,r,i){i=i||0;var s=this._listeners[e],o=0,u,a;s==null&&(this._listeners[e]=s=[]),a=s.length;while(--a>-1)u=s[a],u.c===t&&u.s===n?s.splice(a,1):o===0&&u.pr<i&&(o=a+1);s.splice(o,0,{c:t,s:n,up:r,pr:i}),this===h&&!p&&h.wake()},c.removeEventListener=function(e,t){var n=this._listeners[e],r;if(n){r=n.length;while(--r>-1)if(n[r].c===t){n.splice(r,1);return}}},c.dispatchEvent=function(e){var t=this._listeners[e],n,r,i;if(t){n=t.length,r=this._eventTarget;while(--n>-1)i=t[n],i.up?i.c.call(i.s||r,{type:e,target:r}):i.c.call(i.s||r)}};var T=e.requestAnimationFrame,N=e.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},k=C();f=["ms","moz","webkit","o"],l=f.length;while(--l>-1&&!T)T=e[f[l]+"RequestAnimationFrame"],N=e[f[l]+"CancelAnimationFrame"]||e[f[l]+"CancelRequestAnimationFrame"];g("Ticker",function(e,t){var n=this,r=C(),i=t!==!1&&T,o=500,a=33,f,l,c,d,v,m=function(e){var t=C()-k,i,s;t>o&&(r+=t-a),k+=t,n.time=(k-r)/1e3,i=n.time-v;if(!f||i>0||e===!0)n.frame++,v+=i+(i>=d?.004:d-i),s=!0;e!==!0&&(c=l(m)),s&&n.dispatchEvent("tick")};x.call(n),n.time=n.frame=0,n.tick=function(){m(!0)},n.lagSmoothing=function(e,t){o=e||1/s,a=Math.min(t,o,0)},n.sleep=function(){if(c==null)return;!i||!N?clearTimeout(c):N(c),l=u,c=null,n===h&&(p=!1)},n.wake=function(){c!==null?n.sleep():n.frame>10&&(k=C()-o+5),l=f===0?u:!i||!T?function(e){return setTimeout(e,(v-n.time)*1e3+1|0)}:T,n===h&&(p=!0),m(2)},n.fps=function(e){if(!arguments.length)return f;f=e,d=1/(f||60),v=this.time+d,n.wake()},n.useRAF=function(e){if(!arguments.length)return i;n.sleep(),i=e,n.fps(f)},n.fps(e),setTimeout(function(){i&&(!c||n.frame<5)&&n.useRAF(!1)},1500)}),c=i.Ticker.prototype=new i.events.EventDispatcher,c.constructor=i.Ticker;var L=g("core.Animation",function(e,t){this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0;if(!z)return;p||h.wake();var n=this.vars.useFrames?U:z;n.add(this,n._time),this.vars.paused&&this.paused(!0)});h=L.ticker=new i.Ticker,c=L.prototype,c._dirty=c._gc=c._initted=c._paused=!1,c._totalTime=c._time=0,c._rawPrevTime=-1,c._next=c._last=c._onUpdate=c._timeline=c.timeline=null,c._paused=!1;var A=function(){p&&C()-k>2e3&&h.wake(),setTimeout(A,2e3)};A(),c.play=function(e,t){return e!=null&&this.seek(e,t),this.reversed(!1).paused(!1)},c.pause=function(e,t){return e!=null&&this.seek(e,t),this.paused(!0)},c.resume=function(e,t){return e!=null&&this.seek(e,t),this.paused(!1)},c.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},c.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},c.reverse=function(e,t){return e!=null&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},c.render=function(e,t,n){},c.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},c.isActive=function(){var e=this._timeline,t=this._startTime,n;return!e||!this._gc&&!this._paused&&e.isActive()&&(n=e.rawTime())>=t&&n<t+this.totalDuration()/this._timeScale},c._enabled=function(e,t){return p||h.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},c._kill=function(e,t){return this._enabled(!1,!1)},c.kill=function(e,t){return this._kill(e,t),this},c._uncache=function(e){var t=e?this:this.timeline;while(t)t._dirty=!0,t=t.timeline;return this},c._swapSelfInParams=function(e){var t=e.length,n=e.concat();while(--t>-1)e[t]==="{self}"&&(n[t]=this);return n},c.eventCallback=function(e,t,n,r){if((e||"").substr(0,2)==="on"){var i=this.vars;if(arguments.length===1)return i[e];t==null?delete i[e]:(i[e]=t,i[e+"Params"]=a(n)&&n.join("").indexOf("{self}")!==-1?this._swapSelfInParams(n):n,i[e+"Scope"]=r),e==="onUpdate"&&(this._onUpdate=t)}return this},c.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},c.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&e!==0&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},c.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},c.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},c.totalTime=function(e,t,n){p||h.wake();if(!arguments.length)return this._totalTime;if(this._timeline){e<0&&!n&&(e+=this.totalDuration());if(this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,i=this._timeline;e>r&&!n&&(e=r),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?r-e:e)/this._timeScale,i._dirty||this._uncache(!1);if(i._timeline)while(i._timeline)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1);if(this._totalTime!==e||this._duration===0)this.render(e,t,!1),P.length&&W()}return this},c.progress=c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.duration()*e,t):this._time/this.duration()},c.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},c.timeScale=function(e){if(!arguments.length)return this._timeScale;e=e||s;if(this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,n=t||t===0?t:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},c.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},c.paused=function(e){if(!arguments.length)return this._paused;if(e!=this._paused&&this._timeline){!p&&!e&&h.wake();var t=this._timeline,n=t.rawTime(),r=n-this._pauseTime;!e&&t.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=e?n:null,this._paused=e,this._active=this.isActive(),!e&&r!==0&&this._initted&&this.duration()&&this.render(t.smoothChildTiming?this._totalTime:(n-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!e&&this._enabled(!0,!1),this};var O=g("core.SimpleTimeline",function(e){L.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});c=O.prototype=new L,c.constructor=O,c.kill()._gc=!1,c._first=c._last=null,c._sortChildren=!1,c.add=c.insert=function(e,t,n,r){var i,s;e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last;if(this._sortChildren){s=e._startTime;while(i&&i._startTime>s)i=i._prev}return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._timeline&&this._uncache(!0),this},c._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,this._timeline&&this._uncache(!0)),this},c.render=function(e,t,n){var r=this._first,i;this._totalTime=this._time=this._rawPrevTime=e;while(r){i=r._next;if(r._active||e>=r._startTime&&!r._paused)r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n);r=i}},c.rawTime=function(){return p||h.wake(),this._totalTime};var M=g("TweenLite",function(t,n,r){L.call(this,n,r),this.render=M.prototype.render;if(t==null)throw"Cannot tween a null target.";this.target=t=typeof t!="string"?t:M.selector(t)||t;var i=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),u=this.vars.overwrite,f,l,c;this._overwrite=u=u==null?R[M.defaultOverwrite]:typeof u=="number"?u>>0:R[u];if((i||t instanceof Array||t.push&&a(t))&&typeof t[0]!="number"){this._targets=c=o(t),this._propLookup=[],this._siblings=[];for(f=0;f<c.length;f++){l=c[f];if(!l){c.splice(f--,1);continue}if(typeof l=="string"){l=c[f--]=M.selector(l),typeof l=="string"&&c.splice(f+1,1);continue}if(l.length&&l!==e&&l[0]&&(l[0]===e||l[0].nodeType&&l[0].style&&!l.nodeType)){c.splice(f--,1),this._targets=c=c.concat(o(l));continue}this._siblings[f]=X(l,this,!1),u===1&&this._siblings[f].length>1&&V(l,this,null,1,this._siblings[f])}}else this._propLookup={},this._siblings=X(t,this,!1),u===1&&this._siblings.length>1&&V(t,this,null,1,this._siblings);if(this.vars.immediateRender||n===0&&this._delay===0&&this.vars.immediateRender!==!1)this._time=-s,this.render(-this._delay)},!0),_=function(t){return t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},D=function(e,t){var n={},r;for(r in e)!q[r]&&(!(r in t)||r==="transform"||r==="x"||r==="y"||r==="width"||r==="height"||r==="className"||r==="border")&&(!j[r]||j[r]&&j[r]._autoCSS)&&(n[r]=e[r],delete e[r]);e.css=n};c=M.prototype=new L,c.constructor=M,c.kill()._gc=!1,c.ratio=0,c._firstPT=c._targets=c._overwrittenProps=c._startAt=null,c._notifyPluginsOfEnabled=c._lazy=!1,M.version="1.13.2",M.defaultEase=c._ease=new w(null,null,1,1),M.defaultOverwrite="auto",M.ticker=h,M.autoSleep=!0,M.lagSmoothing=function(e,t){h.lagSmoothing(e,t)},M.selector=e.$||e.jQuery||function(t){var n=e.$||e.jQuery;return n?(M.selector=n,n(t)):typeof document=="undefined"?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById(t.charAt(0)==="#"?t.substr(1):t)};var P=[],H={},B=M._internals={isArray:a,isSelector:_,lazyTweens:P},j=M._plugins={},F=B.tweenLookup={},I=0,q=B.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},R={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},U=L._rootFramesTimeline=new O,z=L._rootTimeline=new O,W=B.lazyRender=function(){var e=P.length;H={};while(--e>-1)f=P[e],f&&f._lazy!==!1&&(f.render(f._lazy[0],f._lazy[1],!0),f._lazy=!1);P.length=0};z._startTime=h.time,U._startTime=h.frame,z._active=U._active=!0,setTimeout(W,1),L._updateRoot=M.render=function(){var e,t,n;P.length&&W(),z.render((h.time-z._startTime)*z._timeScale,!1,!1),U.render((h.frame-U._startTime)*U._timeScale,!1,!1),P.length&&W();if(!(h.frame%120)){for(n in F){t=F[n].tweens,e=t.length;while(--e>-1)t[e]._gc&&t.splice(e,1);t.length===0&&delete F[n]}n=z._first;if(!n||n._paused)if(M.autoSleep&&!U._first&&h._listeners.tick.length===1){while(n&&n._paused)n=n._next;n||h.sleep()}}},h.addEventListener("tick",L._updateRoot);var X=function(e,t,n){var r=e._gsTweenID,i,s;F[r||(e._gsTweenID=r="t"+I++)]||(F[r]={target:e,tweens:[]});if(t){i=F[r].tweens,i[s=i.length]=t;if(n)while(--s>-1)i[s]===t&&i.splice(s,1)}return F[r].tweens},V=function(e,t,n,r,i){var o,u,a,f;if(r===1||r>=4){f=i.length;for(o=0;o<f;o++)if((a=i[o])!==t)a._gc||a._enabled(!1,!1)&&(u=!0);else if(r===5)break;return u}var l=t._startTime+s,c=[],h=0,p=t._duration===0,d;o=i.length;while(--o>-1)(a=i[o])!==t&&!a._gc&&!a._paused&&(a._timeline!==t._timeline?(d=d||$(t,0,p),$(a,d,p)===0&&(c[h++]=a)):a._startTime<=l&&a._startTime+a.totalDuration()/a._timeScale>l&&((p||!a._initted)&&l-a._startTime<=2e-10||(c[h++]=a)));o=h;while(--o>-1)a=c[o],r===2&&a._kill(n,e)&&(u=!0),(r!==2||!a._firstPT&&a._initted)&&a._enabled(!1,!1)&&(u=!0);return u},$=function(e,t,n){var r=e._timeline,i=r._timeScale,o=e._startTime;while(r._timeline){o+=r._startTime,i*=r._timeScale;if(r._paused)return-100;r=r._timeline}return o/=i,o>t?o-t:n&&o===t||!e._initted&&o-t<2*s?s:(o+=e.totalDuration()/e._timeScale/i)>t+s?0:o-t-s};c._init=function(){var e=this.vars,t=this._overwrittenProps,n=this._duration,r=!!e.immediateRender,i=e.ease,s,o,u,a,f;if(e.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),f={};for(a in e.startAt)f[a]=e.startAt[a];f.overwrite=!1,f.immediateRender=!0,f.lazy=r&&e.lazy!==!1,f.startAt=f.delay=null,this._startAt=M.to(this.target,0,f);if(r)if(this._time>0)this._startAt=null;else if(n!==0)return}else if(e.runBackwards&&n!==0)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{this._time!==0&&(r=!1),u={};for(a in e)if(!q[a]||a==="autoCSS")u[a]=e[a];u.overwrite=0,u.data="isFromStart",u.lazy=r&&e.lazy!==!1,u.immediateRender=r,this._startAt=M.to(this.target,0,u);if(!r)this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null);else if(this._time===0)return}this._ease=i=i?i instanceof w?i:typeof i=="function"?new w(i,e.easeParams):E[i]||M.defaultEase:M.defaultEase,e.easeParams instanceof Array&&i.config&&(this._ease=i.config.apply(i,e.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null;if(this._targets){s=this._targets.length;while(--s>-1)this._initProps(this._targets[s],this._propLookup[s]={},this._siblings[s],t?t[s]:null)&&(o=!0)}else o=this._initProps(this.target,this._propLookup,this._siblings,t);o&&M._onPluginEvent("_onInitAllProps",this),t&&(this._firstPT||typeof this.target!="function"&&this._enabled(!1,!1));if(e.runBackwards){u=this._firstPT;while(u)u.s+=u.c,u.c=-u.c,u=u._next}this._onUpdate=e.onUpdate,this._initted=!0},c._initProps=function(t,n,r,i){var s,o,u,f,l,c;if(t==null)return!1;H[t._gsTweenID]&&W(),this.vars.css||t.style&&t!==e&&t.nodeType&&j.css&&this.vars.autoCSS!==!1&&D(this.vars,t);for(s in this.vars){c=this.vars[s];if(q[s])c&&(c instanceof Array||c.push&&a(c))&&c.join("").indexOf("{self}")!==-1&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(j[s]&&(f=new j[s])._onInitTween(t,this.vars[s],this)){this._firstPT=l={_next:this._firstPT,t:f,p:"setRatio",s:0,c:1,f:!0,n:s,pg:!0,pr:f._priority},o=f._overwriteProps.length;while(--o>-1)n[f._overwriteProps[o]]=this._firstPT;if(f._priority||f._onInitAllProps)u=!0;if(f._onDisable||f._onEnable)this._notifyPluginsOfEnabled=!0}else this._firstPT=n[s]=l={_next:this._firstPT,t:t,p:s,f:typeof t[s]=="function",n:s,pg:!1,pr:0},l.s=l.f?t[s.indexOf("set")||typeof t["get"+s.substr(3)]!="function"?s:"get"+s.substr(3)]():parseFloat(t[s]),l.c=typeof c=="string"&&c.charAt(1)==="="?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return i&&this._kill(i,t)?this._initProps(t,n,r,i):this._overwrite>1&&this._firstPT&&r.length>1&&V(t,this,n,this._overwrite,r)?(this._kill(n,t),this._initProps(t,n,r,i)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(H[t._gsTweenID]=!0),u)},c.render=function(e,t,n){var r=this._time,i=this._duration,o=this._rawPrevTime,u,a,f,l;if(e>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(u=!0,a="onComplete"),i===0&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(e===0||o<0||o===s)&&o!==e&&(n=!0,o>s&&(a="onReverseComplete")),this._rawPrevTime=l=!t||e||o===e?e:s);else if(e<1e-7){this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(r!==0||i===0&&o>0&&o!==s)a="onReverseComplete",u=this._reversed;e<0&&(this._active=!1,i===0&&(this._initted||!this.vars.lazy||n)&&(o>=0&&(n=!0),this._rawPrevTime=l=!t||e||o===e?e:s)),this._initted||(n=!0)}else{this._totalTime=this._time=e;if(this._easeType){var c=e/i,h=this._easeType,p=this._easePower;if(h===1||h===3&&c>=.5)c=1-c;h===3&&(c*=2),p===1?c*=c:p===2?c*=c*c:p===3?c*=c*c*c:p===4&&(c*=c*c*c*c),h===1?this.ratio=1-c:h===2?this.ratio=c:e/i<.5?this.ratio=c/2:this.ratio=1-c/2}else this.ratio=this._ease.getRatio(e/i)}if(this._time===r&&!n)return;if(!this._initted){this._init();if(!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)){this._time=this._totalTime=r,this._rawPrevTime=o,P.push(this),this._lazy=[e,t];return}this._time&&!u?this.ratio=this._ease.getRatio(this._time/i):u&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(this._time===0?0:1))}this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==r&&e>=0&&(this._active=!0),r===0&&(this._startAt&&(e>=0?this._startAt.render(e,t,n):a||(a="_dummyGS")),this.vars.onStart&&(this._time!==0||i===0)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||b))),f=this._firstPT;while(f)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._time!==r||u)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||b)),a&&(!this._gc||n)&&(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),u&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||b),i===0&&this._rawPrevTime===s&&l!==s&&(this._rawPrevTime=0))},c._kill=function(e,t){e==="all"&&(e=null);if(e==null)if(t==null||t===this.target)return this._lazy=!1,this._enabled(!1,!1);t=typeof t!="string"?t||this._targets||this.target:M.selector(t)||t;var n,r,i,s,o,u,f,l;if((a(t)||_(t))&&typeof t[0]!="number"){n=t.length;while(--n>-1)this._kill(e,t[n])&&(u=!0)}else{if(this._targets){n=this._targets.length;while(--n>-1)if(t===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){f=e||o,l=e!==r&&r!=="all"&&e!==o&&(typeof e!="object"||!e._tempKill);for(i in f){if(s=o[i]){s.pg&&s.t._kill(f)&&(u=!0);if(!s.pg||s.t._overwriteProps.length===0)s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null;delete o[i]}l&&(r[i]=1)}!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return u},c.invalidate=function(){return this._notifyPluginsOfEnabled&&M._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],L.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-s,this.render(-this._delay)),this},c._enabled=function(e,t){p||h.wake();if(e&&this._gc){var n=this._targets,r;if(n){r=n.length;while(--r>-1)this._siblings[r]=X(n[r],this,!0)}else this._siblings=X(this.target,this,!0)}return L.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?M._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},M.to=function(e,t,n){return new M(e,t,n)},M.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=n.immediateRender!=0,new M(e,t,n)},M.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,new M(e,t,r)},M.delayedCall=function(e,t,n,r,i){return new M(t,0,{delay:e,onComplete:t,onCompleteParams:n,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:n,onReverseCompleteScope:r,immediateRender:!1,useFrames:i,overwrite:0})},M.set=function(e,t){return new M(e,0,t)},M.getTweensOf=function(e,t){if(e==null)return[];e=typeof e!="string"?e:M.selector(e)||e;var n,r,i,s;if((a(e)||_(e))&&typeof e[0]!="number"){n=e.length,r=[];while(--n>-1)r=r.concat(M.getTweensOf(e[n],t));n=r.length;while(--n>-1){s=r[n],i=n;while(--i>-1)s===r[i]&&r.splice(n,1)}}else{r=X(e).concat(),n=r.length;while(--n>-1)(r[n]._gc||t&&!r[n].isActive())&&r.splice(n,1)}return r},M.killTweensOf=M.killDelayedCallsTo=function(e,t,n){typeof t=="object"&&(n=t,t=!1);var r=M.getTweensOf(e,t),i=r.length;while(--i>-1)r[i]._kill(n,e)};var J=g("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=J.prototype},!0);c=J.prototype,J.version="1.10.1",J.API=2,c._firstPT=null,c._addTween=function(e,t,n,r,i,s){var o,u;if(r!=null&&(o=typeof r=="number"||r.charAt(1)!=="="?Number(r)-n:parseInt(r.charAt(0)+"1",10)*Number(r.substr(2))))return this._firstPT=u={_next:this._firstPT,t:e,p:t,s:n,c:o,f:typeof e[t]=="function",n:i||t,r:s},u._next&&(u._next._prev=u),u},c.setRatio=function(e){var t=this._firstPT,n=1e-6,r;while(t)r=t.c*e+t.s,t.r?r=Math.round(r):r<n&&r>-n&&(r=0),t.f?t.t[t.p](r):t.t[t.p]=r,t=t._next},c._kill=function(e){var t=this._overwriteProps,n=this._firstPT,r;if(e[this._propName]!=null)this._overwriteProps=[];else{r=t.length;while(--r>-1)e[t[r]]!=null&&t.splice(r,1)}while(n)e[n.n]!=null&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},c._roundProps=function(e,t){var n=this._firstPT;while(n){if(e[this._propName]||n.n!=null&&e[n.n.split(this._propName+"_").join("")])n.r=t;n=n._next}},M._onPluginEvent=function(e,t){var n=t._firstPT,r,i,s,o,u;if(e==="_onInitAllProps"){while(n){u=n._next,i=s;while(i&&i.pr>n.pr)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=u}n=t._firstPT=s}while(n)n.pg&&typeof n.t[e]=="function"&&n.t[e]()&&(r=!0),n=n._next;return r},J.activate=function(e){var t=e.length;while(--t>-1)e[t].API===J.API&&(j[(new e[t])._propName]=e[t]);return!0},m.plugin=function(e){if(!e||!e.propName||!e.init||!e.API)throw"illegal plugin definition.";var t=e.propName,n=e.priority||0,r=e.overwriteProps,i={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},s=g("plugins."+t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",function(){J.call(this,t,n),this._overwriteProps=r||[]},e.global===!0),o=s.prototype=new J(t),u;o.constructor=s,s.API=e.API;for(u in i)typeof e[u]=="function"&&(o[i[u]]=e[u]);return s.version=e.version,J.activate([s]),s},f=e._gsQueue;if(f){for(l=0;l<f.length;l++)f[l]();for(c in d)d[c].func||e.console.log("GSAP encountered missing dependency: com.greensock."+c)}p=!1}(typeof module!="undefined"&&module.exports&&typeof global!="undefined"?global:this||window,"TweenMax"),define("TweenMax",function(){}),function(e,t){var n=e.GreenSockGlobals=e.GreenSockGlobals||e;if(n.TweenLite)return;var r=function(e){var t=e.split("."),r=n,i;for(i=0;i<t.length;i++)r[t[i]]=r=r[t[i]]||{};return r},i=r("com.greensock"),s=1e-10,o=function(e){var t=[],n=e.length,r;for(r=0;r!==n;t.push(e[r++]));return t},u=function(){},a=function(){var e=Object.prototype.toString,t=e.call([]);return function(n){return n!=null&&(n instanceof Array||typeof n=="object"&&!!n.push&&e.call(n)===t)}}(),f,l,c,h,p,d={},v=function(i,s,o,u){this.sc=d[i]?d[i].sc:[],d[i]=this,this.gsClass=null,this.func=o;var a=[];this.check=function(f){var l=s.length,c=l,h,p,m,g;while(--l>-1)(h=d[s[l]]||new v(s[l],[])).gsClass?(a[l]=h.gsClass,c--):f&&h.sc.push(this);if(c===0&&o){p=("com.greensock."+i).split("."),m=p.pop(),g=r(p.join("."))[m]=this.gsClass=o.apply(o,a),u&&(n[m]=g,typeof define=="function"&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+i.split(".").pop(),[],function(){return g}):i===t&&typeof module!="undefined"&&module.exports&&(module.exports=g));for(l=0;l<this.sc.length;l++)this.sc[l].check()}},this.check(!0)},m=e._gsDefine=function(e,t,n,r){return new v(e,t,n,r)},g=i._class=function(e,t,n){return t=t||function(){},m(e,[],function(){return t},n),t};m.globals=n;var y=[0,0,1,1],b=[],w=g("easing.Ease",function(e,t,n,r){this._func=e,this._type=n||0,this._power=r||0,this._params=t?y.concat(t):y},!0),E=w.map={},S=w.register=function(e,t,n,r){var s=t.split(","),o=s.length,u=(n||"easeIn,easeOut,easeInOut").split(","),a,f,l,c;while(--o>-1){f=s[o],a=r?g("easing."+f,null,!0):i.easing[f]||{},l=u.length;while(--l>-1)c=u[l],E[f+"."+c]=E[c+f]=a[c]=e.getRatio?e:e[c]||new e}};c=w.prototype,c._calcEnd=!1,c.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,r=t===1?1-e:t===2?e:e<.5?e*2:(1-e)*2;return n===1?r*=r:n===2?r*=r*r:n===3?r*=r*r*r:n===4&&(r*=r*r*r*r),t===1?1-r:t===2?r:e<.5?r/2:1-r/2},f=["Linear","Quad","Cubic","Quart","Quint,Strong"],l=f.length;while(--l>-1)c=f[l]+",Power"+l,S(new w(null,null,1,l),c,"easeOut",!0),S(new w(null,null,2,l),c,"easeIn"+(l===0?",easeNone":"")),S(new w(null,null,3,l),c,"easeInOut");E.linear=i.easing.Linear.easeIn,E.swing=i.easing.Quad.easeInOut;var x=g("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});c=x.prototype,c.addEventListener=function(e,t,n,r,i){i=i||0;var s=this._listeners[e],o=0,u,a;s==null&&(this._listeners[e]=s=[]),a=s.length;while(--a>-1)u=s[a],u.c===t&&u.s===n?s.splice(a,1):o===0&&u.pr<i&&(o=a+1);s.splice(o,0,{c:t,s:n,up:r,pr:i}),this===h&&!p&&h.wake()},c.removeEventListener=function(e,t){var n=this._listeners[e],r;if(n){r=n.length;while(--r>-1)if(n[r].c===t){n.splice(r,1);return}}},c.dispatchEvent=function(e){var t=this._listeners[e],n,r,i;if(t){n=t.length,r=this._eventTarget;while(--n>-1)i=t[n],i.up?i.c.call(i.s||r,{type:e,target:r}):i.c.call(i.s||r)}};var T=e.requestAnimationFrame,N=e.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},k=C();f=["ms","moz","webkit","o"],l=f.length;while(--l>-1&&!T)T=e[f[l]+"RequestAnimationFrame"],N=e[f[l]+"CancelAnimationFrame"]||e[f[l]+"CancelRequestAnimationFrame"];g("Ticker",function(e,t){var n=this,r=C(),i=t!==!1&&T,o=500,a=33,f,l,c,d,v,m=function(e){var t=C()-k,i,s;t>o&&(r+=t-a),k+=t,n.time=(k-r)/1e3,i=n.time-v;if(!f||i>0||e===!0)n.frame++,v+=i+(i>=d?.004:d-i),s=!0;e!==!0&&(c=l(m)),s&&n.dispatchEvent("tick")};x.call(n),n.time=n.frame=0,n.tick=function(){m(!0)},n.lagSmoothing=function(e,t){o=e||1/s,a=Math.min(t,o,0)},n.sleep=function(){if(c==null)return;!i||!N?clearTimeout(c):N(c),l=u,c=null,n===h&&(p=!1)},n.wake=function(){c!==null?n.sleep():n.frame>10&&(k=C()-o+5),l=f===0?u:!i||!T?function(e){return setTimeout(e,(v-n.time)*1e3+1|0)}:T,n===h&&(p=!0),m(2)},n.fps=function(e){if(!arguments.length)return f;f=e,d=1/(f||60),v=this.time+d,n.wake()},n.useRAF=function(e){if(!arguments.length)return i;n.sleep(),i=e,n.fps(f)},n.fps(e),setTimeout(function(){i&&(!c||n.frame<5)&&n.useRAF(!1)},1500)}),c=i.Ticker.prototype=new i.events.EventDispatcher,c.constructor=i.Ticker;var L=g("core.Animation",function(e,t){this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0;if(!z)return;p||h.wake();var n=this.vars.useFrames?U:z;n.add(this,n._time),this.vars.paused&&this.paused(!0)});h=L.ticker=new i.Ticker,c=L.prototype,c._dirty=c._gc=c._initted=c._paused=!1,c._totalTime=c._time=0,c._rawPrevTime=-1,c._next=c._last=c._onUpdate=c._timeline=c.timeline=null,c._paused=!1;var A=function(){p&&C()-k>2e3&&h.wake(),setTimeout(A,2e3)};A(),c.play=function(e,t){return e!=null&&this.seek(e,t),this.reversed(!1).paused(!1)},c.pause=function(e,t){return e!=null&&this.seek(e,t),this.paused(!0)},c.resume=function(e,t){return e!=null&&this.seek(e,t),this.paused(!1)},c.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},c.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},c.reverse=function(e,t){return e!=null&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},c.render=function(e,t,n){},c.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},c.isActive=function(){var e=this._timeline,t=this._startTime,n;return!e||!this._gc&&!this._paused&&e.isActive()&&(n=e.rawTime())>=t&&n<t+this.totalDuration()/this._timeScale},c._enabled=function(e,t){return p||h.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},c._kill=function(e,t){return this._enabled(!1,!1)},c.kill=function(e,t){return this._kill(e,t),this},c._uncache=function(e){var t=e?this:this.timeline;while(t)t._dirty=!0,t=t.timeline;return this},c._swapSelfInParams=function(e){var t=e.length,n=e.concat();while(--t>-1)e[t]==="{self}"&&(n[t]=this);return n},c.eventCallback=function(e,t,n,r){if((e||"").substr(0,2)==="on"){var i=this.vars;if(arguments.length===1)return i[e];t==null?delete i[e]:(i[e]=t,i[e+"Params"]=a(n)&&n.join("").indexOf("{self}")!==-1?this._swapSelfInParams(n):n,i[e+"Scope"]=r),e==="onUpdate"&&(this._onUpdate=t)}return this},c.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},c.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&e!==0&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},c.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},c.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},c.totalTime=function(e,t,n){p||h.wake();if(!arguments.length)return this._totalTime;if(this._timeline){e<0&&!n&&(e+=this.totalDuration());if(this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,i=this._timeline;e>r&&!n&&(e=r),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?r-e:e)/this._timeScale,i._dirty||this._uncache(!1);if(i._timeline)while(i._timeline)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1);if(this._totalTime!==e||this._duration===0)this.render(e,t,!1),P.length&&W()}return this},c.progress=c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.duration()*e,t):this._time/this.duration()},c.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},c.timeScale=function(e){if(!arguments.length)return this._timeScale;e=e||s;if(this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,n=t||t===0?t:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},c.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},c.paused=function(e){if(!arguments.length)return this._paused;if(e!=this._paused&&this._timeline){!p&&!e&&h.wake();var t=this._timeline,n=t.rawTime(),r=n-this._pauseTime;!e&&t.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=e?n:null,this._paused=e,this._active=this.isActive(),!e&&r!==0&&this._initted&&this.duration()&&this.render(t.smoothChildTiming?this._totalTime:(n-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!e&&this._enabled(!0,!1),this};var O=g("core.SimpleTimeline",function(e){L.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});c=O.prototype=new L,c.constructor=O,c.kill()._gc=!1,c._first=c._last=null,c._sortChildren=!1,c.add=c.insert=function(e,t,n,r){var i,s;e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last;if(this._sortChildren){s=e._startTime;while(i&&i._startTime>s)i=i._prev}return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._timeline&&this._uncache(!0),this},c._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,this._timeline&&this._uncache(!0)),this},c.render=function(e,t,n){var r=this._first,i;this._totalTime=this._time=this._rawPrevTime=e;while(r){i=r._next;if(r._active||e>=r._startTime&&!r._paused)r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n);r=i}},c.rawTime=function(){return p||h.wake(),this._totalTime};var M=g("TweenLite",function(t,n,r){L.call(this,n,r),this.render=M.prototype.render;if(t==null)throw"Cannot tween a null target.";this.target=t=typeof t!="string"?t:M.selector(t)||t;var i=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),u=this.vars.overwrite,f,l,c;this._overwrite=u=u==null?R[M.defaultOverwrite]:typeof u=="number"?u>>0:R[u];if((i||t instanceof Array||t.push&&a(t))&&typeof t[0]!="number"){this._targets=c=o(t),this._propLookup=[],this._siblings=[];for(f=0;f<c.length;f++){l=c[f];if(!l){c.splice(f--,1);continue}if(typeof l=="string"){l=c[f--]=M.selector(l),typeof l=="string"&&c.splice(f+1,1);continue}if(l.length&&l!==e&&l[0]&&(l[0]===e||l[0].nodeType&&l[0].style&&!l.nodeType)){c.splice(f--,1),this._targets=c=c.concat(o(l));continue}this._siblings[f]=X(l,this,!1),u===1&&this._siblings[f].length>1&&V(l,this,null,1,this._siblings[f])}}else this._propLookup={},this._siblings=X(t,this,!1),u===1&&this._siblings.length>1&&V(t,this,null,1,this._siblings);if(this.vars.immediateRender||n===0&&this._delay===0&&this.vars.immediateRender!==!1)this._time=-s,this.render(-this._delay)},!0),_=function(t){return t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},D=function(e,t){var n={},r;for(r in e)!q[r]&&(!(r in t)||r==="transform"||r==="x"||r==="y"||r==="width"||r==="height"||r==="className"||r==="border")&&(!j[r]||j[r]&&j[r]._autoCSS)&&(n[r]=e[r],delete e[r]);e.css=n};c=M.prototype=new L,c.constructor=M,c.kill()._gc=!1,c.ratio=0,c._firstPT=c._targets=c._overwrittenProps=c._startAt=null,c._notifyPluginsOfEnabled=c._lazy=!1,M.version="1.13.2",M.defaultEase=c._ease=new w(null,null,1,1),M.defaultOverwrite="auto",M.ticker=h,M.autoSleep=!0,M.lagSmoothing=function(e,t){h.lagSmoothing(e,t)},M.selector=e.$||e.jQuery||function(t){var n=e.$||e.jQuery;return n?(M.selector=n,n(t)):typeof document=="undefined"?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById(t.charAt(0)==="#"?t.substr(1):t)};var P=[],H={},B=M._internals={isArray:a,isSelector:_,lazyTweens:P},j=M._plugins={},F=B.tweenLookup={},I=0,q=B.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},R={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},U=L._rootFramesTimeline=new O,z=L._rootTimeline=new O,W=B.lazyRender=function(){var e=P.length;H={};while(--e>-1)f=P[e],f&&f._lazy!==!1&&(f.render(f._lazy[0],f._lazy[1],!0),f._lazy=!1);P.length=0};z._startTime=h.time,U._startTime=h.frame,z._active=U._active=!0,setTimeout(W,1),L._updateRoot=M.render=function(){var e,t,n;P.length&&W(),z.render((h.time-z._startTime)*z._timeScale,!1,!1),U.render((h.frame-U._startTime)*U._timeScale,!1,!1),P.length&&W();if(!(h.frame%120)){for(n in F){t=F[n].tweens,e=t.length;while(--e>-1)t[e]._gc&&t.splice(e,1);t.length===0&&delete F[n]}n=z._first;if(!n||n._paused)if(M.autoSleep&&!U._first&&h._listeners.tick.length===1){while(n&&n._paused)n=n._next;n||h.sleep()}}},h.addEventListener("tick",L._updateRoot);var X=function(e,t,n){var r=e._gsTweenID,i,s;F[r||(e._gsTweenID=r="t"+I++)]||(F[r]={target:e,tweens:[]});if(t){i=F[r].tweens,i[s=i.length]=t;if(n)while(--s>-1)i[s]===t&&i.splice(s,1)}return F[r].tweens},V=function(e,t,n,r,i){var o,u,a,f;if(r===1||r>=4){f=i.length;for(o=0;o<f;o++)if((a=i[o])!==t)a._gc||a._enabled(!1,!1)&&(u=!0);else if(r===5)break;return u}var l=t._startTime+s,c=[],h=0,p=t._duration===0,d;o=i.length;while(--o>-1)(a=i[o])!==t&&!a._gc&&!a._paused&&(a._timeline!==t._timeline?(d=d||$(t,0,p),$(a,d,p)===0&&(c[h++]=a)):a._startTime<=l&&a._startTime+a.totalDuration()/a._timeScale>l&&((p||!a._initted)&&l-a._startTime<=2e-10||(c[h++]=a)));o=h;while(--o>-1)a=c[o],r===2&&a._kill(n,e)&&(u=!0),(r!==2||!a._firstPT&&a._initted)&&a._enabled(!1,!1)&&(u=!0);return u},$=function(e,t,n){var r=e._timeline,i=r._timeScale,o=e._startTime;while(r._timeline){o+=r._startTime,i*=r._timeScale;if(r._paused)return-100;r=r._timeline}return o/=i,o>t?o-t:n&&o===t||!e._initted&&o-t<2*s?s:(o+=e.totalDuration()/e._timeScale/i)>t+s?0:o-t-s};c._init=function(){var e=this.vars,t=this._overwrittenProps,n=this._duration,r=!!e.immediateRender,i=e.ease,s,o,u,a,f;if(e.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),f={};for(a in e.startAt)f[a]=e.startAt[a];f.overwrite=!1,f.immediateRender=!0,f.lazy=r&&e.lazy!==!1,f.startAt=f.delay=null,this._startAt=M.to(this.target,0,f);if(r)if(this._time>0)this._startAt=null;else if(n!==0)return}else if(e.runBackwards&&n!==0)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{this._time!==0&&(r=!1),u={};for(a in e)if(!q[a]||a==="autoCSS")u[a]=e[a];u.overwrite=0,u.data="isFromStart",u.lazy=r&&e.lazy!==!1,u.immediateRender=r,this._startAt=M.to(this.target,0,u);if(!r)this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null);else if(this._time===0)return}this._ease=i=i?i instanceof w?i:typeof i=="function"?new w(i,e.easeParams):E[i]||M.defaultEase:M.defaultEase,e.easeParams instanceof Array&&i.config&&(this._ease=i.config.apply(i,e.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null;if(this._targets){s=this._targets.length;while(--s>-1)this._initProps(this._targets[s],this._propLookup[s]={},this._siblings[s],t?t[s]:null)&&(o=!0)}else o=this._initProps(this.target,this._propLookup,this._siblings,t);o&&M._onPluginEvent("_onInitAllProps",this),t&&(this._firstPT||typeof this.target!="function"&&this._enabled(!1,!1));if(e.runBackwards){u=this._firstPT;while(u)u.s+=u.c,u.c=-u.c,u=u._next}this._onUpdate=e.onUpdate,this._initted=!0},c._initProps=function(t,n,r,i){var s,o,u,f,l,c;if(t==null)return!1;H[t._gsTweenID]&&W(),this.vars.css||t.style&&t!==e&&t.nodeType&&j.css&&this.vars.autoCSS!==!1&&D(this.vars,t);for(s in this.vars){c=this.vars[s];if(q[s])c&&(c instanceof Array||c.push&&a(c))&&c.join("").indexOf("{self}")!==-1&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(j[s]&&(f=new j[s])._onInitTween(t,this.vars[s],this)){this._firstPT=l={_next:this._firstPT,t:f,p:"setRatio",s:0,c:1,f:!0,n:s,pg:!0,pr:f._priority},o=f._overwriteProps.length;while(--o>-1)n[f._overwriteProps[o]]=this._firstPT;if(f._priority||f._onInitAllProps)u=!0;if(f._onDisable||f._onEnable)this._notifyPluginsOfEnabled=!0}else this._firstPT=n[s]=l={_next:this._firstPT,t:t,p:s,f:typeof t[s]=="function",n:s,pg:!1,pr:0},l.s=l.f?t[s.indexOf("set")||typeof t["get"+s.substr(3)]!="function"?s:"get"+s.substr(3)]():parseFloat(t[s]),l.c=typeof c=="string"&&c.charAt(1)==="="?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return i&&this._kill(i,t)?this._initProps(t,n,r,i):this._overwrite>1&&this._firstPT&&r.length>1&&V(t,this,n,this._overwrite,r)?(this._kill(n,t),this._initProps(t,n,r,i)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(H[t._gsTweenID]=!0),u)},c.render=function(e,t,n){var r=this._time,i=this._duration,o=this._rawPrevTime,u,a,f,l;if(e>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(u=!0,a="onComplete"),i===0&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(e===0||o<0||o===s)&&o!==e&&(n=!0,o>s&&(a="onReverseComplete")),this._rawPrevTime=l=!t||e||o===e?e:s);else if(e<1e-7){this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(r!==0||i===0&&o>0&&o!==s)a="onReverseComplete",u=this._reversed;e<0&&(this._active=!1,i===0&&(this._initted||!this.vars.lazy||n)&&(o>=0&&(n=!0),this._rawPrevTime=l=!t||e||o===e?e:s)),this._initted||(n=!0)}else{this._totalTime=this._time=e;if(this._easeType){var c=e/i,h=this._easeType,p=this._easePower;if(h===1||h===3&&c>=.5)c=1-c;h===3&&(c*=2),p===1?c*=c:p===2?c*=c*c:p===3?c*=c*c*c:p===4&&(c*=c*c*c*c),h===1?this.ratio=1-c:h===2?this.ratio=c:e/i<.5?this.ratio=c/2:this.ratio=1-c/2}else this.ratio=this._ease.getRatio(e/i)}if(this._time===r&&!n)return;if(!this._initted){this._init();if(!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)){this._time=this._totalTime=r,this._rawPrevTime=o,P.push(this),this._lazy=[e,t];return}this._time&&!u?this.ratio=this._ease.getRatio(this._time/i):u&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(this._time===0?0:1))}this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==r&&e>=0&&(this._active=!0),r===0&&(this._startAt&&(e>=0?this._startAt.render(e,t,n):a||(a="_dummyGS")),this.vars.onStart&&(this._time!==0||i===0)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||b))),f=this._firstPT;while(f)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._time!==r||u)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||b)),a&&(!this._gc||n)&&(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),u&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||b),i===0&&this._rawPrevTime===s&&l!==s&&(this._rawPrevTime=0))},c._kill=function(e,t){e==="all"&&(e=null);if(e==null)if(t==null||t===this.target)return this._lazy=!1,this._enabled(!1,!1);t=typeof t!="string"?t||this._targets||this.target:M.selector(t)||t;var n,r,i,s,o,u,f,l;if((a(t)||_(t))&&typeof t[0]!="number"){n=t.length;while(--n>-1)this._kill(e,t[n])&&(u=!0)}else{if(this._targets){n=this._targets.length;while(--n>-1)if(t===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){f=e||o,l=e!==r&&r!=="all"&&e!==o&&(typeof e!="object"||!e._tempKill);for(i in f){if(s=o[i]){s.pg&&s.t._kill(f)&&(u=!0);if(!s.pg||s.t._overwriteProps.length===0)s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null;delete o[i]}l&&(r[i]=1)}!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return u},c.invalidate=function(){return this._notifyPluginsOfEnabled&&M._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],L.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-s,this.render(-this._delay)),this},c._enabled=function(e,t){p||h.wake();if(e&&this._gc){var n=this._targets,r;if(n){r=n.length;while(--r>-1)this._siblings[r]=X(n[r],this,!0)}else this._siblings=X(this.target,this,!0)}return L.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?M._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},M.to=function(e,t,n){return new M(e,t,n)},M.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=n.immediateRender!=0,new M(e,t,n)},M.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,new M(e,t,r)},M.delayedCall=function(e,t,n,r,i){return new M(t,0,{delay:e,onComplete:t,onCompleteParams:n,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:n,onReverseCompleteScope:r,immediateRender:!1,useFrames:i,overwrite:0})},M.set=function(e,t){return new M(e,0,t)},M.getTweensOf=function(e,t){if(e==null)return[];e=typeof e!="string"?e:M.selector(e)||e;var n,r,i,s;if((a(e)||_(e))&&typeof e[0]!="number"){n=e.length,r=[];while(--n>-1)r=r.concat(M.getTweensOf(e[n],t));n=r.length;while(--n>-1){s=r[n],i=n;while(--i>-1)s===r[i]&&r.splice(n,1)}}else{r=X(e).concat(),n=r.length;while(--n>-1)(r[n]._gc||t&&!r[n].isActive())&&r.splice(n,1)}return r},M.killTweensOf=M.killDelayedCallsTo=function(e,t,n){typeof t=="object"&&(n=t,t=!1);var r=M.getTweensOf(e,t),i=r.length;while(--i>-1)r[i]._kill(n,e)};var J=g("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=J.prototype},!0);c=J.prototype,J.version="1.10.1",J.API=2,c._firstPT=null,c._addTween=function(e,t,n,r,i,s){var o,u;if(r!=null&&(o=typeof r=="number"||r.charAt(1)!=="="?Number(r)-n:parseInt(r.charAt(0)+"1",10)*Number(r.substr(2))))return this._firstPT=u={_next:this._firstPT,t:e,p:t,s:n,c:o,f:typeof e[t]=="function",n:i||t,r:s},u._next&&(u._next._prev=u),u},c.setRatio=function(e){var t=this._firstPT,n=1e-6,r;while(t)r=t.c*e+t.s,t.r?r=Math.round(r):r<n&&r>-n&&(r=0),t.f?t.t[t.p](r):t.t[t.p]=r,t=t._next},c._kill=function(e){var t=this._overwriteProps,n=this._firstPT,r;if(e[this._propName]!=null)this._overwriteProps=[];else{r=t.length;while(--r>-1)e[t[r]]!=null&&t.splice(r,1)}while(n)e[n.n]!=null&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},c._roundProps=function(e,t){var n=this._firstPT;while(n){if(e[this._propName]||n.n!=null&&e[n.n.split(this._propName+"_").join("")])n.r=t;n=n._next}},M._onPluginEvent=function(e,t){var n=t._firstPT,r,i,s,o,u;if(e==="_onInitAllProps"){while(n){u=n._next,i=s;while(i&&i.pr>n.pr)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=u}n=t._firstPT=s}while(n)n.pg&&typeof n.t[e]=="function"&&n.t[e]()&&(r=!0),n=n._next;return r},J.activate=function(e){var t=e.length;while(--t>-1)e[t].API===J.API&&(j[(new e[t])._propName]=e[t]);return!0},m.plugin=function(e){if(!e||!e.propName||!e.init||!e.API)throw"illegal plugin definition.";var t=e.propName,n=e.priority||0,r=e.overwriteProps,i={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},s=g("plugins."+t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",function(){J.call(this,t,n),this._overwriteProps=r||[]},e.global===!0),o=s.prototype=new J(t),u;o.constructor=s,s.API=e.API;for(u in i)typeof e[u]=="function"&&(o[i[u]]=e[u]);return s.version=e.version,J.activate([s]),s},f=e._gsQueue;if(f){for(l=0;l<f.length;l++)f[l]();for(c in d)d[c].func||e.console.log("GSAP encountered missing dependency: com.greensock."+c)}p=!1}(typeof module!="undefined"&&module.exports&&typeof global!="undefined"?global:this||window,"TweenLite"),define("TweenLite",function(){});var _gsScope=typeof module!="undefined"&&module.exports&&typeof global!="undefined"?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var r=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},i=1e-10,s=[],o=t._internals,u=o.lazyTweens,a=o.lazyRender,f=new n(null,null,1,0),l=r.prototype=new e;return l.constructor=r,l.kill()._gc=!1,r.version="1.13.2",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},l.addCallback=function(e,n,r,i){return this.add(t.delayedCall(0,e,r,i),n)},l.removeCallback=function(e,t){if(e)if(t==null)this._kill(null,e);else{var n=this.getTweensOf(e,!1),r=n.length,i=this._parseTimeOrLabel(t);while(--r>-1)n[r]._startTime===i&&n[r]._enabled(!1,!1)}return this},l.tweenTo=function(e,n){n=n||{};var r={ease:f,overwrite:n.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1},i,o,u;for(o in n)r[o]=n[o];return r.time=this._parseTimeOrLabel(e),i=Math.abs(Number(r.time)-this._time)/this._timeScale||.001,u=new t(this,i,r),r.onStart=function(){u.target.paused(!0),u.vars.time!==u.target.time()&&i===u.duration()&&u.duration(Math.abs(u.vars.time-u.target.time())/u.target._timeScale),n.onStart&&n.onStart.apply(n.onStartScope||u,n.onStartParams||s)},u},l.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],onCompleteScope:this},n.immediateRender=n.immediateRender!==!1;var r=this.tweenTo(t,n);return r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)},l.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r=this._dirty?this.totalDuration():this._totalDuration,o=this._duration,f=this._time,l=this._totalTime,c=this._startTime,h=this._timeScale,p=this._rawPrevTime,d=this._paused,v=this._cycle,m,g,y,b,w,E;if(e>=r)this._locked||(this._totalTime=r,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,b="onComplete",this._duration===0&&(e===0||p<0||p===i)&&p!==e&&this._first&&(w=!0,p>i&&(b="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,this._yoyo&&(this._cycle&1)!==0?this._time=e=0:(this._time=o,e=o+1e-4);else if(e<1e-7){this._locked||(this._totalTime=this._cycle=0),this._time=0;if(f!==0||o===0&&p!==i&&(p>0||e<0&&p>=0)&&!this._locked)b="onReverseComplete",g=this._reversed;e<0?(this._active=!1,p>=0&&this._first&&(w=!0),this._rawPrevTime=e):(this._rawPrevTime=o||!t||e||this._rawPrevTime===e?e:i,e=0,this._initted||(w=!0))}else o===0&&p<0&&(w=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,this._repeat!==0&&(E=o+this._repeatDelay,this._cycle=this._totalTime/E>>0,this._cycle!==0&&this._cycle===this._totalTime/E&&this._cycle--,this._time=this._totalTime-this._cycle*E,this._yoyo&&(this._cycle&1)!==0&&(this._time=o-this._time),this._time>o?(this._time=o,e=o+1e-4):this._time<0?this._time=e=0:e=this._time));if(this._cycle!==v&&!this._locked){var S=this._yoyo&&(v&1)!==0,x=S===(this._yoyo&&(this._cycle&1)!==0),T=this._totalTime,N=this._cycle,C=this._rawPrevTime,k=this._time;this._totalTime=v*o,this._cycle<v?S=!S:this._totalTime+=o,this._time=f,this._rawPrevTime=o===0?p-1e-4:p,this._cycle=v,this._locked=!0,f=S?0:o,this.render(f,t,o===0),t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||s),x&&(f=S?o+1e-4:-0.0001,this.render(f,!0,!1)),this._locked=!1;if(this._paused&&!d)return;this._time=k,this._totalTime=T,this._cycle=N,this._rawPrevTime=C}if((this._time===f||!this._first)&&!n&&!w){l!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s));return}this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==l&&e>0&&(this._active=!0),l===0&&this.vars.onStart&&this._totalTime!==0&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s));if(this._time>=f){m=this._first;while(m){y=m._next;if(this._paused&&!d)break;if(m._active||m._startTime<=this._time&&!m._paused&&!m._gc)m._reversed?m.render((m._dirty?m.totalDuration():m._totalDuration)-(e-m._startTime)*m._timeScale,t,n):m.render((e-m._startTime)*m._timeScale,t,n);m=y}}else{m=this._last;while(m){y=m._prev;if(this._paused&&!d)break;if(m._active||m._startTime<=f&&!m._paused&&!m._gc)m._reversed?m.render((m._dirty?m.totalDuration():m._totalDuration)-(e-m._startTime)*m._timeScale,t,n):m.render((e-m._startTime)*m._timeScale,t,n);m=y}}this._onUpdate&&(t||(u.length&&a(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s))),b&&(this._locked||!this._gc&&(c===this._startTime||h!==this._timeScale)&&(this._time===0||r>=this.totalDuration())&&(g&&(u.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[b]&&this.vars[b].apply(this.vars[b+"Scope"]||this,this.vars[b+"Params"]||s)))},l.getActive=function(e,t,n){e==null&&(e=!0),t==null&&(t=!0),n==null&&(n=!1);var r=[],i=this.getChildren(e,t,n),s=0,o=i.length,u,a;for(u=0;u<o;u++)a=i[u],a.isActive()&&(r[s++]=a);return r},l.getLabelAfter=function(e){e||e!==0&&(e=this._time);var t=this.getLabelsArray(),n=t.length,r;for(r=0;r<n;r++)if(t[r].time>e)return t[r].name;return null},l.getLabelBefore=function(e){e==null&&(e=this._time);var t=this.getLabelsArray(),n=t.length;while(--n>-1)if(t[n].time<e)return t[n].name;return null},l.getLabelsArray=function(){var e=[],t=0,n;for(n in this._labels)e[t++]={time:this._labels[n],name:n};return e.sort(function(e,t){return e.time-t.time}),e},l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},l.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&(this._cycle&1)!==0?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):this._repeat!==0&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},l.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},r},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n=this.vars,r,i;for(i in n)r=n[i],u(r)&&r.join("").indexOf("{self}")!==-1&&(n[i]=this._swapSelfInParams(r));u(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},i=1e-10,s=n._internals,o=s.isSelector,u=s.isArray,a=s.lazyTweens,f=s.lazyRender,l=[],c=_gsScope._gsDefine.globals,h=function(e){var t={},n;for(n in e)t[n]=e[n];return t},p=function(e,t,n,r){var i=e._timeline._totalTime;if(t||!this._forcingPlayhead)e._timeline.pause(e._startTime),t&&t.apply(r||e._timeline,n||l),this._forcingPlayhead&&e._timeline.seek(i)},d=function(e){var t=[],n=e.length,r;for(r=0;r!==n;t.push(e[r++]));return t},v=r.prototype=new t;return r.version="1.13.2",v.constructor=r,v.kill()._gc=v._forcingPlayhead=!1,v.to=function(e,t,r,i){var s=r.repeat&&c.TweenMax||n;return t?this.add(new s(e,t,r),i):this.set(e,r,i)},v.from=function(e,t,r,i){return this.add((r.repeat&&c.TweenMax||n).from(e,t,r),i)},v.fromTo=function(e,t,r,i,s){var o=i.repeat&&c.TweenMax||n;return t?this.add(o.fromTo(e,t,r,i),s):this.set(e,i,s)},v.staggerTo=function(e,t,i,s,u,a,f,l){var c=new r({onComplete:a,onCompleteParams:f,onCompleteScope:l,smoothChildTiming:this.smoothChildTiming}),p;typeof e=="string"&&(e=n.selector(e)||e),o(e)&&(e=d(e)),s=s||0;for(p=0;p<e.length;p++)i.startAt&&(i.startAt=h(i.startAt)),c.to(e[p],t,h(i),p*s);return this.add(c,u)},v.staggerFrom=function(e,t,n,r,i,s,o,u){return n.immediateRender=n.immediateRender!=0,n.runBackwards=!0,this.staggerTo(e,t,n,r,i,s,o,u)},v.staggerFromTo=function(e,t,n,r,i,s,o,u,a){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,this.staggerTo(e,t,r,i,s,o,u,a)},v.call=function(e,t,r,i){return this.add(n.delayedCall(0,e,t,r),i)},v.set=function(e,t,r){return r=this._parseTimeOrLabel(r,0,!0),t.immediateRender==null&&(t.immediateRender=r===this._time&&!this._paused),this.add(new n(e,0,t),r)},r.exportRoot=function(e,t){e=e||{},e.smoothChildTiming==null&&(e.smoothChildTiming=!0);var i=new r(e),s=i._timeline,o,u;t==null&&(t=!0),s._remove(i,!0),i._startTime=0,i._rawPrevTime=i._time=i._totalTime=s._time,o=s._first;while(o)u=o._next,(!t||!(o instanceof n&&o.target===o.vars.onComplete))&&i.add(o,o._startTime-o._delay),o=u;return s.add(i,0),i},v.add=function(i,s,o,a){var f,l,c,h,p,d;typeof s!="number"&&(s=this._parseTimeOrLabel(s,0,!0,i));if(!(i instanceof e)){if(i instanceof Array||i&&i.push&&u(i)){o=o||"normal",a=a||0,f=s,l=i.length;for(c=0;c<l;c++)u(h=i[c])&&(h=new r({tweens:h})),this.add(h,f),typeof h!="string"&&typeof h!="function"&&(o==="sequence"?f=h._startTime+h.totalDuration()/h._timeScale:o==="start"&&(h._startTime-=h.delay())),f+=a;return this._uncache(!0)}if(typeof i=="string")return this.addLabel(i,s);if(typeof i!="function")throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string.";i=n.delayedCall(0,i)}t.prototype.add.call(this,i,s);if(this._gc||this._time===this._duration)if(!this._paused&&this._duration<this.duration()){p=this,d=p.rawTime()>i._startTime;while(p._timeline)d&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline}return this},v.remove=function(t){if(t instanceof e)return this._remove(t,!1);if(t instanceof Array||t&&t.push&&u(t)){var n=t.length;while(--n>-1)this.remove(t[n]);return this}return typeof t=="string"?this.removeLabel(t):this.kill(null,t)},v._remove=function(e,n){t.prototype._remove.call(this,e,n);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},v.insert=v.insertMultiple=function(e,t,n,r){return this.add(e,t||0,n,r)},v.appendMultiple=function(e,t,n,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,r)},v.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},v.addPause=function(e,t,n,r){return this.call(p,["{self}",t,n,r],this,e)},v.removeLabel=function(e){return delete this._labels[e],this},v.getLabelTime=function(e){return this._labels[e]!=null?this._labels[e]:-1},v._parseTimeOrLabel=function(t,n,r,i){var s;if(i instanceof e&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&u(i))){s=i.length;while(--s>-1)i[s]instanceof e&&i[s].timeline===this&&this.remove(i[s])}if(typeof n=="string")return this._parseTimeOrLabel(n,r&&typeof t=="number"&&this._labels[n]==null?t-this.duration():0,r);n=n||0;if(typeof t!="string"||!isNaN(t)&&this._labels[t]==null)t==null&&(t=this.duration());else{s=t.indexOf("=");if(s===-1)return this._labels[t]==null?r?this._labels[t]=this.duration()+n:n:this._labels[t]+n;n=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,r):this.duration()}return Number(t)+n},v.seek=function(e,t){return this.totalTime(typeof e=="number"?e:this._parseTimeOrLabel(e),t!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(e,t){return this.play(e,t)},v.gotoAndStop=function(e,t){return this.pause(e,t)},v.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r=this._dirty?this.totalDuration():this._totalDuration,s=this._time,o=this._startTime,u=this._timeScale,c=this._paused,h,p,d,v,m;if(e>=r)this._totalTime=this._time=r,this._reversed||this._hasPausedChild()||(p=!0,v="onComplete",this._duration===0&&(e===0||this._rawPrevTime<0||this._rawPrevTime===i)&&this._rawPrevTime!==e&&this._first&&(m=!0,this._rawPrevTime>i&&(v="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,e=r+1e-4;else if(e<1e-7){this._totalTime=this._time=0;if(s!==0||this._duration===0&&this._rawPrevTime!==i&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0))v="onReverseComplete",p=this._reversed;e<0?(this._active=!1,this._rawPrevTime>=0&&this._first&&(m=!0),this._rawPrevTime=e):(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,e=0,this._initted||(m=!0))}else this._totalTime=this._time=this._rawPrevTime=e;if((this._time===s||!this._first)&&!n&&!m)return;this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==s&&e>0&&(this._active=!0),s===0&&this.vars.onStart&&this._time!==0&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l));if(this._time>=s){h=this._first;while(h){d=h._next;if(this._paused&&!c)break;if(h._active||h._startTime<=this._time&&!h._paused&&!h._gc)h._reversed?h.render((h._dirty?h.totalDuration():h._totalDuration)-(e-h._startTime)*h._timeScale,t,n):h.render((e-h._startTime)*h._timeScale,t,n);h=d}}else{h=this._last;while(h){d=h._prev;if(this._paused&&!c)break;if(h._active||h._startTime<=s&&!h._paused&&!h._gc)h._reversed?h.render((h._dirty?h.totalDuration():h._totalDuration)-(e-h._startTime)*h._timeScale,t,n):h.render((e-h._startTime)*h._timeScale,t,n);h=d}}this._onUpdate&&(t||(a.length&&f(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l))),v&&!this._gc&&(o===this._startTime||u!==this._timeScale)&&(this._time===0||r>=this.totalDuration())&&(p&&(a.length&&f(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[v]&&this.vars[v].apply(this.vars[v+"Scope"]||this,this.vars[v+"Params"]||l))},v._hasPausedChild=function(){var e=this._first;while(e){if(e._paused||e instanceof r&&e._hasPausedChild())return!0;e=e._next}return!1},v.getChildren=function(e,t,r,i){i=i||-9999999999;var s=[],o=this._first,u=0;while(o)o._startTime<i||(o instanceof n?t!==!1&&(s[u++]=o):(r!==!1&&(s[u++]=o),e!==!1&&(s=s.concat(o.getChildren(!0,t,r)),u=s.length))),o=o._next;return s},v.getTweensOf=function(e,t){var r=this._gc,i=[],s=0,o,u;r&&this._enabled(!0,!0),o=n.getTweensOf(e),u=o.length;while(--u>-1)if(o[u].timeline===this||t&&this._contains(o[u]))i[s++]=o[u];return r&&this._enabled(!1,!0),i},v._contains=function(e){var t=e.timeline;while(t){if(t===this)return!0;t=t.timeline}return!1},v.shiftChildren=function(e,t,n){n=n||0;var r=this._first,i=this._labels,s;while(r)r._startTime>=n&&(r._startTime+=e),r=r._next;if(t)for(s in i)i[s]>=n&&(i[s]+=e);return this._uncache(!0)},v._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=n.length,i=!1;while(--r>-1)n[r]._kill(e,t)&&(i=!0);return i},v.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;this._time=this._totalTime=0;while(--n>-1)t[n]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){var t=this._first;while(t)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},v._enabled=function(e,n){if(e===this._gc){var r=this._first;while(r)r._enabled(e,!0),r=r._next}return t.prototype._enabled.call(this,e,n)},v.totalTime=function(t,n,r){this._forcingPlayhead=!0;var i=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},v.duration=function(e){return arguments.length?(this.duration()!==0&&e!==0&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(e){if(!arguments.length){if(this._dirty){var t=0,n=this._last,r=999999999999,i,s;while(n)i=n._prev,n._dirty&&n.totalDuration(),n._startTime>r&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):r=n._startTime,n._startTime<0&&!n._paused&&(t-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),r=0),s=n._startTime+n._totalDuration/n._timeScale,s>t&&(t=s),n=i;this._duration=this._totalDuration=t,this._dirty=!1}return this._totalDuration}return this.totalDuration()!==0&&e!==0&&this.timeScale(this._totalDuration/e),this},v.usesFrames=function(){var t=this._timeline;while(t._timeline)t=t._timeline;return t===e._rootFramesTimeline},v.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};typeof define=="function"&&define.amd?define("TimelineMax",["TweenLite"],t):typeof module!="undefined"&&module.exports&&(require("./TweenLite.js"),module.exports=t())}("TimelineMax"),function(e){function t(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function n(e,t){if(typeof e!="function")throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function r(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){r.prototype.dispatch.apply(e,arguments)}}t.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&!!this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,n,r,i){var s=this._indexOfListener(e,r),o;if(s!==-1){o=this._bindings[s];if(o.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new t(this,e,n,r,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){var n=this._bindings.length,r;while(n--){r=this._bindings[n];if(r._listener===e&&r.context===t)return n}return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,t,r){return n(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return n(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){n(e,"remove");var r=this._indexOfListener(e,t);return r!==-1&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){var e=this._bindings.length;while(e--)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(!this.active)return;var t=Array.prototype.slice.call(arguments),n=this._bindings.length,r;this.memorize&&(this._prevParams=t);if(!n)return;r=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(r[n]&&this._shouldPropagate&&r[n].execute(t)!==!1)},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var i=r;i.Signal=r,typeof define=="function"&&define.amd?define("signals",[],function(){return i}):typeof module!="undefined"&&module.exports?module.exports=i:e.signals=i}(this),function(){function e(e,t,n){n=(n||0)-1;for(var r=e?e.length:0;++n<r;)if(e[n]===t)return n;return-1}function t(t,n){var r=typeof n;if(t=t.l,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:g+n;return t=(t=t[r])&&t[i],"object"==r?t&&-1<e(t,n)?0:-1:t?0:-1}function n(e){var t=this.l,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:g+e,t=t[n]||(t[n]={});"object"==n?(t[r]||(t[r]=[])).push(e):t[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,t){for(var n=e.m,r=t.m,i=-1,s=n.length;++i<s;){var o=n[i],u=r[i];if(o!==u){if(o>u||typeof o=="undefined")return 1;if(o<u||typeof u=="undefined")return-1}}return e.n-t.n}function s(e){var t=-1,r=e.length,i=e[0],s=e[r/2|0],o=e[r-1];if(i&&typeof i=="object"&&s&&typeof s=="object"&&o&&typeof o=="object")return!1;for(i=a(),i["false"]=i["null"]=i["true"]=i.undefined=!1,s=a(),s.k=e,s.l=i,s.push=n;++t<r;)s.push(e[t]);return s}function o(e){return"\\"+V[e]}function u(){return d.pop()||[]}function a(){return v.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,"undefined":!1,o:null}}function f(e){e.length=0,d.length<b&&d.push(e)}function l(e){var t=e.l;t&&l(t),e.k=e.l=e.m=e.object=e.number=e.string=e.o=null,v.length<b&&v.push(e)}function c(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1;n=n-t||0;for(var i=Array(0>n?0:n);++r<n;)i[r]=e[t+r];return i}function h(n){function d(e,t,n){if(!e||!X[typeof e])return e;t=t&&typeof n=="undefined"?t:tt(t,n,3);for(var r=-1,i=X[typeof e]&&jn(e),s=i?i.length:0;++r<s&&(n=i[r],!1!==t(e[n],n,e)););return e}function v(e,t,n){var r;if(!e||!X[typeof e])return e;t=t&&typeof n=="undefined"?t:tt(t,n,3);for(r in e)if(!1===t(e[r],r,e))break;return e}function b(e,t,n){var r,i=e,s=i;if(!i)return s;for(var o=arguments,u=0,a=typeof n=="number"?2:o.length;++u<a;)if((i=o[u])&&X[typeof i])for(var f=-1,l=X[typeof i]&&jn(i),c=l?l.length:0;++f<c;)r=l[f],"undefined"==typeof s[r]&&(s[r]=i[r]);return s}function V(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,u=0,a=typeof n=="number"?2:o.length;if(3<a&&"function"==typeof o[a-2])var f=tt(o[--a-1],o[a--],2);else 2<a&&"function"==typeof o[a-1]&&(f=o[--a]);for(;++u<a;)if((i=o[u])&&X[typeof i])for(var l=-1,c=X[typeof i]&&jn(i),h=c?c.length:0;++l<h;)r=c[l],s[r]=f?f(s[r],i[r]):i[r];return s}function J(e){var t,n=[];if(!e||!X[typeof e])return n;for(t in e)yn.call(e,t)&&n.push(t);return n}function K(e){return e&&typeof e=="object"&&!Bn(e)&&yn.call(e,"__wrapped__")?e:new Q(e)}function Q(e,t){this.__chain__=!!t,this.__wrapped__=e}function G(e){function t(){if(r){var e=c(r);bn.apply(e,arguments)}if(this instanceof t){var s=et(n.prototype),e=n.apply(s,e||arguments);return Et(e)?e:s}return n.apply(i,e||arguments)}var n=e[0],r=e[2],i=e[4];return Hn(t,e),t}function Z(e,t,n,r,i){if(n){var s=n(e);if(typeof s!="undefined")return s}if(!Et(e))return e;var o=cn.call(e);if(!U[o])return e;var a=Dn[o];switch(o){case H:case B:return new a(+e);case F:case R:return new a(e);case q:return s=a(e.source,N.exec(e)),s.lastIndex=e.lastIndex,s}if(o=Bn(e),t){var l=!r;r||(r=u()),i||(i=u());for(var h=r.length;h--;)if(r[h]==e)return i[h];s=o?a(e.length):{}}else s=o?c(e):V({},e);return o&&(yn.call(e,"index")&&(s.index=e.index),yn.call(e,"input")&&(s.input=e.input)),t?(r.push(e),i.push(s),(o?At:d)(e,function(e,o){s[o]=Z(e,t,n,r,i)}),l&&(f(r),f(i)),s):s}function et(e){return Et(e)?Tn(e):{}}function tt(e,t,n){if(typeof e!="function")return Vt;if(typeof t!="undefined"&&"prototype"in e){var r=e.__bindData__;if(typeof r=="undefined"&&(Pn.funcNames&&(r=!e.name),r=r||!Pn.funcDecomp,!r)){var i=mn.call(e);Pn.funcNames||(r=!C.test(i)),r||(r=O.test(i),Hn(e,r))}if(!1===r||!0!==r&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return Wt(e,t)}return e}function nt(e){function t(){var e=a?o:this;if(i){var d=c(i);bn.apply(d,arguments)}return(s||l)&&(d||(d=c(arguments)),s&&bn.apply(d,s),l&&d.length<u)?(r|=16,nt([n,h?r:-4&r,d,null,o,u])):(d||(d=arguments),f&&(n=e[p]),this instanceof t?(e=et(n.prototype),d=n.apply(e,d),Et(d)?d:e):n.apply(e,d))}var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],a=1&r,f=2&r,l=4&r,h=8&r,p=n;return Hn(t,e),t}function rt(n,r){var i=-1,o=ht(),u=n?n.length:0,a=u>=y&&o===e,f=[];if(a){var c=s(r);c?(o=t,r=c):a=!1}for(;++i<u;)c=n[i],0>o(r,c)&&f.push(c);return a&&l(r),f}function it(e,t,n,r){r=(r||0)-1;for(var i=e?e.length:0,s=[];++r<i;){var o=e[r];if(o&&typeof o=="object"&&typeof o.length=="number"&&(Bn(o)||mt(o))){t||(o=it(o,t,n));var u=-1,a=o.length,f=s.length;for(s.length+=a;++u<a;)s[f++]=o[u]}else n||s.push(o)}return s}function st(e,t,n,r,i,s){if(n){var o=n(e,t);if(typeof o!="undefined")return!!o}if(e===t)return 0!==e||1/e==1/t;if(e===e&&!(e&&X[typeof e]||t&&X[typeof t]))return!1;if(null==e||null==t)return e===t;var a=cn.call(e),l=cn.call(t);if(a==D&&(a=I),l==D&&(l=I),a!=l)return!1;switch(a){case H:case B:return+e==+t;case F:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case q:case R:return e==on(t)}if(l=a==P,!l){var c=yn.call(e,"__wrapped__"),h=yn.call(t,"__wrapped__");if(c||h)return st(c?e.__wrapped__:e,h?t.__wrapped__:t,n,r,i,s);if(a!=I)return!1;if(a=e.constructor,c=t.constructor,a!=c&&!(wt(a)&&a instanceof a&&wt(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}for(a=!i,i||(i=u()),s||(s=u()),c=i.length;c--;)if(i[c]==e)return s[c]==t;var p=0,o=!0;if(i.push(e),s.push(t),l){if(c=e.length,p=t.length,(o=p==c)||r)for(;p--;)if(l=c,h=t[p],r)for(;l--&&!(o=st(e[l],h,n,r,i,s)););else if(!(o=st(e[p],h,n,r,i,s)))break}else v(t,function(t,u,a){return yn.call(a,u)?(p++,o=yn.call(e,u)&&st(e[u],t,n,r,i,s)):void 0}),o&&!r&&v(e,function(e,t,n){return yn.call(n,t)?o=-1<--p:void 0});return i.pop(),s.pop(),a&&(f(i),f(s)),o}function ot(e,t,n,r,i){(Bn(t)?At:d)(t,function(t,s){var o,u,a=t,f=e[s];if(t&&((u=Bn(t))||Un(t))){for(a=r.length;a--;)if(o=r[a]==t){f=i[a];break}if(!o){var l;n&&(a=n(f,t),l=typeof a!="undefined")&&(f=a),l||(f=u?Bn(f)?f:[]:Un(f)?f:{}),r.push(t),i.push(f),l||ot(f,t,n,r,i)}}else n&&(a=n(f,t),typeof a=="undefined"&&(a=t)),typeof a!="undefined"&&(f=a);e[s]=f})}function ut(e,t){return e+vn(_n()*(t-e+1))}function at(n,r,i){var o=-1,a=ht(),c=n?n.length:0,h=[],p=!r&&c>=y&&a===e,d=i||p?u():h;for(p&&(d=s(d),a=t);++o<c;){var v=n[o],m=i?i(v,o,n):v;(r?!o||d[d.length-1]!==m:0>a(d,m))&&((i||p)&&d.push(m),h.push(v))}return p?(f(d.k),l(d)):i&&f(d),h}function ft(e){return function(t,n,r){var i={};n=K.createCallback(n,r,3),r=-1;var s=t?t.length:0;if(typeof s=="number")for(;++r<s;){var o=t[r];e(i,o,n(o,r,t),t)}else d(t,function(t,r,s){e(i,t,n(t,r,s),s)});return i}}function lt(e,t,n,r,i,s){var o=1&t,u=4&t,a=16&t,f=32&t;if(!(2&t||wt(e)))throw new un;a&&!n.length&&(t&=-17,a=n=!1),f&&!r.length&&(t&=-33,f=r=!1);var l=e&&e.__bindData__;return l&&!0!==l?(l=c(l),l[2]&&(l[2]=c(l[2])),l[3]&&(l[3]=c(l[3])),!o||1&l[1]||(l[4]=i),!o&&1&l[1]&&(t|=8),!u||4&l[1]||(l[5]=s),a&&bn.apply(l[2]||(l[2]=[]),n),f&&Sn.apply(l[3]||(l[3]=[]),r),l[1]|=t,lt.apply(null,l)):(1==t||17===t?G:nt)([e,t,n,r,i,s])}function ct(e){return Fn[e]}function ht(){var t=(t=K.indexOf)===Ft?e:t;return t}function pt(e){return typeof e=="function"&&hn.test(e)}function dt(e){var t,n;return e&&cn.call(e)==I&&(t=e.constructor,!wt(t)||t instanceof t)?(v(e,function(e,t){n=t}),typeof n=="undefined"||yn.call(e,n)):!1}function vt(e){return In[e]}function mt(e){return e&&typeof e=="object"&&typeof e.length=="number"&&cn.call(e)==D||!1}function gt(e,t,n){var r=jn(e),i=r.length;for(t=tt(t,n,3);i--&&(n=r[i],!1!==t(e[n],n,e)););return e}function yt(e){var t=[];return v(e,function(e,n){wt(e)&&t.push(n)}),t.sort()}function bt(e){for(var t=-1,n=jn(e),r=n.length,i={};++t<r;){var s=n[t];i[e[s]]=s}return i}function wt(e){return typeof e=="function"}function Et(e){return!!e&&!!X[typeof e]}function St(e){return typeof e=="number"||e&&typeof e=="object"&&cn.call(e)==F||!1}function xt(e){return typeof e=="string"||e&&typeof e=="object"&&cn.call(e)==R||!1}function Tt(e){for(var t=-1,n=jn(e),r=n.length,i=Gt(r);++t<r;)i[t]=e[n[t]];return i}function Nt(e,t,n){var r=-1,i=ht(),s=e?e.length:0,o=!1;return n=(0>n?An(0,s+n):n)||0,Bn(e)?o=-1<i(e,t,n):typeof s=="number"?o=-1<(xt(e)?e.indexOf(t,n):i(e,t,n)):d(e,function(e){return++r<n?void 0:!(o=e===t)}),o}function Ct(e,t,n){var r=!0;t=K.createCallback(t,n,3),n=-1;var i=e?e.length:0;if(typeof i=="number")for(;++n<i&&(r=!!t(e[n],n,e)););else d(e,function(e,n,i){return r=!!t(e,n,i)});return r}function kt(e,t,n){var r=[];t=K.createCallback(t,n,3),n=-1;var i=e?e.length:0;if(typeof i=="number")for(;++n<i;){var s=e[n];t(s,n,e)&&r.push(s)}else d(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Lt(e,t,n){t=K.createCallback(t,n,3),n=-1;var r=e?e.length:0;if(typeof r!="number"){var i;return d(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}for(;++n<r;){var s=e[n];if(t(s,n,e))return s}}function At(e,t,n){var r=-1,i=e?e.length:0;if(t=t&&typeof n=="undefined"?t:tt(t,n,3),typeof i=="number")for(;++r<i&&!1!==t(e[r],r,e););else d(e,t);return e}function Ot(e,t,n){var r=e?e.length:0;if(t=t&&typeof n=="undefined"?t:tt(t,n,3),typeof r=="number")for(;r--&&!1!==t(e[r],r,e););else{var i=jn(e),r=i.length;d(e,function(e,n,s){return n=i?i[--r]:--r,t(s[n],n,s)})}return e}function Mt(e,t,n){var r=-1,i=e?e.length:0;if(t=K.createCallback(t,n,3),typeof i=="number")for(var s=Gt(i);++r<i;)s[r]=t(e[r],r,e);else s=[],d(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function _t(e,t,n){var i=-1/0,s=i;if(typeof t!="function"&&n&&n[t]===e&&(t=null),null==t&&Bn(e)){n=-1;for(var o=e.length;++n<o;){var u=e[n];u>s&&(s=u)}}else t=null==t&&xt(e)?r:K.createCallback(t,n,3),At(e,function(e,n,r){n=t(e,n,r),n>i&&(i=n,s=e)});return s}function Dt(e,t,n,r){if(!e)return n;var i=3>arguments.length;t=K.createCallback(t,r,4);var s=-1,o=e.length;if(typeof o=="number")for(i&&(n=e[++s]);++s<o;)n=t(n,e[s],s,e);else d(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Pt(e,t,n,r){var i=3>arguments.length;return t=K.createCallback(t,r,4),Ot(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function Ht(e){var t=-1,n=e?e.length:0,r=Gt(typeof n=="number"?n:0);return At(e,function(e){var n=ut(0,++t);r[t]=r[n],r[n]=e}),r}function Bt(e,t,n){var r;t=K.createCallback(t,n,3),n=-1;var i=e?e.length:0;if(typeof i=="number")for(;++n<i&&!(r=t(e[n],n,e)););else d(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function jt(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=-1;for(t=K.createCallback(t,n,3);++s<i&&t(e[s],s,e);)r++}else if(r=t,null==r||n)return e?e[0]:p;return c(e,0,On(An(0,r),i))}function Ft(t,n,r){if(typeof r=="number"){var i=t?t.length:0;r=0>r?An(0,i+r):r||0}else if(r)return r=qt(t,n),t[r]===n?r:-1;return e(t,n,r)}function It(e,t,n){if(typeof t!="number"&&null!=t){var r=0,i=-1,s=e?e.length:0;for(t=K.createCallback(t,n,3);++i<s&&t(e[i],i,e);)r++}else r=null==t||n?1:An(0,t);return c(e,r)}function qt(e,t,n,r){var i=0,s=e?e.length:i;for(n=n?K.createCallback(n,r,1):Vt,t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=r+1:s=r;return i}function Rt(e,t,n,r){return typeof t!="boolean"&&null!=t&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=K.createCallback(n,r,3)),at(e,t,n)}function Ut(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,n=e?_t(Vn(e,"length")):0,r=Gt(0>n?0:n);++t<n;)r[t]=Vn(e,t);return r}function zt(e,t){var n=-1,r=e?e.length:0,i={};for(t||!r||Bn(e[0])||(t=[]);++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Wt(e,t){return 2<arguments.length?lt(e,17,c(arguments,2),null,t):lt(e,1,null,null,t)}function Xt(e,t,n){function r(){l&&dn(l),o=l=c=p,(v||d!==t)&&(h=$n(),u=e.apply(f,s),l||o||(s=f=null))}function i(){var n=t-($n()-a);0<n?l=wn(i,n):(o&&dn(o),n=c,o=l=c=p,n&&(h=$n(),u=e.apply(f,s),l||o||(s=f=null)))}var s,o,u,a,f,l,c,h=0,d=!1,v=!0;if(!wt(e))throw new un;if(t=An(0,t)||0,!0===n)var m=!0,v=!1;else Et(n)&&(m=n.leading,d="maxWait"in n&&(An(t,n.maxWait)||0),v="trailing"in n?n.trailing:v);return function(){if(s=arguments,a=$n(),f=this,c=v&&(l||!m),!1===d)var n=m&&!l;else{o||m||(h=a);var p=d-(a-h),g=0>=p;g?(o&&(o=dn(o)),h=a,u=e.apply(f,s)):o||(o=wn(r,p))}return g&&l?l=dn(l):l||t===d||(l=wn(i,t)),n&&(g=!0,u=e.apply(f,s)),!g||l||o||(s=f=null),u}}function Vt(e){return e}function $t(e,t,n){var r=!0,i=t&&yt(t);t&&(n||i.length)||(null==n&&(n=t),s=Q,t=e,e=K,i=yt(t)),!1===n?r=!1:Et(n)&&"chain"in n&&(r=n.chain);var s=e,o=wt(s);At(i,function(n){var i=e[n]=t[n];o&&(s.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,o=[n];if(bn.apply(o,arguments),o=i.apply(e,o),r||t){if(n===o&&Et(o))return this;o=new s(o),o.__chain__=t}return o})})}function Jt(){}function Kt(e){return function(t){return t[e]}}function Qt(){return this.__wrapped__}n=n?Y.defaults($.Object(),n,Y.pick($,_)):$;var Gt=n.Array,Yt=n.Boolean,Zt=n.Date,en=n.Function,tn=n.Math,nn=n.Number,rn=n.Object,sn=n.RegExp,on=n.String,un=n.TypeError,an=[],fn=rn.prototype,ln=n._,cn=fn.toString,hn=sn("^"+on(cn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),pn=tn.ceil,dn=n.clearTimeout,vn=tn.floor,mn=en.prototype.toString,gn=pt(gn=rn.getPrototypeOf)&&gn,yn=fn.hasOwnProperty,bn=an.push,wn=n.setTimeout,En=an.splice,Sn=an.unshift,xn=function(){try{var e={},t=pt(t=rn.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Tn=pt(Tn=rn.create)&&Tn,Nn=pt(Nn=Gt.isArray)&&Nn,Cn=n.isFinite,kn=n.isNaN,Ln=pt(Ln=rn.keys)&&Ln,An=tn.max,On=tn.min,Mn=n.parseInt,_n=tn.random,Dn={};Dn[P]=Gt,Dn[H]=Yt,Dn[B]=Zt,Dn[j]=en,Dn[I]=rn,Dn[F]=nn,Dn[q]=sn,Dn[R]=on,Q.prototype=K.prototype;var Pn=K.support={};Pn.funcDecomp=!pt(n.a)&&O.test(h),Pn.funcNames=typeof en.name=="string",K.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:k,variable:"",imports:{_:K}},Tn||(et=function(){function e(){}return function(t){if(Et(t)){e.prototype=t;var r=new e;e.prototype=null}return r||n.Object()}}());var Hn=xn?function(e,t){W.value=t,xn(e,"__bindData__",W)}:Jt,Bn=Nn||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&cn.call(e)==P||!1},jn=Ln?function(e){return Et(e)?Ln(e):[]}:J,Fn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},In=bt(Fn),qn=sn("("+jn(In).join("|")+")","g"),Rn=sn("["+jn(Fn).join("")+"]","g"),Un=gn?function(e){if(!e||cn.call(e)!=I)return!1;var t=e.valueOf,n=pt(t)&&(n=gn(t))&&gn(n);return n?e==n||gn(e)==n:dt(e)}:dt,zn=ft(function(e,t,n){yn.call(e,n)?e[n]++:e[n]=1}),Wn=ft(function(e,t,n){(yn.call(e,n)?e[n]:e[n]=[]).push(t)}),Xn=ft(function(e,t,n){e[n]=t}),Vn=Mt,$n=pt($n=Zt.now)&&$n||function(){return(new Zt).getTime()},Jn=8==Mn(w+"08")?Mn:function(e,t){return Mn(xt(e)?e.replace(L,""):e,t||0)};return K.after=function(e,t){if(!wt(t))throw new un;return function(){return 1>--e?t.apply(this,arguments):void 0}},K.assign=V,K.at=function(e){for(var t=arguments,n=-1,r=it(t,!0,!1,1),t=t[2]&&t[2][t[1]]===e?1:r.length,i=Gt(t);++n<t;)i[n]=e[r[n]];return i},K.bind=Wt,K.bindAll=function(e){for(var t=1<arguments.length?it(arguments,!0,!1,1):yt(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=lt(e[i],1,null,null,e)}return e},K.bindKey=function(e,t){return 2<arguments.length?lt(t,19,c(arguments,2),null,e):lt(t,3,null,null,e)},K.chain=function(e){return e=new Q(e),e.__chain__=!0,e},K.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r},K.compose=function(){for(var e=arguments,t=e.length;t--;)if(!wt(e[t]))throw new un;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},K.constant=function(e){return function(){return e}},K.countBy=zn,K.create=function(e,t){var n=et(e);return t?V(n,t):n},K.createCallback=function(e,t,n){var r=typeof e;if(null==e||"function"==r)return tt(e,t,n);if("object"!=r)return Kt(e);var i=jn(e),s=i[0],o=e[s];return 1!=i.length||o!==o||Et(o)?function(t){for(var n=i.length,r=!1;n--&&(r=st(t[i[n]],e[i[n]],null,!0)););return r}:function(e){return e=e[s],o===e&&(0!==o||1/o==1/e)}},K.curry=function(e,t){return t=typeof t=="number"?t:+t||e.length,lt(e,4,null,null,null,t)},K.debounce=Xt,K.defaults=b,K.defer=function(e){if(!wt(e))throw new un;var t=c(arguments,1);return wn(function(){e.apply(p,t)},1)},K.delay=function(e,t){if(!wt(e))throw new un;var n=c(arguments,2);return wn(function(){e.apply(p,n)},t)},K.difference=function(e){return rt(e,it(arguments,!0,!0,1))},K.filter=kt,K.flatten=function(e,t,n,r){return typeof t!="boolean"&&null!=t&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=Mt(e,n,r)),it(e,t)},K.forEach=At,K.forEachRight=Ot,K.forIn=v,K.forInRight=function(e,t,n){var r=[];v(e,function(e,t){r.push(t,e)});var i=r.length;for(t=tt(t,n,3);i--&&!1!==t(r[i--],r[i],e););return e},K.forOwn=d,K.forOwnRight=gt,K.functions=yt,K.groupBy=Wn,K.indexBy=Xn,K.initial=function(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=i;for(t=K.createCallback(t,n,3);s--&&t(e[s],s,e);)r++}else r=null==t||n?1:t||r;return c(e,0,On(An(0,i-r),i))},K.intersection=function(){for(var n=[],r=-1,i=arguments.length,o=u(),a=ht(),c=a===e,h=u();++r<i;){var p=arguments[r];(Bn(p)||mt(p))&&(n.push(p),o.push(c&&p.length>=y&&s(r?n[r]:h)))}var c=n[0],d=-1,v=c?c.length:0,m=[];e:for(;++d<v;){var g=o[0],p=c[d];if(0>(g?t(g,p):a(h,p))){for(r=i,(g||h).push(p);--r;)if(g=o[r],0>(g?t(g,p):a(n[r],p)))continue e;m.push(p)}}for(;i--;)(g=o[i])&&l(g);return f(o),f(h),m},K.invert=bt,K.invoke=function(e,t){var n=c(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Gt(typeof s=="number"?s:0);return At(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o},K.keys=jn,K.map=Mt,K.mapValues=function(e,t,n){var r={};return t=K.createCallback(t,n,3),d(e,function(e,n,i){r[n]=t(e,n,i)}),r},K.max=_t,K.memoize=function(e,t){function n(){var r=n.cache,i=t?t.apply(this,arguments):g+arguments[0];return yn.call(r,i)?r[i]:r[i]=e.apply(this,arguments)}if(!wt(e))throw new un;return n.cache={},n},K.merge=function(e){var t=arguments,n=2;if(!Et(e))return e;if("number"!=typeof t[2]&&(n=t.length),3<n&&"function"==typeof t[n-2])var r=tt(t[--n-1],t[n--],2);else 2<n&&"function"==typeof t[n-1]&&(r=t[--n]);for(var t=c(arguments,1,n),i=-1,s=u(),o=u();++i<n;)ot(e,t[i],r,s,o);return f(s),f(o),e},K.min=function(e,t,n){var i=1/0,s=i;if(typeof t!="function"&&n&&n[t]===e&&(t=null),null==t&&Bn(e)){n=-1;for(var o=e.length;++n<o;){var u=e[n];u<s&&(s=u)}}else t=null==t&&xt(e)?r:K.createCallback(t,n,3),At(e,function(e,n,r){n=t(e,n,r),n<i&&(i=n,s=e)});return s},K.omit=function(e,t,n){var r={};if(typeof t!="function"){var i=[];v(e,function(e,t){i.push(t)});for(var i=rt(i,it(arguments,!0,!1,1)),s=-1,o=i.length;++s<o;){var u=i[s];r[u]=e[u]}}else t=K.createCallback(t,n,3),v(e,function(e,n,i){t(e,n,i)||(r[n]=e)});return r},K.once=function(e){var t,n;if(!wt(e))throw new un;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},K.pairs=function(e){for(var t=-1,n=jn(e),r=n.length,i=Gt(r);++t<r;){var s=n[t];i[t]=[s,e[s]]}return i},K.partial=function(e){return lt(e,16,c(arguments,1))},K.partialRight=function(e){return lt(e,32,null,c(arguments,1))},K.pick=function(e,t,n){var r={};if(typeof t!="function")for(var i=-1,s=it(arguments,!0,!1,1),o=Et(e)?s.length:0;++i<o;){var u=s[i];u in e&&(r[u]=e[u])}else t=K.createCallback(t,n,3),v(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r},K.pluck=Vn,K.property=Kt,K.pull=function(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var s=-1,o=t[n];++s<i;)e[s]===o&&(En.call(e,s--,1),i--);return e},K.range=function(e,t,n){e=+e||0,n=typeof n=="number"?n:+n||1,null==t&&(t=e,e=0);var r=-1;t=An(0,pn((t-e)/(n||1)));for(var i=Gt(t);++r<t;)i[r]=e,e+=n;return i},K.reject=function(e,t,n){return t=K.createCallback(t,n,3),kt(e,function(e,n,r){return!t(e,n,r)})},K.remove=function(e,t,n){var r=-1,i=e?e.length:0,s=[];for(t=K.createCallback(t,n,3);++r<i;)n=e[r],t(n,r,e)&&(s.push(n),En.call(e,r--,1),i--);return s},K.rest=It,K.shuffle=Ht,K.sortBy=function(e,t,n){var r=-1,s=Bn(t),o=e?e.length:0,c=Gt(typeof o=="number"?o:0);for(s||(t=K.createCallback(t,n,3)),At(e,function(e,n,i){var o=c[++r]=a();s?o.m=Mt(t,function(t){return e[t]}):(o.m=u())[0]=t(e,n,i),o.n=r,o.o=e}),o=c.length,c.sort(i);o--;)e=c[o],c[o]=e.o,s||f(e.m),l(e);return c},K.tap=function(e,t){return t(e),e},K.throttle=function(e,t,n){var r=!0,i=!0;if(!wt(e))throw new un;return!1===n?r=!1:Et(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),z.leading=r,z.maxWait=t,z.trailing=i,Xt(e,t,z)},K.times=function(e,t,n){e=-1<(e=+e)?e:0;var r=-1,i=Gt(e);for(t=tt(t,n,1);++r<e;)i[r]=t(r);return i},K.toArray=function(e){return e&&typeof e.length=="number"?c(e):Tt(e)},K.transform=function(e,t,n,r){var i=Bn(e);if(null==n)if(i)n=[];else{var s=e&&e.constructor;n=et(s&&s.prototype)}return t&&(t=K.createCallback(t,r,4),(i?At:d)(e,function(e,r,i){return t(n,e,r,i)})),n},K.union=function(){return at(it(arguments,!0,!0))},K.uniq=Rt,K.values=Tt,K.where=kt,K.without=function(e){return rt(e,c(arguments,1))},K.wrap=function(e,t){return lt(t,16,[e])},K.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Bn(n)||mt(n))var r=r?at(rt(r,n).concat(rt(n,r))):n}return r||[]},K.zip=Ut,K.zipObject=zt,K.collect=Mt,K.drop=It,K.each=At,K.eachRight=Ot,K.extend=V,K.methods=yt,K.object=zt,K.select=kt,K.tail=It,K.unique=Rt,K.unzip=Ut,$t(K),K.clone=function(e,t,n,r){return typeof t!="boolean"&&null!=t&&(r=n,n=t,t=!1),Z(e,t,typeof n=="function"&&tt(n,r,1))},K.cloneDeep=function(e,t,n){return Z(e,!0,typeof t=="function"&&tt(t,n,1))},K.contains=Nt,K.escape=function(e){return null==e?"":on(e).replace(Rn,ct)},K.every=Ct,K.find=Lt,K.findIndex=function(e,t,n){var r=-1,i=e?e.length:0;for(t=K.createCallback(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1},K.findKey=function(e,t,n){var r;return t=K.createCallback(t,n,3),d(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r},K.findLast=function(e,t,n){var r;return t=K.createCallback(t,n,3),Ot(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r},K.findLastIndex=function(e,t,n){var r=e?e.length:0;for(t=K.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1},K.findLastKey=function(e,t,n){var r;return t=K.createCallback(t,n,3),gt(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r},K.has=function(e,t){return e?yn.call(e,t):!1},K.identity=Vt,K.indexOf=Ft,K.isArguments=mt,K.isArray=Bn,K.isBoolean=function(e){return!0===e||!1===e||e&&typeof e=="object"&&cn.call(e)==H||!1},K.isDate=function(e){return e&&typeof e=="object"&&cn.call(e)==B||!1},K.isElement=function(e){return e&&1===e.nodeType||!1},K.isEmpty=function(e){var t=!0;if(!e)return t;var n=cn.call(e),r=e.length;return n==P||n==R||n==D||n==I&&typeof r=="number"&&wt(e.splice)?!r:(d(e,function(){return t=!1}),t)},K.isEqual=function(e,t,n,r){return st(e,t,typeof n=="function"&&tt(n,r,2))},K.isFinite=function(e){return Cn(e)&&!kn(parseFloat(e))},K.isFunction=wt,K.isNaN=function(e){return St(e)&&e!=+e},K.isNull=function(e){return null===e},K.isNumber=St,K.isObject=Et,K.isPlainObject=Un,K.isRegExp=function(e){return e&&typeof e=="object"&&cn.call(e)==q||!1},K.isString=xt,K.isUndefined=function(e){return typeof e=="undefined"},K.lastIndexOf=function(e,t,n){var r=e?e.length:0;for(typeof n=="number"&&(r=(0>n?An(0,r+n):On(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},K.mixin=$t,K.noConflict=function(){return n._=ln,this},K.noop=Jt,K.now=$n,K.parseInt=Jn,K.random=function(e,t,n){var r=null==e,i=null==t;return null==n&&(typeof e=="boolean"&&i?(n=e,e=1):i||typeof t!="boolean"||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=_n(),On(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):ut(e,t)},K.reduce=Dt,K.reduceRight=Pt,K.result=function(e,t){if(e){var n=e[t];return wt(n)?e[t]():n}},K.runInContext=h,K.size=function(e){var t=e?e.length:0;return typeof t=="number"?t:jn(e).length},K.some=Bt,K.sortedIndex=qt,K.template=function(e,t,n){var r=K.templateSettings;e=on(e||""),n=b({},n,r);var i,s=b({},n.imports,r.imports),r=jn(s),s=Tt(s),u=0,a=n.interpolate||A,f="__p+='",a=sn((n.escape||A).source+"|"+a.source+"|"+(a===k?T:A).source+"|"+(n.evaluate||A).source+"|$","g");e.replace(a,function(t,n,r,s,a,l){return r||(r=s),f+=e.slice(u,l).replace(M,o),n&&(f+="'+__e("+n+")+'"),a&&(i=!0,f+="';"+a+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),u=l+t.length,t}),f+="';",a=n=n.variable,a||(n="obj",f="with("+n+"){"+f+"}"),f=(i?f.replace(E,""):f).replace(S,"$1").replace(x,"$1;"),f="function("+n+"){"+(a?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var l=en(r,"return "+f).apply(p,s)}catch(c){throw c.source=f,c}return t?l(t):(l.source=f,l)},K.unescape=function(e){return null==e?"":on(e).replace(qn,vt)},K.uniqueId=function(e){var t=++m;return on(null==e?"":e)+t},K.all=Ct,K.any=Bt,K.detect=Lt,K.findWhere=Lt,K.foldl=Dt,K.foldr=Pt,K.include=Nt,K.inject=Dt,$t(function(){var e={};return d(K,function(t,n){K.prototype[n]||(e[n]=t)}),e}(),!1),K.first=jt,K.last=function(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=i;for(t=K.createCallback(t,n,3);s--&&t(e[s],s,e);)r++}else if(r=t,null==r||n)return e?e[i-1]:p;return c(e,An(0,i-r))},K.sample=function(e,t,n){return e&&typeof e.length!="number"&&(e=Tt(e)),null==t||n?e?e[ut(0,e.length-1)]:p:(e=Ht(e),e.length=On(An(0,t),e.length),e)},K.take=jt,K.head=jt,d(K,function(e,t){var n="sample"!==t;K.prototype[t]||(K.prototype[t]=function(t,r){var i=this.__chain__,s=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&typeof t=="function")?new Q(s,i):s})}),K.VERSION="2.4.1",K.prototype.chain=function(){return this.__chain__=!0,this},K.prototype.toString=function(){return on(this.__wrapped__)},K.prototype.value=Qt,K.prototype.valueOf=Qt,At(["join","pop","shift"],function(e){var t=an[e];K.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new Q(n,e):n}}),At(["push","reverse","sort","unshift"],function(e){var t=an[e];K.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),At(["concat","slice","splice"],function(e){var t=an[e];K.prototype[e]=function(){return new Q(t.apply(this.__wrapped__,arguments),this.__chain__)}}),K}var p,d=[],v=[],m=0,g=+(new Date)+"",y=75,b=40,w=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",E=/\b__p\+='';/g,S=/\b(__p\+=)''\+/g,x=/(__e\(.*?\)|\b__t\))\+'';/g,T=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,N=/\w*$/,C=/^\s*function[ \n\r\t]+\w/,k=/<%=([\s\S]+?)%>/g,L=RegExp("^["+w+"]*0+(?=.$)"),A=/($^)/,O=/\bthis\b/,M=/['\n\r\t\u2028\u2029\\]/g,_="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),D="[object Arguments]",P="[object Array]",H="[object Boolean]",B="[object Date]",j="[object Function]",F="[object Number]",I="[object Object]",q="[object RegExp]",R="[object String]",U={};U[j]=!1,U[D]=U[P]=U[H]=U[B]=U[F]=U[I]=U[q]=U[R]=!0;var z={leading:!1,maxWait:0,trailing:!1},W={configurable:!1,enumerable:!1,value:null,writable:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},V={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},$=X[typeof window]&&window||this,J=X[typeof exports]&&exports&&!exports.nodeType&&exports,K=X[typeof module]&&module&&!module.nodeType&&module,Q=K&&K.exports===J&&J,G=X[typeof global]&&global;!G||G.global!==G&&G.window!==G||($=G);var Y=h();typeof define=="function"&&typeof define.amd=="object"&&define.amd?($._=Y,define("_",[],function(){return Y})):J&&K?Q?(K.exports=Y)._=Y:J._=Y:$._=Y}.call(this),define("data/Style",["require","pixi","_"],function(e){var t=e("pixi"),n=e("_"),r=null,i={loop:!1},s={},o=function(e){this.lineColor=e.lineColor||16711680,this.backgroundColor=e.backgroundColor||16711833},u={};u.brightYellow=new o({backgroundColor:15979815,lineColor:16079152}),u.brightGreen=new o({backgroundColor:1113773,lineColor:16777215}),u.greenBlue=new o({backgroundColor:7860636,lineColor:993903}),u.pinkGrey=new o({backgroundColor:16745091,lineColor:6710886});var a=Math.floor(Math.random()*4),f=n.find(u,function(e,t,n){return t===a}),l=window.innerWidth-20,c=window.innerHeight-30,h=15,p=15,d=1314,v=1e3,m=1.2;d*=m,v*=m,Object.defineProperty(s,"drawingArea",{value:new t.Rectangle(h,p,d,v)}),Object.defineProperty(s,"stageWidth",{value:l}),Object.defineProperty(s,"stageHeight",{value:c}),Object.defineProperty(s,"settings",{value:i}),Object.defineProperty(s,"isLoop",{value:i.loop}),Object.defineProperty(s,"stage",{set:function(e){r=e},get:function(){return r}});var l=s.stageWidth,c=s.stageHeight,g=l*c,y=-3.5/16e5,b=2;return g>13e5&&g<2e6?b=2.5:g>75e4&g<=13e5?b=3.5:g>3e5&g<=75e4&&(b=4.5),console.log(g,b),Object.defineProperty(s,"lineWidth",{value:b}),Object.defineProperty(s,"lineColor",{value:7497235}),Object.defineProperty(s,"backgroundColor",{value:14540253}),Object.defineProperty(s,"theme",{value:null}),s}),define("yt",["require","jquery","signals","data/Style"],function(e){var t=e("jquery"),n=e("signals"),r=e("data/Style"),i={signalLoaded:new n,playVideo:function(e,n){typeof YT=="undefined"||typeof YT.Player=="undefined"?(window.onYouTubeIframeAPIReady=function(){i.loadPlayer(e,n)},t.getScript("//www.youtube.com/iframe_api")):i.loadPlayer(e,n)},loadPlayer:function(e,t){window.player=new YT.Player(e,{videoId:t,width:r.stageWidth,height:r.stageHeight,playerVars:{autoplay:1,controls:0,modestbranding:1,rel:0,showInfo:0}}),i.signalLoaded.dispatch(window.player)}};return i}),define("controllers/Basic",[],function(){function e(e,t,n,r){var i,s={x:-1,y:-1},o=0,u=0;e&&Object.defineProperty(this,"content",{value:e}),t&&Object.defineProperty(this,"mommy",{value:t}),n&&Object.defineProperty(this,"queue",{value:n}),r&&Object.defineProperty(this,"type",{value:r}),Object.defineProperty(this,"width",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(this,"height",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"children",{set:function(e){i=e},get:function(){return i}}),Object.defineProperty(this,"totalChildren",{value:function(){return children?children.list.length:0}}),Object.defineProperty(this,"hasChildren",{get:function(){return i?!0:!1}}),Object.defineProperty(this,"offsetX",{get:function(){return s.x},set:function(e){this.hasChildren?this.children.forEach(function(t){s.x+=e,t.offsetX=e},this):s.x+=e}}),Object.defineProperty(this,"offsetY",{get:function(){return s.y},set:function(e){this.hasChildren?this.children.forEach(function(t){s.y+=e,t.offsetY=e}):s.y+=e}});var a;Object.defineProperty(this,"sibling",{get:function(){return _.filter(this.mommy.children,function(e){return e!==this},this)}})}return e.prototype.getChildAt=function(e){return e>=this.children.length?!1:this.children[e]},e.prototype.createChildren=function(e,t,n){var r=[];this.children=[],t.forEach(function(n,i){var s={me:i,total:t.length},o=this,u=new e(n,o,s);u.chain=r[r.length-1],r.push(u)},this),this.children=r},e}),define("data/Font",["require","data/Style","jquery","pixi","_"],function(e){var t=e("data/Style"),n=e("jquery"),r=e("pixi"),i=e("_"),s=function(e,t){this.p1=e,this.p2=t},o=function(e){var t=e.points,n=[];i.forEach(t,function(e){var t=[];n.push(t);var s=[],o=[];i.forEach(e,function(e){var n=new r.Point(e[0],e[1]);s.push(n);if(s.length===2){var i=[s[0],s[1]];s.splice(0,1),o.push(i),t.push(i)}})}),e.parsed=n},u={settings:{supportsUpperCase:!0,supportsLowerCase:!1},getCharacter:function(e){var t=this.characters.abc;return t[e]||(!this.settings.supportsUpperCase&&this.settings.supportsLowerCase?e=e.toLowerCase():this.settings.supportsUpperCase&&!this.settings.supportsLowerCase&&(e=e.toUpperCase())),t[e]?t[e]:e==="."?t.period:e===","?t.comma:e==="'"?t.aposterphe:this.characters.special.notfound},parse:function(){var e=this.characters.abc;i.forEach(e,o)},characters:{special:{notfound:{id:"notfound",points:[[[],[]]]}},abc:{A:{id:"A",points:[[[0,200],[73,0],[150,200]],[[39,100],[113,100]]]},B:{id:"B",points:[[[0,0],[0,200]],[[0,0],[105,0],[125,20],[125,80],[105,100],[0,100],[105,100],[125,120],[125,180],[105,200],[0,200]]]},C:{id:"C",points:[[[115,0],[20,0],[0,20],[0,180],[20,200],[115,200]]]},D:{id:"D",points:[[[0,0],[0,200]],[[0,0],[105,0],[125,20],[125,180],[105,200],[0,200]]]},E:{id:"E",points:[[[0,0],[0,200]],[[0,0],[125,0]],[[0,100],[75,100]],[[0,200],[125,200]]]},F:{id:"F",points:[[[0,0],[0,200]],[[0,0],[125,0]],[[0,100],[75,100]]]},G:{id:"G",points:[[[125,0],[20,0],[0,20],[0,180],[20,200],[125,200],[125,110],[45,110]]]},H:{id:"H",points:[[[0,0],[0,200]],[[125,0],[125,200]],[[0,100],[125,100]]]},I:{id:"I",points:[[[0,0],[100,0]],[[50,0],[50,200]],[[0,200],[100,200]]]},J:{id:"J",points:[[[0,0],[125,0]],[[67,0],[67,180],[47,200],[0,200]]]},K:{id:"K",points:[[[0,0],[0,200]],[[115,0],[0,100],[115,200]]]},L:{id:"L",points:[[[0,0],[0,200],[120,200]]]},M:{id:"M",points:[[[0,200],[0,0],[75,100],[150,0],[150,200]]]},N:{id:"N",points:[[[0,200],[0,0],[125,200],[125,200],[125,0]]]},O:{id:"O",points:[[[20,0],[105,0],[125,20],[125,180],[105,200],[20,200],[0,180],[0,20],[20,0]]]},P:{id:"P",points:[[[0,0],[0,200]],[[0,0],[105,0],[125,20],[125,80],[105,100],[0,100]]]},Q:{id:"Q",points:[[[20,0],[105,0],[125,20],[125,180],[105,200],[20,200],[0,180],[0,20],[20,0]],[[67,170],[125,225]]]},R:{id:"R",points:[[[0,0],[0,200]],[[0,0],[105,0],[125,20],[125,80],[105,100],[0,100]],[[67,100],[125,200]]]},S:{id:"S",points:[[[125,0],[20,0],[0,20],[0,80],[20,100],[105,100],[125,120],[125,180],[105,200],[0,200]]]},T:{id:"T",points:[[[0,0],[125,0]],[[67,0],[67,200]]]},U:{id:"U",points:[[[0,0],[0,180],[20,200],[105,200],[125,180],[125,0]]]},V:{id:"V",points:[[[0,0],[67,200],[125,0]]]},W:{id:"W",points:[[[0,0],[54,200],[100,50],[150,200],[200,0]]]},X:{id:"X",points:[[[0,0],[125,200]],[[125,0],[0,200]]]},Y:{id:"Y",points:[[[0,0],[67,100],[125,0]],[[67,100],[67,200]]]},Z:{id:"Z",points:[[[0,0],[125,0],[0,200],[125,200]]]},1:{id:"1",points:[[[0,0],[50,0]],[[50,0],[50,200]],[[0,200],[100,200]]]},2:{id:"2",points:[[[0,60],[0,20],[20,0],[20,0],[105,0],[125,20],[125,100],[0,200],[125,200]]]},3:{id:"3",points:[[[0,0],[105,0],[125,20],[125,80],[105,100],[25,100],[105,100],[125,120],[125,180],[105,200],[0,200]]]},4:{id:"4",points:[[[0,0],[0,100],[125,100]],[[125,0],[125,200]]]},5:{id:"5",points:[[[0,0],[0,100],[105,100],[125,120],[125,180],[105,200],[0,200]],[[0,0],[120,0]]]},6:{id:"6",points:[[[125,0],[20,0],[0,20],[0,180],[20,200],[105,200],[125,180],[125,120],[105,100],[0,100]]]},7:{id:"7",points:[[[0,0],[125,0],[0,200]]]},8:{id:"8",points:[[[105,0],[20,0],[0,20],[0,80],[20,100],[105,100],[125,120],[125,180],[105,200],[20,200],[0,180],[0,120],[20,100],[105,100],[125,80],[125,20],[105,0]]]},9:{id:"9",points:[[[125,20],[105,0],[20,0],[0,20],[0,80],[20,100],[105,100],[125,80],[125,20]],[[105,100],[0,200]]]},0:{id:"0",points:[[[20,0],[105,0],[125,20],[125,180],[105,200],[20,200],[0,180],[0,20],[20,0]]]},period:{id:"period",points:[[[0,190],[10,190],[10,200],[0,200],[0,190]]]},comma:{id:"comma",points:[[[0,190],[10,190],[10,195],[5,200],[0,200],[0,190]],[[10,195],[-5,210]]]},aposterphe:{id:"aposterphe",points:[[[0,0],[10,0],[10,5],[5,10],[0,10],[0,0]],[[10,5],[-5,20]]]}}}},a=.75,f=200,l=200;return Object.defineProperty(u,"scale",{value:a}),Object.defineProperty(u,"width",{value:a*f}),Object.defineProperty(u,"height",{value:a*l}),Object.defineProperty(u,"leading",{value:a*l*.3}),Object.defineProperty(u,"space",{value:a*f*.5}),Object.defineProperty(u,"kerning",{value:a*f*.2}),u}),define("controllers/Point.Controller",["pixi","controllers/Basic","TweenMax","signals"],function(){function i(e,n,i){var s={tweenDone:new r};t.call(this,e,n,i,"POINT");var o=e.clone(),u=e.clone();Object.defineProperty(this,"getLetter",{value:this.mommy.mommy.mommy}),Object.defineProperty(this,"getWord",{value:this.mommy.mommy.mommy.mommy}),Object.defineProperty(this,"from",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(this,"to",{get:function(){return u},set:function(e){u=e}});var a=this;Object.defineProperty(o,"_x",{get:function(){return o.x+a.offsetX}}),Object.defineProperty(u,"_x",{get:function(){return u.x+a.offsetX}}),Object.defineProperty(o,"_y",{get:function(){return o.y+a.offsetY}}),Object.defineProperty(u,"_y",{get:function(){return u.y+a.offsetY}}),Object.defineProperty(this,"signals",{value:s})}var e=require("pixi"),t=require("controllers/Basic"),n=require("TweenMax"),r=require("signals");return i.prototype=Object(t.prototype),i.prototype.constructor=i,i.prototype.tween=function(e,t,n){this.signals.tweenDone.active=!0;var r=this[e]();this.from.x=r.from.x,this.from.y=r.from.y,this.to.x=r.to.x,this.to.y=r.to.y;var i=r.from.x-r.to.x,s=r.from.y-r.to.y,o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2)),u=o/t,a=TweenLite.to(this.from,u,{x:r.to.x,y:r.to.y,delay:n,ease:Strong.easeOut,onCompleteScope:this,onComplete:function(){this.signals.tweenDone.dispatch(this)}});return a},i.prototype.reset=function(){this.from=this.content.clone(),this.to=this.content.clone()},i.prototype.FROM_SIBLING_TO_HERE=function(){if(this.queue.me===1)return{from:this.sibling[0].to,to:this.to};throw"This current point is not P2. I know this because it has a chain."},i.prototype.FROM_HERE_TO_SIBLING=function(){if(this.queue.me===1)return{from:this.to,to:this.sibling[0].content};throw"This current point is not P2. I know this because it has a chain."},i}),define("controllers/Line.Controller",["require","pixi","controllers/Basic","controllers/Point.Controller"],function(e){var t=e("pixi"),n=e("controllers/Basic"),r=e("controllers/Point.Controller"),i=500,s=function(e,t,i){n.call(this,e,t,i,"LINE"),this.createChildren(r,e);var s=this.children[0],o=this.children[1];Object.defineProperty(this,"p1",{get:function(){return s}}),Object.defineProperty(this,"p2",{get:function(){return o}}),Object.defineProperty(this,"getLetter",{value:this.mommy.mommy}),Object.defineProperty(this,"getWord",{value:this.mommy.mommy.mommy})};return s.prototype=Object(n.prototype),s.prototype.constructor=s,s}),define("controllers/Stroke.Controller",["require","pixi","controllers/Line.Controller","controllers/Basic"],function(e){var t=e("pixi"),n=e("controllers/Line.Controller"),r=e("controllers/Basic"),i=function(e,i,s){var o=[],u=[];_.each(e,function(e){var n=new t.Point(e[0],e[1]);o.push(n);if(o.length===2){var r=[o[0],o[1]];o.splice(0,1),u.push(r)}},this),r.call(this,e,i,s,"STROKE"),this.createChildren(n,u,"lines"),Object.defineProperty(this,"getLetter",{value:this.mommy}),Object.defineProperty(this,"getWord",{value:this.mommy.mommy})};return i.prototype=Object(r.prototype),i.prototype.constructor=i,i}),define("controllers/Letter.Controller",["require","pixi","data/Font","controllers/Line.Controller","controllers/Stroke.Controller","controllers/Basic","_"],function(e){function u(e,r,u){var a=n.getCharacter(e);s.call(this,e,r,u,"LETTER"),this.createChildren(i,a.points,"stroke");var f={x:99999,y:99999},l={x:-1,y:-1},c=a.points;o.each(c,function(e){o.each(e,function(e){var n=new t.Point(e[0],e[1]);f.x=n.x<f.x?n.x:f.x,f.y=n.y<f.y?n.y:f.y,l.x=n.x>l.x?n.x:l.x,l.y=n.y>l.y?n.y:l.y},this)},this);var h=l.x-f.x,p=l.y-f.y,d=new t.Rectangle(f.x,f.y,h===0?1:h,p);this.width=d.width,this.height=d.height,Object.defineProperty(this,"rect",{get:function(){return d}}),Object.defineProperty(this,"padding",{get:function(){return n.kerning}}),Object.defineProperty(this,"getWord",{value:this.mommy})}var t=e("pixi"),n=e("data/Font"),r=e("controllers/Line.Controller"),i=e("controllers/Stroke.Controller"),s=e("controllers/Basic"),o=e("_");return u.prototype=Object(s.prototype),u.prototype.constructor=u,u.prototype.getPoints=function(){var e=[];return this.children.forEach(function(t){t.children.forEach(function(t){t.children.forEach(function(t){e.push(t)})})}),e},u.prototype.getLines=function(){var e=[];return this.children.forEach(function(t){t.children.forEach(function(t){e.push(t)})}),e},u}),define("controllers/Word.Controller",["require","controllers/Letter.Controller","controllers/Basic"],function(e){function r(e,r,i){n.call(this,e,r,i,"WORD"),this.createChildren(t,e.split(""));var s=0,o=0;this.children.forEach(function(e){o=Math.max(o,e.height),e.offsetX=s,s+=e.width+e.padding},this),this.width=s,this.height=o}var t=e("controllers/Letter.Controller"),n=e("controllers/Basic");return r.prototype=Object(n.prototype),r.prototype.constructor=r,r.prototype.letters=function(e){return this.getChildAt(e)},r}),define("data/Common",["require","pixi"],function(e){window.pixi=e("pixi");var t=[];window.peep="";if(window.location.hash){window.peep=window.location.hash.substr(1);var n=[{message:"Hi "+window.peep+". It's been great working with you this year.",playAt:1},{message:"Here's to 2015. All the best, Gar",playAt:8},{message:"",playAt:15}],r=[{message:"Hi "+window.peep+". Thanks for all the Telus work.",playAt:1},{message:"Here's to 2015. All the best, Gar",playAt:8},{message:"",playAt:15}];peep==="ann"?t=r:t=n}var i=[],s={video:"RDZ3sXVxqDbFk",artist:"Drummer boy",lyrics:[{message:"Happy Holidays, "+window.peep,playAt:222},{message:"",playAt:333},{message:"Should auld acquaintance be forgot,",playAt:19},{message:"And never brought to mind?",playAt:24},{message:"Should auld acquaintance be forgot,",playAt:30},{message:"And days of auld lang syne!",playAt:36},{message:"For auld lang syne, my dear",playAt:42},{message:"For auld lang syne,",playAt:47},{message:"We'll drink a cup o' kindness yet",playAt:53},{message:"For auld lang syne!",playAt:58},{message:"For auld lang syne, my dear",playAt:64},{message:"For auld lang syne,",playAt:69},{message:"We'll drink a cup o' kindness yet",playAt:74},{message:"For auld lang syne!",playAt:80},{message:"We'll drink a cup o' kindness yet",playAt:88},{message:"For auld lang syne!",playAt:92}]};i=s.lyrics.concat(t);var o={};return Object.defineProperty(o,"lyrics",{value:i}),Object.defineProperty(o,"video",{value:s.video}),o}),define("controllers/Message.Controller",["require","controllers/Word.Controller","controllers/Basic","data/Common","data/Style","data/Font"],function(e){function o(e,r,o){n.call(this,e.message,r,o,"MESSAGE"),this.playAt=e.playAt,this.virgin=!0,this.readDuration=e.readDuration,this.createChildren(t,e.message.split(" "));var u=i.drawingArea,a=u.x,f=u.y,l={width:i.stageWidth,height:i.stageHeight};this.children.forEach(function(e){a+e.width>u.width&&(a=i.drawingArea.x,f+=s.height+s.leading+0),e.offsetX=a,e.offsetY=f,a+=e.width+s.space},this)}var t=e("controllers/Word.Controller"),n=e("controllers/Basic"),r=e("data/Common"),i=e("data/Style"),s=e("data/Font");return o.prototype=Object(n.prototype),o.prototype.constructor=o,o.prototype.words=function(e){return this.getChildAt(e)},o}),define("controllers/Story",["require","controllers/Basic","data/Font","controllers/Message.Controller"],function(e){function i(e){this.id="STORY",t.call(this,e),this.createChildren(r,e)}var t=e("controllers/Basic"),n=e("data/Font"),r=e("controllers/Message.Controller");return i.prototype=Object(t.prototype),i.prototype.constructor=i,i.prototype.messages=function(e){return this.getChildAt(e)},i}),define("controllers/Controller",["require","controllers/Story","data/Common","data/Font"],function(e){function i(){_.each(r.characters.abc,function(e){e.points.forEach(function(e){e.forEach(function(e){e[0]*=r.scale,e[1]*=r.scale})})});var e=new t(n.lyrics);Object.defineProperty(this,"story",{get:function(){return e}})}var t=e("controllers/Story"),n=e("data/Common"),r=e("data/Font");return i}),define("common/Everywhere",["require","signals","pixi"],function(e){var t=e("signals"),n=e("pixi"),r={graphic:new n.Graphics,signals:{ticker:new t}};return r}),define("controllers/Tween.Controller",["require","signals","TimelineMax"],function(e){var t=e("signals"),n=e("TimelineMax"),r=function(){};return r.prototype.lines=function(e){var r=0,i={signalsList:[],signalDone:new t},s=new n({onCompleteScope:this,onComplete:function(){i.signalDone.dispatch()}});return s.pause(),e.forEach(function(t,n){var s=(n+1)/e.length,o=s*3,u=100,a=t.p2.signals,f=t.p2.tween("FROM_SIBLING_TO_HERE",u,o);a.tweenDone.add(function(){r++,r===e.length&&i.signalDone.dispatch()})}),i.signalDone},r}),define("controllers/Player.Controller",["require","signals","data/Style","yt"],function(e){function l(){f=setInterval(function(){u=a,a=window.player.getCurrentTime();var e=Math.abs(u-a);if(e<.7){var t=c(a);t&&p(t)}},500)}function c(e){var t,n={diff:999,message:{}};return _.each(s,function(n){var r=e-n.playAt;if(r>0&&n.virgin&&r<1.5)return t=n,n.virgin=!1,!1}),t}function h(){var e={time:99999,messageForNow:null};_.each(s,function(t){var n=Math.abs(t.playAt-window.player.getCurrentTime());n<e.time&&(e.time=n,e.messageForNow=t)}),i=e.messageForNow.queue.me}function p(e){o.playMessage.dispatch(e),i++}var t=e("signals"),n=e("data/Style"),r=e("yt"),i=0,s,o={playMessage:new t},u=0,a=0,f,d=function(e){s=e,this.signals=o,r.signalLoaded.add(function(){l(),window.player.addEventListener("onStateChange",function(e){e.data===0?(clearInterval(f),p(s[0])):e.data===1&&(_.each(s,function(e){e.virgin=!0}),p(s[1]),l())})}),r.playVideo("ytplayer","Z3sXVxqDbFk")};return d}),define("views/Paper",["require","pixi","TweenMax","jquery","data/Common","data/Style","common/Everywhere","controllers/Tween.Controller","controllers/Player.Controller","data/Common"],function(e){function E(e){c=e,m.lineColor=s.theme?s.theme.lineColor:s.lineColor,m.backgroundColor=s.theme?s.theme.backgroundColor:s.backgroundColor,f=new t.Stage(m.backgroundColor),s.stage=f;var n=document.getElementById("rhythym"),i=s.drawingArea.width/s.drawingArea.height;l=t.autoDetectRenderer(s.drawingArea.width,s.drawingArea.height,n,!0,!0);var h=Math.min(s.stageWidth/l.width,s.stageHeight/l.height),p=l.width*h,v=l.height*h;r("#rhythym").css("width",p+"px"),r("#rhythym").css("height",v+"px");var g=(s.stageWidth-p)/2,y=(s.stageHeight-v)/2;r("#rhythym").css("left",g+"px"),r("#rhythym").css("top",y+"px");var b=p*v;requestAnimFrame(C),f.addChild(o.graphic),d=new u,w=new a(c.children),w.signals.playMessage.add(function(e){x(e)})}function S(e){c.children.forEach(function(e){console.log(e.playAt);var t=n.delayedCall(e.playAt,function(){x(e)});g.push(t)})}function x(e){var t=d.lines(T(e))}function T(e){return h=[],e.children.forEach(function(e){e.children.forEach(function(e){e.children.forEach(function(e){e.children.forEach(function(e){h.push(e)})})})}),h}function N(){o.graphic.clear(),h.forEach(function(e){var t=e.p1.from,n=e.p2.from;o.graphic.lineStyle(s.lineWidth,m.lineColor,1),o.graphic.moveTo(t._x,t._y),o.graphic.lineTo(n._x,n._y),o.graphic.endFill()})}function C(){requestAnimFrame(C),l.render(f),N()}var t=e("pixi"),n=e("TweenMax"),r=e("jquery"),i=e("data/Common"),s=e("data/Style"),o=e("common/Everywhere"),u=e("controllers/Tween.Controller"),a=e("controllers/Player.Controller"),i=e("data/Common"),f,l,c,h=[],p=-1,d,v,m={},g=[],y,b,w;return E}),define("views/View",["require","views/Paper"],function(e){function i(e){n=e.story,r=new t(n)}function s(){}var t=e("views/Paper"),n,r;return i}),define("App",["require","controllers/Controller","views/View"],function(e){var t=e("controllers/Controller"),n=e("views/View"),r={};return r.start=function(){var e=new t,r=new n(e);window.c=e},r}),require.config({paths:{pixi:"../bower_components/pixi/bin/pixi.dev",TweenMax:"../bower_components/greensock/src/uncompressed/TweenMax",TweenLite:"../bower_components/greensock/src/uncompressed/TweenLite",TimelineMax:"../bower_components/greensock/src/uncompressed/TimelineMax",signals:"../bower_components/signals/dist/signals",yt:"../scripts/lib/player_api",jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min",_:"../bower_components/lodash/dist/lodash.min"}}),require(["pixi","TweenMax","TweenLite","TimelineMax","signals","yt","_","App"],function(e,t,n,r,i,s,o,u){u.start(),console.log("window.peep "+window.peep),_gaq.push(["_trackEvent","Xmas2014",window.peep])}),define("main",function(){});